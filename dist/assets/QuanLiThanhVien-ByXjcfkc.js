import{c as Q,j as E,u as Le,a as Ae,a7 as Te,r as P,V as Xe,B as U,a9 as Ce,d as de,ao as Ye,x as je,T as ue,aq as He}from"./index-B0N4umr3.js";import{u as De}from"./useQuery-CJ73VS18.js";import{f as $e,R as Fe}from"./user.apis-Dmm3LtKd.js";import{M as Be}from"./ManagementPageLayout-CR8cRzYv.js";import{G as ze}from"./GridActionsCellItem-C1VwPmoh.js";const Ne=Q(E.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle"),qe=Q(E.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),ne=Q(E.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),We=Q([E.jsx("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87"},"0"),E.jsx("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),E.jsx("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"},"2")],"PeopleAlt"),_e=Q(E.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");function fe(e){return typeof e=="object"&&e!==null&&"x"in e&&"y"in e&&"unit"in e&&typeof e.unit=="string"&&typeof e.x=="object"&&typeof e.y=="object"&&"topLeft"in e.x&&"topRight"in e.x&&"bottomRight"in e.x&&"bottomLeft"in e.x&&"topLeft"in e.y&&"topRight"in e.y&&"bottomRight"in e.y&&"bottomLeft"in e.y}function ve(e){var t;const n=e.match(/(\d+(?:\.\d+)?)(px|%)/g);if(!n)return{x:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},y:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},unit:"px"};const o=n.map(h=>{const[f,m,b]=h.match(/(\d+(?:\.\d+)?)(px|%)/)??[];return{value:parseFloat(m),unit:b}}),r=((t=o[0])==null?void 0:t.unit)||"px";if(o.some(h=>h.unit!==r))throw new Error("Inconsistent units in border-radius string.");const[c,s,i,u]=o.map(h=>h.value),g={topLeft:c??0,topRight:s??c??0,bottomRight:i??c??0,bottomLeft:u??s??c??0};return{x:{...g},y:{...g},unit:r}}function be({x:e,y:t,unit:n},o,r){if(n==="px"){const c={topLeft:e.topLeft/o,topRight:e.topRight/o,bottomLeft:e.bottomLeft/o,bottomRight:e.bottomRight/o},s={topLeft:t.topLeft/r,topRight:t.topRight/r,bottomLeft:t.bottomLeft/r,bottomRight:t.bottomRight/r};return{x:c,y:s,unit:"px"}}else if(n==="%")return{x:e,y:t,unit:"%"};return{x:e,y:t,unit:n}}function J(e){return`
    ${e.x.topLeft}${e.unit} ${e.x.topRight}${e.unit} ${e.x.bottomRight}${e.unit} ${e.x.bottomLeft}${e.unit}
    /
    ${e.y.topLeft}${e.unit} ${e.y.topRight}${e.unit} ${e.y.bottomRight}${e.unit} ${e.y.bottomLeft}${e.unit}
  `}function me(e){return e.x.topLeft===0&&e.x.topRight===0&&e.x.bottomRight===0&&e.x.bottomLeft===0&&e.y.topLeft===0&&e.y.topRight===0&&e.y.bottomRight===0&&e.y.bottomLeft===0}function he(e){return typeof e=="object"&&"x"in e&&"y"in e}function D(e,t){return{x:e,y:t}}function ke(e,t){return D(e.x+t.x,e.y+t.y)}function Oe(e,t){return D(e.x-t.x,e.y-t.y)}function Pe(e,t){return D(e.x*t,e.y*t)}function H(e,t,n){return e+(t-e)*n}function Ve(e,t,n){return ke(e,Pe(Oe(t,e),n))}function Re(e,t,n){return{x:{topLeft:H(e.x.topLeft,t.x.topLeft,n),topRight:H(e.x.topRight,t.x.topRight,n),bottomRight:H(e.x.bottomRight,t.x.bottomRight,n),bottomLeft:H(e.x.bottomLeft,t.x.bottomLeft,n)},y:{topLeft:H(e.y.topLeft,t.y.topLeft,n),topRight:H(e.y.topRight,t.y.topRight,n),bottomRight:H(e.y.bottomRight,t.y.bottomRight,n),bottomLeft:H(e.y.bottomLeft,t.y.bottomLeft,n)},unit:e.unit}}function Ge(e,t,n){return G((n-e)/(t-e),0,1)}function K(e,t,n,o,r){return H(n,o,Ge(e,t,r))}function G(e,t,n){return Math.min(Math.max(e,t),n)}const Ue={duration:350,easing:e=>e};function Me(e,t,n,o){let r=!1;const c=()=>{r=!0},s={...Ue,...o};let i;function u(g){i===void 0&&(i=g);const h=g-i,f=G(h/s.duration,0,1),m=Object.keys(e),b=Object.keys(t);if(!m.every(d=>b.includes(d))){console.error("animate Error: `from` keys are different than `to`");return}const x={};m.forEach(d=>{typeof e[d]=="number"&&typeof t[d]=="number"?x[d]=H(e[d],t[d],s.easing(f)):fe(e[d])&&fe(t[d])?x[d]=Re(e[d],t[d],s.easing(f)):he(e[d])&&he(t[d])&&(x[d]=Ve(e[d],t[d],s.easing(f)))}),n(x,f>=1,f),f<1&&!r&&requestAnimationFrame(u)}return requestAnimationFrame(u),c}const Ze={startDelay:0,targetEl:null};function Qe(e,t){const n={...Ze,...t};let o=e.el(),r=!1,c=null,s=null,i=null,u=null,g=0,h=0,f=0,m=0,b=0,x=0,d=0,I=0,l=0,R=0,S=null,y;o.addEventListener("pointerdown",a),document.body.addEventListener("pointerup",v),document.body.addEventListener("pointermove",A),document.body.addEventListener("touchmove",T,{passive:!1});function a(w){if(n.targetEl&&w.target!==n.targetEl&&!n.targetEl.contains(w.target)||r||!w.isPrimary)return;n.startDelay>0?(i==null||i({el:w.target}),y=setTimeout(()=>{z()},n.startDelay)):z();function z(){S=w.target;const Y=e.boundingRect(),_=e.layoutRect();b=_.x,x=_.y,f=Y.x-b,m=Y.y-x,g=w.clientX-f,h=w.clientY-m,d=w.clientX,I=w.clientY,l=(w.clientX-Y.x)/Y.width,R=(w.clientY-Y.y)/Y.height,r=!0,A(w)}}function p(){const w=e.layoutRect();g-=b-w.x,h-=x-w.y,b=w.x,x=w.y}function v(w){if(!r){y&&(clearTimeout(y),y=null,u==null||u({el:w.target}));return}if(!w.isPrimary)return;r=!1;const z=w.clientX-d,Y=w.clientY-I;s==null||s({x:f,y:m,pointerX:w.clientX,pointerY:w.clientY,width:z,height:Y,relativeX:l,relativeY:R,el:S}),S=null}function A(w){if(!r){y&&(clearTimeout(y),y=null,u==null||u({el:w.target}));return}if(!w.isPrimary)return;const z=w.clientX-d,Y=w.clientY-I,_=f=w.clientX-g,ee=m=w.clientY-h;c==null||c({width:z,height:Y,x:_,y:ee,pointerX:w.clientX,pointerY:w.clientY,relativeX:l,relativeY:R,el:S})}function T(w){if(!r)return!0;w.preventDefault()}function L(w){c=w}function C(w){s=w}function $(w){i=w}function F(w){u=w}function B(){o.removeEventListener("pointerdown",a),o=e.el(),o.addEventListener("pointerdown",a)}function q(){e.el().removeEventListener("pointerdown",a),document.body.removeEventListener("pointerup",v),document.body.removeEventListener("pointermove",A),document.body.removeEventListener("touchmove",T),c=null,s=null,i=null,u=null}return{onDrag:L,onDrop:C,onHold:$,onRelease:F,onElementUpdate:B,destroy:q,readjust:p}}function Ke(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function Je(e){return 1-Math.pow(1-e,3)}function Z(e){return{x:e.x,y:e.y,width:e.width,height:e.height}}function et(e){const t=e.getBoundingClientRect();let n=0,o=0,r=e.parentElement;for(;r;){const c=getComputedStyle(r).transform;if(c&&c!=="none"){const s=c.match(/matrix.*\((.+)\)/);if(s){const i=s[1].split(", ").map(Number);n+=i[4]||0,o+=i[5]||0}}r=r.parentElement}return{y:t.top-o,x:t.left-n,width:t.width,height:t.height}}function oe(e){let t=e,n=0,o=0;for(;t;)n+=t.offsetTop,o+=t.offsetLeft,t=t.offsetParent;return{x:o,y:n,width:e.offsetWidth,height:e.offsetHeight}}function pe(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function tt(e){let t=e,n=0,o=0;for(;t;){const r=c=>{const s=getComputedStyle(c);return/(auto|scroll)/.test(s.overflow+s.overflowY+s.overflowX)};if(t===document.body){o+=window.scrollX,n+=window.scrollY;break}r(t)&&(o+=t.scrollLeft,n+=t.scrollTop),t=t.parentElement}return{x:o,y:n}}function re(e){let t="unread",n,o,r,c,s,i,u,g,h,f,m;function b(){n=e.currentTransform(),o=et(e.el()),r=tt(e.el()),m=ge(e.el()).map(({parent:l,children:R})=>({parent:{el:l,initialRect:Z(l.getBoundingClientRect())},children:R.filter(S=>S instanceof HTMLElement).map(S=>{const y=S;return y.originalBorderRadius||(y.originalBorderRadius=getComputedStyle(S).borderRadius),{el:S,borderRadius:ve(y.originalBorderRadius),initialRect:Z(S.getBoundingClientRect())}})})),t="readInitial"}function x(){if(t!=="readInitial")throw new Error("FlipView: Cannot read final values before reading initial values");h=e.layoutRect(),i=o.width/h.width,u=o.height/h.height,c=o.x-h.x-n.dragX+r.x,s=o.y-h.y-n.dragY+r.y,g=be(e.borderRadius(),i,u);const l=ge(e.el());m=m.map(({parent:S,children:y},a)=>{const p=l[a].parent;return{parent:{...S,el:p,finalRect:oe(p)},children:y.map((v,A)=>{const T=l[a].children[A];let L=oe(T);return T.hasAttribute("data-swapy-text")&&(L={...L,width:v.initialRect.width,height:v.initialRect.height}),{...v,el:T,finalRect:L}})}});const R={translateX:c,translateY:s,scaleX:i,scaleY:u};e.el().style.transformOrigin="0 0",e.el().style.borderRadius=J(g),e.setTransform(R),f=[],m.forEach(({parent:S,children:y})=>{const a=y.map(({el:p,initialRect:v,finalRect:A,borderRadius:T})=>nt(p,v,A,T,S.initialRect,S.finalRect));f.push(...a)}),t="readFinal"}function d(){if(t!=="readFinal")throw new Error("FlipView: Cannot get transition values before reading");return{from:{width:o.width,height:o.height,translate:D(c,s),scale:D(i,u),borderRadius:g},to:{width:h.width,height:h.height,translate:D(0,0),scale:D(1,1),borderRadius:e.borderRadius()}}}function I(){if(t!=="readFinal")throw new Error("FlipView: Cannot get children transition values before reading");return f}return{readInitial:b,readFinalAndReverse:x,transitionValues:d,childrenTransitionData:I}}function nt(e,t,n,o,r,c){e.style.transformOrigin="0 0";const s=r.width/c.width,i=r.height/c.height,u=t.width/n.width,g=t.height/n.height,h=be(o,u,g),f=t.x-r.x,m=n.x-c.x,b=t.y-r.y,x=n.y-c.y,d=(f-m*s)/s,I=(b-x*i)/i;return e.style.transform=`translate(${d}px, ${I}px) scale(${u/s}, ${g/i})`,e.style.borderRadius=J(h),{el:e,fromTranslate:D(d,I),fromScale:D(u,g),fromBorderRadius:h,toBorderRadius:o,parentScale:{x:s,y:i}}}function ge(e){const t=[];function n(o){const r=Array.from(o.children).filter(c=>c instanceof HTMLElement);r.length>0&&(t.push({parent:o,children:r}),r.forEach(c=>n(c)))}return n(e),t}function Se(e){const t=[];let n=e,o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1};const r=ve(window.getComputedStyle(n).borderRadius),c={el:()=>n,setTransform:s,clearTransform:i,currentTransform:()=>o,borderRadius:()=>r,layoutRect:()=>oe(n),boundingRect:()=>Z(n.getBoundingClientRect()),usePlugin:g,destroy:h,updateElement:f};function s(m){o={...o,...m},u()}function i(){o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1},u()}function u(){const{dragX:m,dragY:b,translateX:x,translateY:d,scaleX:I,scaleY:l}=o;m===0&&b===0&&x===0&&d===0&&I===1&&l===1?n.style.transform="":n.style.transform=`translate(${m+x}px, ${b+d}px) scale(${I}, ${l})`}function g(m,b){const x=m(c,b);return t.push(x),x}function h(){t.forEach(m=>m.destroy())}function f(m){if(!m)return;const b=n.hasAttribute("data-swapy-dragging"),x=n.style.cssText;n=m,b&&n.setAttribute("data-swapy-dragging",""),n.style.cssText=x,t.forEach(d=>d.onElementUpdate())}return c}const ot={animation:"dynamic",enabled:!0,swapMode:"hover",dragOnHold:!1,autoScrollOnDrag:!1,dragAxis:"both",manualSwap:!1};function Ee(e){switch(e){case"dynamic":return{easing:Je,duration:300};case"spring":return{easing:Ke,duration:350};case"none":return{easing:t=>t,duration:1}}}function rt(e,t){const n={...ot,...t},o=it({slots:[],items:[],config:n});let r=[],c=[];s();function s(){if(!ct(e))throw new Error("Cannot create a Swapy instance because your HTML structure is invalid. Fix all above errors and then try!");r=Array.from(e.querySelectorAll("[data-swapy-slot]")).map(l=>at(l,o)),o.setSlots(r),c=Array.from(e.querySelectorAll("[data-swapy-item]")).map(l=>lt(l,o)),o.setItems(c),o.syncSlotItemMap(),c.forEach(l=>{l.onDrag(({pointerX:R,pointerY:S})=>{u();let y=!1;r.forEach(a=>{const p=a.rect();pe({x:R,y:S},p)&&(y=!0,a.isHighlighted()||a.highlight())}),!y&&o.config().swapMode==="drop"&&l.slot().highlight(),n.swapMode==="hover"&&i(l,{pointerX:R,pointerY:S})}),l.onDrop(({pointerX:R,pointerY:S})=>{g(),n.swapMode==="drop"&&i(l,{pointerX:R,pointerY:S})}),l.onHold(()=>{u()}),l.onRelease(()=>{g()})})}function i(l,{pointerX:R,pointerY:S}){r.forEach(y=>{const a=y.rect();if(pe({x:R,y:S},a)){if(l.id()===y.itemId())return;o.config().swapMode==="hover"&&l.setContinuousDrag(!0);const p=l.slot(),v=y.item();if(!o.eventHandlers().onBeforeSwap({fromSlot:p.id(),toSlot:y.id(),draggingItem:l.id(),swapWithItem:(v==null?void 0:v.id())||""}))return;if(o.config().manualSwap){const A=structuredClone(o.slotItemMap());o.swapItems(l,y);const T=o.slotItemMap(),L=re(l.view());L.readInitial();const C=v?re(v.view()):null;C==null||C.readInitial();let $=0,F=0;const B=ae(l.view().el());B instanceof Window?($=B.scrollY,F=B.scrollX):($=B.scrollTop,F=B.scrollLeft),o.eventHandlers().onSwap({oldSlotItemMap:A,newSlotItemMap:T,fromSlot:p.id(),toSlot:y.id(),draggingItem:l.id(),swappedWithItem:(v==null?void 0:v.id())||""}),requestAnimationFrame(()=>{const q=e.querySelectorAll("[data-swapy-item]");o.items().forEach(w=>{const z=Array.from(q).find(Y=>Y.dataset.swapyItem===w.id());w.view().updateElement(z)}),o.syncSlotItemMap(),L.readFinalAndReverse(),C==null||C.readFinalAndReverse(),ie(l,L),v&&C&&ie(v,C),B.scrollTo({left:F,top:$})})}else{let A=0,T=0;const L=ae(l.view().el());L instanceof Window?(A=L.scrollY,T=L.scrollX):(A=L.scrollTop,T=L.scrollLeft),ye(l,y,!0),v&&ye(v,p),L.scrollTo({left:T,top:A});const C=o.slotItemMap();o.syncSlotItemMap();const $=o.slotItemMap();o.eventHandlers().onSwap({oldSlotItemMap:C,newSlotItemMap:$,fromSlot:p.id(),toSlot:y.id(),draggingItem:l.id(),swappedWithItem:(v==null?void 0:v.id())||""})}}})}function u(){e.querySelectorAll("img").forEach(l=>{l.style.pointerEvents="none"}),e.style.userSelect="none",e.style.webkitUserSelect="none"}function g(){e.querySelectorAll("img").forEach(l=>{l.style.pointerEvents=""}),e.style.userSelect="",e.style.webkitUserSelect=""}function h(l){o.config().enabled=l}function f(l){o.eventHandlers().onSwapStart=l}function m(l){o.eventHandlers().onSwap=l}function b(l){o.eventHandlers().onSwapEnd=l}function x(l){o.eventHandlers().onBeforeSwap=l}function d(){I(),requestAnimationFrame(()=>{s()})}function I(){c.forEach(l=>l.destroy()),r.forEach(l=>l.destroy()),o.destroy(),c=[],r=[]}return{enable:h,slotItemMap:()=>o.slotItemMap(),onSwapStart:f,onSwap:m,onSwapEnd:b,onBeforeSwap:x,update:d,destroy:I}}function it({slots:e,items:t,config:n}){const o={slots:e,items:t,config:n,slotItemMap:{asObject:{},asMap:new Map,asArray:[]},zIndexCount:1,eventHandlers:{onSwapStart:()=>{},onSwap:()=>{},onSwapEnd:()=>{},onBeforeSwap:()=>!0},scrollOffsetWhileDragging:{x:0,y:0},scrollHandler:null};let r={...o};const c=f=>{var m;(m=r.scrollHandler)==null||m.call(r,f)};window.addEventListener("scroll",c);function s(f){return r.slots.find(m=>m.id()===f)}function i(f){return r.items.find(m=>m.id()===f)}function u(){const f={},m=new Map,b=[];r.slots.forEach(x=>{var d;const I=x.id(),l=((d=x.item())==null?void 0:d.id())||"";f[I]=l,m.set(I,l),b.push({slot:I,item:l})}),r.slotItemMap={asObject:f,asMap:m,asArray:b}}function g(f,m){var b;const x=r.slotItemMap,d=f.id(),I=((b=m.item())==null?void 0:b.id())||"",l=m.id(),R=f.slot().id();x.asObject[l]=d,x.asObject[R]=I,x.asMap.set(l,d),x.asMap.set(R,I);const S=x.asArray.findIndex(a=>a.slot===l),y=x.asArray.findIndex(a=>a.slot===R);x.asArray[S].item=d,x.asArray[y].item=I}function h(){window.removeEventListener("scroll",c),r={...o}}return{slots:()=>r.slots,items:()=>r.items,config:()=>n,setItems:f=>r.items=f,setSlots:f=>r.slots=f,slotById:s,itemById:i,zIndex:(f=!1)=>f?++r.zIndexCount:r.zIndexCount,resetZIndex:()=>{r.zIndexCount=1},eventHandlers:()=>r.eventHandlers,syncSlotItemMap:u,slotItemMap:(f=!1)=>f?structuredClone(r.slotItemMap):r.slotItemMap,onScroll:f=>{r.scrollHandler=f},swapItems:g,destroy:h}}function at(e,t){const n=Se(e);function o(){return n.el().dataset.swapySlot}function r(){const h=n.el().children[0];return(h==null?void 0:h.dataset.swapyItem)||null}function c(){return Z(n.el().getBoundingClientRect())}function s(){const h=n.el().children[0];if(h)return t.itemById(h.dataset.swapyItem)}function i(){t.slots().forEach(h=>{h.view().el().removeAttribute("data-swapy-highlighted")})}function u(){i(),n.el().setAttribute("data-swapy-highlighted","")}function g(){}return{id:o,view:()=>n,itemId:r,rect:c,item:s,highlight:u,unhighlightAllSlots:i,isHighlighted:()=>n.el().hasAttribute("data-swapy-highlighted"),destroy:g}}function lt(e,t){const n=Se(e),o={};let r=null,c=null,s=!1,i=!0,u;const g=st();let h=()=>{},f=()=>{},m=()=>{},b=()=>{};const{onDrag:x,onDrop:d,onHold:I,onRelease:l}=n.usePlugin(Qe,{startDelay:t.config().dragOnHold?400:0,targetEl:F()}),R=D(0,0),S=D(0,0),y=D(0,0),a=D(0,0);let p=null,v=null;I(M=>{t.config().enabled&&(q()&&!B(M.el)||Y()&&z(M.el)||m==null||m(M))}),l(M=>{t.config().enabled&&(q()&&!B(M.el)||Y()&&z(M.el)||b==null||b(M))});function A(M){var X;_(),te().highlight(),(X=o.drop)==null||X.call(o);const j=t.slots().map(N=>N.view().boundingRect());t.slots().forEach((N,k)=>{const O=j[k];N.view().el().style.width=`${O.width}px`,N.view().el().style.maxWidth=`${O.width}px`,N.view().el().style.flexShrink="0",N.view().el().style.height=`${O.height}px`});const W=t.slotItemMap(!0);t.eventHandlers().onSwapStart({draggingItem:le(),fromSlot:se(),slotItemMap:W}),c=W,n.el().style.position="relative",n.el().style.zIndex=`${t.zIndex(!0)}`,p=ae(M.el),t.config().autoScrollOnDrag&&(r=ut(p,t.config().dragAxis),r.updatePointer({x:M.pointerX,y:M.pointerY})),R.x=window.scrollX,R.y=window.scrollY,y.x=0,y.y=0,p instanceof HTMLElement&&(S.x=p.scrollLeft,S.y=p.scrollTop,v=()=>{a.x=p.scrollLeft-S.x,a.y=p.scrollTop-S.y,n.setTransform({dragX:((u==null?void 0:u.width)||0)+y.x+a.x,dragY:((u==null?void 0:u.height)||0)+y.y+a.y})},p.addEventListener("scroll",v)),t.onScroll(()=>{y.x=window.scrollX-R.x,y.y=window.scrollY-R.y;const N=a.x||0,k=a.y||0;n.setTransform({dragX:((u==null?void 0:u.width)||0)+y.x+N,dragY:((u==null?void 0:u.height)||0)+y.y+k})})}x(M=>{var X;if(t.config().enabled){if(!s){if(q()&&!B(M.el)||Y()&&z(M.el))return;A(M)}s=!0,r&&r.updatePointer({x:M.pointerX,y:M.pointerY}),u=M,(X=o.drop)==null||X.call(o),g(()=>{n.el().style.position="relative";const j=M.width+y.x+a.x,W=M.height+y.y+a.y;t.config().dragAxis==="y"?n.setTransform({dragY:W}):t.config().dragAxis==="x"?n.setTransform({dragX:j}):n.setTransform({dragX:j,dragY:W}),h==null||h(M)})}}),d(M=>{if(!s)return;ee(),s=!1,i=!1,u=null,p&&(p.removeEventListener("scroll",v),v=null),p=null,a.x=0,a.y=0,y.x=0,y.y=0,r&&(r.destroy(),r=null),te().unhighlightAllSlots(),f==null||f(M),t.eventHandlers().onSwapEnd({slotItemMap:t.slotItemMap(),hasChanged:c!=null&&c.asMap?!dt(c==null?void 0:c.asMap,t.slotItemMap().asMap):!1}),c=null,t.onScroll(null),t.slots().forEach(j=>{j.view().el().style.width="",j.view().el().style.maxWidth="",j.view().el().style.flexShrink="",j.view().el().style.height=""}),t.config().manualSwap&&t.config().swapMode==="drop"?requestAnimationFrame(X):X();function X(){const j=n.currentTransform(),W=j.dragX+j.translateX,N=j.dragY+j.translateY;o.drop=Me({translate:D(W,N)},{translate:D(0,0)},({translate:k},O)=>{O?s||(n.clearTransform(),n.el().style.transformOrigin=""):n.setTransform({dragX:0,dragY:0,translateX:k.x,translateY:k.y}),O&&(t.items().forEach(ce=>{ce.isDragging()||(ce.view().el().style.zIndex="")}),t.resetZIndex(),n.el().style.position="",i=!0)},Ee(t.config().animation))}});function T(M){h=M}function L(M){f=M}function C(M){m=M}function $(M){b=M}function F(){return n.el().querySelector("[data-swapy-handle]")}function B(M){const X=F();return X?X===M||X.contains(M):!1}function q(){return F()!==null}function w(){return Array.from(n.el().querySelectorAll("[data-swapy-no-drag]"))}function z(M){const X=w();return!X||X.length===0?!1:X.includes(M)||X.some(j=>j.contains(M))}function Y(){return w().length>0}function _(){n.el().setAttribute("data-swapy-dragging","")}function ee(){n.el().removeAttribute("data-swapy-dragging")}function Ie(){h=null,f=null,m=null,b=null,u=null,c=null,r&&(r.destroy(),r=null),p&&v&&p.removeEventListener("scroll",v),n.destroy()}function le(){return n.el().dataset.swapyItem}function te(){return t.slotById(n.el().parentElement.dataset.swapySlot)}function se(){return n.el().parentElement.dataset.swapySlot}return{id:le,view:()=>n,slot:te,slotId:se,onDrag:T,onDrop:L,onHold:C,onRelease:$,destroy:Ie,isDragging:()=>s,cancelAnimation:()=>o,dragEvent:()=>u,store:()=>t,continuousDrag:()=>i,setContinuousDrag:M=>i=M}}function ye(e,t,n=!1){if(n){const r=t.item();r&&(t.view().el().style.position="relative",r.view().el().style.position="absolute")}else{const r=e.slot();r.view().el().style.position="",e.view().el().style.position=""}if(!e)return;const o=re(e.view());o.readInitial(),t.view().el().appendChild(e.view().el()),o.readFinalAndReverse(),ie(e,o)}function st(){let e=!1;return t=>{e||(e=!0,requestAnimationFrame(()=>{t(),e=!1}))}}function ie(e,t){var n,o,r,c;(o=(n=e.cancelAnimation()).moveToSlot)==null||o.call(n),(c=(r=e.cancelAnimation()).drop)==null||c.call(r);const s=Ee(e.store().config().animation),i=t.transitionValues();let u=e.view().currentTransform(),g=0,h=!1;e.cancelAnimation().moveToSlot=Me({translate:i.from.translate,scale:i.from.scale,borderRadius:i.from.borderRadius},{translate:i.to.translate,scale:i.to.scale,borderRadius:i.to.borderRadius},({translate:f,scale:m,borderRadius:b},x,d)=>{if(e.isDragging()){g!==0&&(h=!0);const l=e.dragEvent().relativeX,R=e.dragEvent().relativeY;e.continuousDrag()?e.view().setTransform({translateX:H(u.translateX,u.translateX+(i.from.width-i.to.width)*l,s.easing(d-g)),translateY:H(u.translateY,u.translateY+(i.from.height-i.to.height)*R,s.easing(d-g)),scaleX:m.x,scaleY:m.y}):e.view().setTransform({scaleX:m.x,scaleY:m.y})}else u=e.view().currentTransform(),g=d,h?e.view().setTransform({scaleX:m.x,scaleY:m.y}):e.view().setTransform({dragX:0,dragY:0,translateX:f.x,translateY:f.y,scaleX:m.x,scaleY:m.y});const I=t.childrenTransitionData();I.forEach(({el:l,fromTranslate:R,fromScale:S,fromBorderRadius:y,toBorderRadius:a,parentScale:p})=>{const v=H(p.x,1,s.easing(d)),A=H(p.y,1,s.easing(d));l.style.transform=`translate(${R.x+(0-R.x/v)*s.easing(d)}px, ${R.y+(0-R.y/A)*s.easing(d)}px) scale(${H(S.x/v,1/v,s.easing(d))}, ${H(S.y/A,1/A,s.easing(d))})`,me(y)||(l.style.borderRadius=J(Re(y,a,s.easing(d))))}),me(b)||(e.view().el().style.borderRadius=J(b)),x&&(e.isDragging()||(e.view().el().style.transformOrigin="",e.view().clearTransform()),e.view().el().style.borderRadius="",I.forEach(({el:l})=>{l.style.transform="",l.style.transformOrigin="",l.style.borderRadius=""}))},s)}function V(...e){console.error("Swapy Error:",...e)}function ct(e){const t=e;let n=!0;const o=t.querySelectorAll("[data-swapy-slot]");t||(V("container passed to createSwapy() is undefined or null"),n=!1),o.forEach(i=>{const u=i,g=u.dataset.swapySlot,h=u.children,f=h[0];(!g||g.length===0)&&(V(u,"does not contain a slotId using data-swapy-slot"),n=!1),h.length>1&&(V("slot:",`"${g}"`,"cannot contain more than one element"),n=!1),f&&(!f.dataset.swapyItem||f.dataset.swapyItem.length===0)&&(V("slot",`"${g}"`,"does not contain an element with an item id using data-swapy-item"),n=!1)});const r=Array.from(o).map(i=>i.dataset.swapySlot),c=t.querySelectorAll("[data-swapy-item]"),s=Array.from(c).map(i=>i.dataset.swapyItem);if(we(r)){const i=xe(r);V("your container has duplicate slot ids",`(${i.join(", ")})`),n=!1}if(we(s)){const i=xe(s);V("your container has duplicate item ids",`(${i.join(", ")})`),n=!1}return n}function we(e){return new Set(e).size!==e.length}function xe(e){const t=new Set,n=new Set;for(const o of e)t.has(o)?n.add(o):t.add(o);return Array.from(n)}function dt(e,t){if(e.size!==t.size)return!1;for(const[n,o]of e)if(t.get(n)!==o)return!1;return!0}function ae(e){let t=e;for(;t;){const n=window.getComputedStyle(t),o=n.overflowY,r=n.overflowX;if((o==="auto"||o==="scroll")&&t.scrollHeight>t.clientHeight||(r==="auto"||r==="scroll")&&t.scrollWidth>t.clientWidth)return t;t=t.parentElement}return window}function ut(e,t){let n=!1,o,r=0,c=0,s=0,i=0,u=0,g=0,h=null;e instanceof HTMLElement?(o=Z(e.getBoundingClientRect()),r=e.scrollHeight-o.height,c=e.scrollWidth-o.width):(o={x:0,y:0,width:window.innerWidth,height:window.innerHeight},r=document.documentElement.scrollHeight-window.innerHeight,c=document.documentElement.scrollWidth-window.innerWidth);function f(){e instanceof HTMLElement?(s=e.scrollTop,i=e.scrollLeft):(s=window.scrollY,i=window.scrollX)}function m(d){n=!1;const I=o.y,l=o.y+o.height,R=o.x,S=o.x+o.width,y=Math.abs(I-d.y)<Math.abs(l-d.y),a=Math.abs(R-d.x)<Math.abs(S-d.x);if(f(),t!=="x")if(y){const p=I-d.y;if(p>=-100){const v=G(p,-100,0);u=-K(-100,0,0,5,v),n=!0}}else{const p=l-d.y;if(p<=100){const v=G(p,0,100);u=K(100,0,0,5,v),n=!0}}if(t!=="y")if(a){const p=R-d.x;if(p>=-100){const v=G(p,-100,0);g=-K(-100,0,0,5,v),n=!0}}else{const p=S-d.x;if(p<=100){const v=G(p,0,100);g=K(100,0,0,5,v),n=!0}}n&&(h&&cancelAnimationFrame(h),b())}function b(){f(),t!=="x"&&(u=s+u>=r?0:u),t!=="y"&&(g=i+g>=c?0:g),e.scrollBy({top:u,left:g}),n&&(h=requestAnimationFrame(b))}function x(){n=!1}return{updatePointer:m,destroy:x}}const yt=()=>{const e=Le(),{t}=Ae(),n=Te(),o=P.useRef(null),r=P.useRef(null),[c,s]=P.useState(["members","active","points","newMembers","inactive"]),{data:i,isLoading:u,error:g}=De({queryKey:["users","members"],queryFn:async()=>{const a=await $e(Fe.Member);if(!a.isSuccess||!a.data)throw new Error(a.message||"Failed to fetch members");return a.data}}),h=(i==null?void 0:i.length)||0,f=(i==null?void 0:i.filter(a=>a.status===1).length)||0,m=new Date,b=(i==null?void 0:i.filter(a=>{const p=new Date(a.joinDate);return(m.getTime()-p.getTime())/(1e3*60*60*24)<=30}).length)||0,x=(i==null?void 0:i.filter(a=>a.gender===1).length)||0,d=(i==null?void 0:i.filter(a=>a.gender===2).length)||0,I=h?h-f:0,l=(i==null?void 0:i.reduce((a,p)=>a+(p.point||0),0))||0,R={members:{id:"members",title:t("common.stats.total_members")||"Total Members",value:h,icon:E.jsx(We,{sx:{fontSize:40}}),color:"#4051B5"},active:{id:"active",title:t("common.stats.active_members")||"Active Members",value:f,icon:E.jsx(ne,{sx:{fontSize:40}}),color:"#4CAF50"},newMembers:{id:"newMembers",title:t("common.stats.new_members_in30days")||"New Members",value:b,icon:E.jsx(Ne,{sx:{fontSize:40}}),color:"#4DA1A9"},maleMembers:{id:"maleMembers",title:t("common.stats.male_members")||"Male Members",value:x,icon:E.jsx(ne,{sx:{fontSize:40}}),color:"#4CAF50"},femaleMembers:{id:"femaleMembers",title:t("common.stats.female_members")||"Female Members",value:d,icon:E.jsx(ne,{sx:{fontSize:40}}),color:"#4CAF50"},inactive:{id:"inactive",title:t("common.stats.inactive_members")||"Inactive Members",value:I,icon:E.jsx(qe,{sx:{fontSize:40}}),color:"#E50046"},points:{id:"points",title:t("common.stats.total_points")||"Total Points",value:l.toLocaleString(),icon:E.jsx(_e,{sx:{fontSize:40}}),color:"#FF9800"}};P.useEffect(()=>{g&&Xe.error(g instanceof Error?g.message:"Failed to load members")},[g,n]),P.useEffect(()=>{let a;return r.current&&(a=setTimeout(()=>{try{o.current=rt(r.current,{animation:"spring",swapMode:"drop",autoScrollOnDrag:!0,enabled:!0,dragAxis:"both",dragOnHold:!1}),o.current.onSwap(p=>{console.log("Swap occurred:",p);const{fromSlot:v,toSlot:A}=p;s(T=>{const L=[...T],C=T.findIndex(F=>F===v),$=T.findIndex(F=>F===A);return C!==-1&&$!==-1&&([L[C],L[$]]=[L[$],L[C]]),L})})}catch(p){console.error("Swapy initialization error:",p)}},100)),()=>{if(clearTimeout(a),o.current)try{o.current.destroy()}catch(p){console.error("Error destroying Swapy:",p)}}},[]);const S=a=>e(`/admin/ql-thanh-vien/${a}`),y=P.useMemo(()=>[{field:"userName",headerName:t("common.table_header.user.username")||"Username",width:200,renderCell:a=>E.jsxs(U,{sx:{display:"flex",alignItems:"center",gap:2},children:[E.jsx(Ce,{src:a.row.avatar||"/default-avatar.png",alt:a.row.fullName}),E.jsx("span",{children:a.row.userName})]})},{field:"fullName",headerName:t("common.table_header.user.fullname")||"Full Name",width:180},{field:"email",headerName:t("common.table_header.user.email")||"Email",width:220},{field:"phoneNumber",headerName:t("common.table_header.user.phone")||"Phone",width:150},{field:"idCard",headerName:t("common.table_header.user.id_card")||"Id Card",width:200,align:"left",renderCell:a=>a.row.idCard===""?"N/A":a.row.idCard},{field:"gender",headerName:t("common.table_header.user.gender")||"Gender",width:130,renderCell:a=>E.jsx(de,{label:a.row.gender===0?"Male":"Female",color:a.row.gender===0?"info":"secondary",sx:{fontWeight:"bold",borderRadius:"16px",minWidth:"80px",minHeight:"30px"}})},{field:"status",headerName:t("common.table_header.user.status")||"Status",align:"center",width:120,renderCell:a=>E.jsx(de,{label:a.row.status===1?"Active":"Inactive",color:a.row.status===1?"success":"error",sx:{fontWeight:"bold",borderRadius:"16px",minWidth:"80px",minHeight:"30px"}})},{field:"point",headerName:t("common.table_header.user.points")||"Points",width:130,type:"number",align:"center"},{field:"actions",headerName:t("common.table_header.actions")||"Actions",type:"actions",width:100,getActions:a=>[E.jsx(ze,{icon:E.jsx(Ye,{}),label:"Edit",onClick:()=>S(a.row.userId)})]}],[t]);return E.jsx(Be,{children:E.jsxs(U,{sx:{width:"100%","& .MuiDataGrid-root":{border:"none",backgroundColor:"white",borderRadius:2,boxShadow:1,"& .MuiDataGrid-columnHeaders":{backgroundColor:"primary.main",color:"black",fontWeight:"bold"},"& .MuiDataGrid-cell":{borderBottom:"1px solid #f0f0f0"},"& .MuiDataGrid-row:hover":{backgroundColor:"#f5f5f5"}}},children:[E.jsx("div",{ref:r,className:"swapy-container",style:{marginBottom:"1.5rem"},children:c.map(a=>E.jsx("div",{className:"swapy-slot","data-swapy-slot":a,style:{margin:"8px",flex:"1 1 250px",minWidth:"250px",display:"inline-block"},children:E.jsx("div",{className:"swapy-item","data-swapy-item":a,style:{cursor:"grab"},children:E.jsxs(je,{elevation:3,sx:{p:3,borderRadius:2,height:"100%",borderLeft:`5px solid ${R[a].color}`,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:"0 10px 20px rgba(0,0,0,0.15)"}},children:[E.jsxs(U,{children:[E.jsx(ue,{variant:"h6",fontWeight:"bold",children:R[a].title}),E.jsx(ue,{variant:"h4",fontWeight:"bold",mt:1,children:R[a].value})]}),E.jsx(U,{sx:{backgroundColor:`${R[a].color}20`,p:2,ml:2,borderRadius:"50%",color:R[a].color,display:"flex",alignItems:"center",justifyContent:"center"},children:R[a].icon})]})})},a))}),E.jsx(U,{sx:{backgroundColor:"white",borderRadius:2,boxShadow:1,p:2,mb:4},children:E.jsx(He,{rows:i||[],columns:y,loading:u,getRowId:a=>a.userId,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5,10,25],disableRowSelectionOnClick:!0,autoHeight:!0})})]})})};export{yt as default};
