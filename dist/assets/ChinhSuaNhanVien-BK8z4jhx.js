import{a0 as L,u as N,r as s,j as e,L as U,C as W,B as r,T as x,l,h as V,b as u,o as f}from"./index-D08WwhE9.js";import{u as D}from"./useQuery-BzXUVCug.js";import{a as S}from"./user.apis-BtvizS59.js";import{M as E}from"./ManagementPageLayout-B4VkQ5br.js";import{F as w}from"./FileUploadOutlined-u9VqCWQd.js";import{R as M,a as p}from"./RadioGroup-CYLatu-A.js";const G=()=>{const{id:m}=L(),g=N(),{data:a=null,isLoading:j,error:y}=D({queryKey:["employeeDetail",m],queryFn:async()=>{const t=await S(m);if(!t.isSuccess||!t.data)throw new Error(t.message||"Failed to fetch employee data");return t.data}}),[n,i]=s.useState(null),[v,c]=s.useState(null),d=s.useRef(null);if(s.useEffect(()=>{a&&a.avatar&&i(a.avatar)},[a]),s.useEffect(()=>{n&&console.log("Image URL updated:",n)},[n]),j)return e.jsx(U,{});if(y)return e.jsx("div",{children:"Failed to fetch data"});if(!a)return e.jsx("div",{children:"No employee data found"});const b=t=>{var h;const o=(h=t.target.files)==null?void 0:h[0];if(o){console.log(o);const R=URL.createObjectURL(o);i(R),c(o)}t.target.value=""},C=t=>{i(t.target.value)},F=()=>{i(null),c(null),d.current&&(d.current.value="")},I=()=>{console.log("Image to save:",v||n)};return e.jsx(E,{children:e.jsx(W,{maxWidth:"md",children:e.jsxs(r,{sx:{py:4},children:[e.jsx(x,{variant:"h4",component:"h1",sx:{mb:4},children:"Chỉnh sửa thông tin nhân viên"}),e.jsxs(r,{sx:{mb:2},children:[e.jsx(l,{fullWidth:!0,margin:"normal",label:"Hình ảnh",variant:"standard",value:n||"",onChange:C,InputProps:{endAdornment:e.jsxs(V,{component:"label",children:[e.jsx(w,{}),e.jsx("input",{ref:d,style:{display:"none"},type:"file",accept:"image/*",hidden:!0,onChange:b,name:"[licenseFile]"})]})}}),n&&e.jsxs(r,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(r,{component:"img",src:n,alt:"Preview",sx:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px",mt:1}}),e.jsx(u,{size:"small",color:"error",onClick:F,sx:{mt:1},children:"Xóa hình"})]})]}),e.jsx(l,{label:"Tài khoản",variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.userName}),e.jsx(l,{label:"Họ tên",variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.fullName}),e.jsx(l,{label:"Ngày sinh",variant:"standard",fullWidth:!0,margin:"normal",type:"date",defaultValue:a.birthDate,InputLabelProps:{style:{top:"-1.5rem"}}}),e.jsxs(r,{sx:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-start",my:2},children:[e.jsx(x,{children:"Giới tính"}),e.jsxs(M,{defaultValue:a.gender||"Male",sx:{display:"flex",gap:10,flexDirection:"row"},children:[e.jsx(f,{value:"Male",control:e.jsx(p,{}),label:"Nam"}),e.jsx(f,{value:"Female",control:e.jsx(p,{}),label:"Nữ"})]})]}),e.jsx(l,{label:"Email",variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.email}),e.jsx(l,{label:"Số CMND",variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.idCard}),e.jsx(l,{label:"Số điện thoại",variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.phoneNumber}),e.jsx(l,{label:"Địa chỉ",variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.address}),e.jsxs(r,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(u,{onClick:()=>{g(-1)},color:"error",variant:"contained",children:"Quay lại"}),e.jsx(u,{onClick:I,color:"primary",variant:"contained",children:"Lưu thay đổi"})]})]})})})};export{G as default};
