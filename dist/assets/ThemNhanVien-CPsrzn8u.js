import{r as v,ak as a,j as r,C as T,B as h,l,h as x,m as D,T as A,o as f,as as S,b as y,e as W,V as b}from"./index-CmSrV0e4.js";import{u as R}from"./formik.esm-CkzD0KZF.js";import{c as V,a as o,e as $,b as k,d as E}from"./index.esm-2sCcRg73.js";import{M as I}from"./ManagementPageLayout-CDsNXoK3.js";import{F as U}from"./FileUploadOutlined-CoZWXJUc.js";import{V as M,a as L}from"./VisibilityOff-Dxz7Spvx.js";import{R as O,a as _}from"./RadioGroup-BQFM482Z.js";const G=/(84|0[3|5|7|8|9])+([0-9]{8})\b/,z=/^[0-9]{9,12}$/,ee=()=>{const i="https://api.dicebear.com/9.x/adventurer/svg?seed=Katherine",[p,m]=v.useState(i),[C,u]=v.useState(!1),[g,j]=v.useState(!1),e=R({initialValues:{avatar:null,userName:"",password:"",confirmPassword:"",fullName:"",birthDate:"",gender:0,email:"",idCard:"",phoneNumber:"",address:""},validationSchema:V({userName:o().min(5,a("admin.employee_management.validation.min_username")).max(20,a("admin.employee_management.validation.max_username")).required(a("admin.employee_management.validation.required_username")),password:o().min(8,a("admin.employee_management.validation.min_password")).matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,a("admin.employee_management.validation.match_password")).required(a("admin.employee_management.validation.required_password")),confirmPassword:o().oneOf([E("password")],a("admin.employee_management.validation.confirm_match")).required(a("admin.employee_management.validation.confirm_required")),fullName:o().required(a("admin.employee_management.validation.required_fullname")),birthDate:k().max(new Date,a("admin.employee_management.validation.birthdate_valid")).required(a("admin.employee_management.validation.birthdate_required")),gender:$().required(a("admin.employee_management.validation.gender_required")),email:o().email(a("admin.employee_management.validation.email_invalid")).required(a("admin.employee_management.validation.email_required")),idCard:o().matches(z,a("admin.employee_management.validation.id_card_valid")).required(a("admin.employee_management.validation.id_card_required")),phoneNumber:o().matches(G,a("admin.employee_management.validation.phone_invalid")).required(a("admin.employee_management.validation.phone_required")),address:o().required(a("admin.employee_management.validation.address_required"))}),onSubmit:async t=>{const{confirmPassword:n,...c}=t,d={...c,avatar:C?p:null};console.log("Form submitted with values:",d);try{const s=await W.post("/auth/register",d);if(console.log(`Response: ${JSON.stringify(s.data,null,2)}`),s.status===200)b.success(a("toast.success.employee.create"));else{const F=s.data;throw new Error(F.reason||a("toast.error.employee.create"))}}catch(s){console.log(`Error: ${s}`),b.error(a("toast.error.employee.create"))}}}),w=t=>{var c;const n=(c=t.target.files)==null?void 0:c[0];if(n){e.setFieldValue("avatar",n);const d=new FileReader;d.onload=()=>{const s=d.result;m(s),u(!0)},d.readAsDataURL(n)}t.target.value=""},B=t=>{const n=t.target.value;n?(m(n),u(!0)):(m(i),u(!1))},N=()=>{e.resetForm(),m(i),u(!1)},q=t=>{const n=t.target.value==="Male"?0:1;e.setFieldValue("gender",n)},P=()=>{j(!g)};return r.jsx(I,{children:r.jsx(T,{maxWidth:"lg",children:r.jsxs(h,{component:"form",onSubmit:e.handleSubmit,sx:{mt:2},children:[r.jsxs(h,{sx:{mb:2},children:[r.jsx(l,{fullWidth:!0,margin:"normal",label:a("admin.employee_management.detail.image"),variant:"standard",type:"text",value:p,onChange:B,InputProps:{endAdornment:r.jsxs(x,{component:"label",children:[r.jsx(U,{}),r.jsx("input",{style:{display:"none"},type:"file",accept:"image/*",hidden:!0,onChange:w})]})}}),r.jsx(h,{sx:{mt:1,display:"flex",justifyContent:"center"},children:r.jsx("img",{src:p,alt:"Avatar preview",style:{height:"100px",width:"100px",objectFit:"cover",borderRadius:"50%",border:"1px solid #eee"},onError:t=>{const n=t.target;n.src=i,m(i),u(!1)}})})]}),r.jsx(l,{name:"userName",label:a("admin.employee_management.detail.account"),variant:"standard",fullWidth:!0,margin:"normal",value:e.values.userName,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.userName&&!!e.errors.userName,helperText:e.touched.userName&&e.errors.userName}),r.jsx(l,{name:"password",label:a("admin.employee_management.detail.password"),variant:"standard",fullWidth:!0,margin:"normal",type:g?"text":"password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,InputProps:{endAdornment:r.jsx(D,{position:"end",sx:{mr:1},children:r.jsx(x,{onClick:P,edge:"end",sx:{"&:hover":{backgroundColor:"rgba(230, 195, 0, 0.1)"}},children:g?r.jsx(M,{sx:{color:"#666"}}):r.jsx(L,{sx:{color:"#666"}})})})}}),r.jsx(l,{name:"confirmPassword",label:a("admin.employee_managemet.detail.password_confirm"),variant:"standard",fullWidth:!0,margin:"normal",type:"password",value:e.values.confirmPassword,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.confirmPassword&&!!e.errors.confirmPassword,helperText:e.touched.confirmPassword&&e.errors.confirmPassword}),r.jsx(l,{name:"fullName",label:a("admin.employee_managemet.detail.fullname"),variant:"standard",fullWidth:!0,margin:"normal",value:e.values.fullName,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.fullName&&!!e.errors.fullName,helperText:e.touched.fullName&&e.errors.fullName}),r.jsx(l,{name:"birthDate",label:a("admin.employee_managemet.detail.birthday"),variant:"standard",fullWidth:!0,margin:"normal",type:"date",value:e.values.birthDate,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.birthDate&&!!e.errors.birthDate,helperText:e.touched.birthDate&&e.errors.birthDate,InputLabelProps:{shrink:!0}}),r.jsxs(h,{sx:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-start",my:2},children:[r.jsx(A,{children:a("admin.employee_managemet.detail.gender")}),r.jsxs(O,{name:"gender",value:e.values.gender===0?"Male":"Female",onChange:q,sx:{display:"flex",gap:10,flexDirection:"row"},children:[r.jsx(f,{value:"Male",control:r.jsx(_,{}),label:"Nam"}),r.jsx(f,{value:"Female",control:r.jsx(_,{}),label:"Ná»¯"})]}),e.touched.gender&&e.errors.gender&&r.jsx(S,{error:!0,children:e.errors.gender})]}),r.jsx(l,{name:"email",label:"Email",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email}),r.jsx(l,{name:"idCard",label:a("admin.employee_managemet.detail.id_card"),variant:"standard",fullWidth:!0,margin:"normal",value:e.values.idCard,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.idCard&&!!e.errors.idCard,helperText:e.touched.idCard&&e.errors.idCard}),r.jsx(l,{name:"phoneNumber",label:a("admin.employee_managemet.detail.phone"),variant:"standard",fullWidth:!0,margin:"normal",value:e.values.phoneNumber,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.phoneNumber&&!!e.errors.phoneNumber,helperText:e.touched.phoneNumber&&e.errors.phoneNumber}),r.jsx(l,{name:"address",label:a("admin.employee_managemet.detail.address"),variant:"standard",fullWidth:!0,margin:"normal",value:e.values.address,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.address&&!!e.errors.address,helperText:e.touched.address&&e.errors.address}),r.jsxs(h,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[r.jsx(y,{onClick:N,color:"error",variant:"contained",type:"button",children:a("admin.employee_management.cancel")}),r.jsx(y,{color:"primary",variant:"contained",type:"submit",disabled:e.isSubmitting,children:a("admin.employee_management.save")})]})]})})})};export{ee as default};
