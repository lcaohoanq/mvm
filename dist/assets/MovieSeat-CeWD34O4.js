import{r as b,j as e,B as t,T as o,b as v,a0 as C,az as I,u as k,V as w}from"./index-DZtaYlZS.js";import{E as c}from"./EventSeat-Dnk4FO-L.js";import{S as y}from"./StepTracker-B89-jwKr.js";import{H as R,F as T}from"./Header-s1ujL9H0.js";import{C as B}from"./Container-D8PCRmru.js";import"./Stepper-Bkj2XqRl.js";import"./Grid-DdXUmaHF.js";import"./Search-P2Cg3KsU.js";const D=({roomId:d,selectedSeats:a,setSelectedSeats:p})=>{const[g,f]=b.useState([]);b.useEffect(()=>{(async()=>{try{const r=await C.get(`https://localhost:7119/api/Room/GetRoomInfo/${d}`);r.data.isSuccess&&f(r.data.data.seats)}catch(r){console.error("Error fetching seat data:",r)}})()},[d]);const h=s=>{const r=`${s.atRow}${s.atColumn}`,i={id:s.seatId,name:r};a.some(n=>n.id===s.seatId)?p(a.filter(n=>n.id!==s.seatId)):p([...a,i])};return e.jsxs(t,{sx:{backgroundColor:"#0B0D1A",color:"white",pb:4,position:"relative"},children:[e.jsxs(t,{sx:{textAlign:"center",mb:2},children:[e.jsx(t,{sx:{margin:"0 auto",width:"80%",height:"70px",borderTop:"6px solid #fff",borderRadius:"50% 50% 0 0"}}),e.jsx(o,{variant:"h6",sx:{mt:-2,color:"white"},children:"Màn hình"})]}),e.jsxs(t,{sx:{position:"absolute",top:"50%",right:20,transform:"translateY(-50%)",display:"flex",flexDirection:"column",gap:2,padding:2,borderRadius:2},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(c,{sx:{color:"red"}}),e.jsx(o,{variant:"body2",children:"Đã Đặt"})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(c,{sx:{color:"white"}}),e.jsx(o,{variant:"body2",children:"Ghế Trống"})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(c,{sx:{color:"green"}}),e.jsx(o,{variant:"body2",children:"Đang Chọn"})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(c,{sx:{color:"blue"}}),e.jsx(o,{variant:"body2",children:"Ghế VIP"})]})]}),e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:2},children:e.jsx(t,{sx:{maxWidth:600,display:"flex",flexDirection:"column",gap:2},children:Object.entries(g.reduce((s,r)=>(s[r.atRow]||(s[r.atRow]=[]),s[r.atRow].push(r),s),{})).map(([s,r])=>e.jsx(t,{sx:{display:"flex",justifyContent:"center",gap:4},children:r.map(i=>{const n=a.some(S=>S.id===i.seatId),l=i.status===3,u=i.seatType.typeName==="VIP";let m="white",x="transparent",j=!1;return n?(m="green",x="rgba(0, 255, 0, 0.2)"):l?(m="red",x="rgba(255, 0, 0, 0.2)",j=!0):u&&(m="blue",x="rgba(0, 0, 255, 0.2)"),e.jsx(v,{variant:"outlined",disabled:j,onClick:()=>h(i),sx:{minWidth:"50px",minHeight:"50px",backgroundColor:x,color:"white",whiteSpace:"normal",p:.5,fontSize:"0.7rem",textTransform:"none","&:hover":{backgroundColor:n?"rgba(0, 255, 0, 0.4)":"rgba(255,255,255,0.2)"},"&.Mui-disabled":{backgroundColor:x,color:"white"}},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(c,{sx:{color:m}}),e.jsxs(o,{variant:"body2",align:"center",children:[i.atRow,i.atColumn]})]})},i.seatId)})},s))})})]})},M=()=>{const d=I(),a=k(),{roomId:p,selectedTime:g,selectedDate:f,tickets:h}=d.state||{roomId:"",selectedTime:"Not selected",selectedDate:"Not selected",tickets:[]},[s,r]=b.useState([]),i=(h||[]).reduce((l,u)=>l+(u.quantity||0),0),n=()=>{if(s.length!==i){w.error(`Vui lòng chọn đúng ${i} ghế.`);return}a("/ticket/payment",{state:{selectedDate:f,selectedTime:g,tickets:h,seats:s.map(l=>l.name)}})};return e.jsxs(t,{sx:{minHeight:"100vh",background:`linear-gradient(to bottom,
          rgba(11, 13, 26, 0.95) 0%,
          rgba(11, 13, 26, 0.85) 100%
        )`,position:"relative","&::before":{content:'""',position:"fixed",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 20% 30%, rgba(78, 46, 131, 0.4) 0%, rgba(78, 46, 131, 0) 50%),
                      radial-gradient(circle at 75% 15%, rgba(33, 64, 154, 0.4) 0%, rgba(33, 64, 154, 0) 50%),
                      linear-gradient(135deg, #0B0D1A 0%, #1A1E3C 50%, #3A1155 100%)`,zIndex:-1}},children:[e.jsx(R,{}),e.jsx(B,{maxWidth:"xl",sx:{pt:{xs:"64px",sm:"72px",md:"80px"},pb:{xs:4,sm:6,md:8},px:{xs:2,sm:3,md:4},position:"relative"},children:e.jsxs(t,{sx:{display:"flex",gap:{xs:2,sm:3,md:4},color:"white",position:"relative",minHeight:"100vh"},children:[e.jsx(t,{sx:{display:{xs:"none",md:"block"},position:"sticky",top:"100px",alignSelf:"flex-start",height:"fit-content",width:"250px",flexShrink:0},children:e.jsx(y,{currentStep:2})}),e.jsxs(t,{sx:{flex:1,display:"flex",flexDirection:"column",gap:{xs:2,sm:3,md:4},pb:4},children:[e.jsx(t,{sx:{display:{xs:"block",md:"none"},mb:2},children:e.jsx(y,{currentStep:2})}),e.jsxs(t,{sx:{mt:2},children:[e.jsx(o,{variant:"h4",fontWeight:"bold",gutterBottom:!0,align:"center",fontFamily:"JetBrains Mono",sx:{textTransform:"uppercase",mb:4},children:"Chọn Ghế"}),e.jsxs(t,{sx:{backgroundColor:"rgba(11, 13, 26, 0.6)",borderRadius:2,p:3,mb:4,boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.25)"},children:[e.jsx(D,{roomId:p,selectedSeats:s,setSelectedSeats:r}),e.jsx(o,{variant:"body2",sx:{mt:2,textAlign:"center",color:"primary.light"},children:`Bạn cần chọn đúng ${i} ghế.`})]}),e.jsx(t,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(v,{variant:"contained",color:"primary",onClick:n,sx:{px:4,py:1,fontSize:"1rem",borderRadius:2},children:"Tiếp tục"})})]})]})]})}),e.jsx(T,{})]})};export{M as default};
