import{ae as Gt,ad as Yt,r as m,af as Xt,aN as q,T as d,j as e,y as pe,ah as Zt,aO as ut,c as Oe,u as Jt,a0 as ea,aK as ta,a4 as aa,a2 as J,al as r,L as ra,B as i,b as j,x as Re,ao as xt,G as v,_ as oa,a9 as De,aa as $e,Z as S,a5 as sa,F as Ae,I as We,S as Pe,f as he,d as ze,ac as ee,O as ue,aj as Le,ak as Me,ap as pt,am as He,an as Ve,l as Ee,V as h,e as D}from"./index-B0N4umr3.js";import{E as k}from"./EventSeat-DqtIMzW3.js";import{T as na}from"./TheaterComedy-DB0FJPdj.js";import{A as gt}from"./ArrowBack-DRDJu3Ov.js";import{C as ft}from"./CheckCircleOutline-D0uz6DH2.js";import{I as ia}from"./Info-BtmbwfDU.js";import{u as Ne}from"./useQuery-CJ73VS18.js";import{M as Qe}from"./ManagementPageLayout-CR8cRzYv.js";import{T as la,a as bt}from"./Tabs-RjomoHR7.js";import{A as G}from"./Alert-Cd53pWcm.js";function ca(C){return Yt("MuiCardHeader",C)}const xe=Gt("MuiCardHeader",["root","avatar","action","content","title","subheader"]),da=C=>{const{classes:n}=C;return Zt({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},ca,n)},ma=pe("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(C,n)=>[{[`& .${xe.title}`]:n.title},{[`& .${xe.subheader}`]:n.subheader},n.root]})({display:"flex",alignItems:"center",padding:16}),ha=pe("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(C,n)=>n.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),ua=pe("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(C,n)=>n.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),xa=pe("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(C,n)=>n.content})({flex:"1 1 auto",[`.${ut.root}:where(& .${xe.title})`]:{display:"block"},[`.${ut.root}:where(& .${xe.subheader})`]:{display:"block"}}),Ue=m.forwardRef(function(n,g){const R=Xt({props:n,name:"MuiCardHeader"}),{action:b,avatar:Q,component:p="div",disableTypography:U=!1,subheader:w,subheaderTypographyProps:te,title:P,titleTypographyProps:_,slots:Fe={},slotProps:I={},...Be}=R,x={...R,component:p,disableTypography:U},T=da(x),$={slots:Fe,slotProps:{title:_,subheader:te,...I}};let V=P;const[ge,fe]=q("title",{className:T.title,elementType:d,externalForwardedProps:$,ownerState:x,additionalProps:{variant:Q?"body2":"h5",component:"span"}});V!=null&&V.type!==d&&!U&&(V=e.jsx(ge,{...fe,children:V}));let z=w;const[A,ae]=q("subheader",{className:T.subheader,elementType:d,externalForwardedProps:$,ownerState:x,additionalProps:{variant:Q?"body2":"body1",color:"textSecondary",component:"span"}});z!=null&&z.type!==d&&!U&&(z=e.jsx(A,{...ae,children:z}));const[O,re]=q("root",{ref:g,className:T.root,elementType:ma,externalForwardedProps:{...$,...Be,component:p},ownerState:x}),[oe,F]=q("avatar",{className:T.avatar,elementType:ha,externalForwardedProps:$,ownerState:x}),[be,X]=q("content",{className:T.content,elementType:xa,externalForwardedProps:$,ownerState:x}),[ye,se]=q("action",{className:T.action,elementType:ua,externalForwardedProps:$,ownerState:x});return e.jsxs(O,{...re,children:[Q&&e.jsx(oe,{...F,children:Q}),e.jsxs(be,{...X,children:[V,z]}),b&&e.jsx(ye,{...se,children:b})]})}),Y=Oe([e.jsx("path",{d:"M7 11v2h10v-2c0-1.86 1.28-3.41 3-3.86V6c0-1.65-1.35-3-3-3H7C5.35 3 4 4.35 4 6v1.14c1.72.45 3 2 3 3.86"},"0"),e.jsx("path",{d:"M21 9c-1.1 0-2 .9-2 2v4H5v-4c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.65 1.35 3 3 3v1c0 .55.45 1 1 1s1-.45 1-1v-1h12v1c0 .55.45 1 1 1s1-.45 1-1v-1c1.65 0 3-1.35 3-3v-5c0-1.1-.9-2-2-2"},"1")],"Chair"),yt=Oe(e.jsx("path",{fillRule:"evenodd",d:"M3 3v8h8V3zm6 6H5V5h4zm-6 4v8h8v-8zm6 6H5v-4h4zm4-16v8h8V3zm6 6h-4V5h4zm-6 4v8h8v-8zm6 6h-4v-4h4z"}),"GridView"),pa=Oe([e.jsx("path",{d:"M20 3H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h4v2h8v-2h4c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 14H4V5h16z"},"0"),e.jsx("path",{d:"M6.5 7.5H9V6H5v4h1.5zM19 12h-1.5v2.5H15V16h4z"},"1")],"ScreenshotMonitor"),ga=()=>{var nt,it,lt,ct,dt;const C=Jt(),{roomId:n}=ea(),g=ta(),R=aa(),[b,Q]=m.useState("row"),[p,U]=m.useState(""),[w,te]=m.useState(null),[P,_]=m.useState(!1),[Fe,I]=m.useState(!1),[Be,x]=m.useState(null),[T,$]=m.useState([]),[V,ge]=m.useState(!0),[fe,z]=m.useState(!1),[A,ae]=m.useState(null),[O,re]=m.useState(!1),[oe,F]=m.useState(null),[be,X]=m.useState(!1),[ye,se]=m.useState(!1),[W,Ke]=m.useState([]),[ne,qe]=m.useState(!1),[Ge,je]=m.useState(null),[jt,ve]=m.useState(!1),[vt,Ye]=m.useState(!1),[Z,Xe]=m.useState(""),[ie,Ze]=m.useState(0),[le,Je]=m.useState(0),[ce,et]=m.useState(!1),[tt,de]=m.useState(null),[St,Se]=m.useState(!1),[Ct,wt]=m.useState([]),[me,at]=m.useState(""),[fa,ba]=m.useState(!1),rt=t=>{ae(t),z(!0)},Ce=()=>{z(!1),ae(null),F(null),X(!1)},_t=async()=>{var t,a;if(A){re(!0),F(null),X(!1);try{const s=await D.delete(`seat/${A.seatId}/single`);s.data.isSuccess?(X(!0),setTimeout(()=>{Ce(),g.invalidateQueries(["roomDetail",n]),g.invalidateQueries("rooms"),g.invalidateQueries("PhongChieuData")},1500)):(F(s.data.message||"Xóa ghế không thành công"),h.error(`Lỗi: ${s.data.message}`))}catch(s){const c=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Đã xảy ra lỗi khi xóa ghế";F(c),h.error(`Lỗi: ${c}`)}finally{re(!1)}}},It=t=>{Ke(t),se(!0)},we=()=>{se(!1),Ke([]),je(null),ve(!1)},Tt=async()=>{var t,a;if(W.length!==0){qe(!0),je(null),ve(!1);try{const s=W.map(l=>l.seatId),c=!W[0].isActive;await Qt(s,c,!1),ve(!0),setTimeout(()=>{we(),g.invalidateQueries(["roomDetail",n])},1500)}catch(s){const c=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Đã xảy ra lỗi khi cập nhật trạng thái ghế";je(c),h.error(`Lỗi: ${c}`)}finally{qe(!1)}}},kt=async t=>(await D.get(`room/${t}/info`)).data.data,Rt=async()=>(await D.get("seattype")).data.data||[],Dt=async()=>(await D.get("movietheater")).data.data||[],{data:o,isLoading:$t}=Ne(["roomDetail",n],()=>kt(n),{enabled:!!n}),{data:E,isLoading:At}=Ne("seatTypes",Rt,{onSuccess:t=>{t&&t.length>0&&U(t[0].seatTypeId)}}),{data:ya}=Ne("movieTheaters",Dt,{onSuccess:t=>{wt(t)}}),Wt=async({roomId:t,seatTypeId:a,index:s,mode:c})=>{var l;_(!0),I(!1),x(null);try{const K=(await D.get(`room/${t}/info`)).data.data.seats.filter(M=>c==="row"?M.atRow===String.fromCharCode(65+s):M.atColumn===s+1).map(M=>M.seatId),L=await D.put(`seat/type?seatTypeId=${a}`,K,{headers:{"Content-Type":"application/json",accept:"text/plain"}});return L.data.isSuccess&&I(!0),h.success(`${c==="row"?"Hàng":"Cột"} ghế đã được cập nhật thành công!`),g.invalidateQueries(["roomDetail",t]),L.data}catch(u){const y=((l=u.response)==null?void 0:l.reason)||"Đã xảy ra lỗi khi cập nhật ghế";throw x(y),h.error(`Lỗi: ${y}`),u}finally{_(!1)}},Pt=async(t,a)=>{var s,c;_(!0),I(!1),x(null);try{const l=await D.post(`seat/room/${t}/row?seatTypeId=${a}`,{headers:{accept:"text/plain"}});return l.data.isSuccess?(I(!0),h.success("Đã thêm hàng ghế mới thành công!"),g.invalidateQueries(["roomDetail",t]),g.invalidateQueries("rooms"),g.invalidateQueries("PhongChieuData")):(x(l.data.message||"Thêm hàng không thành công"),h.error(`Lỗi: ${l.data.message}`)),l.data}catch(l){const u=((c=(s=l.response)==null?void 0:s.data)==null?void 0:c.message)||"Đã xảy ra lỗi khi thêm hàng ghế";throw x(u),h.error(`Lỗi: ${u}`),l}finally{_(!1)}},zt=async(t,a)=>{var s,c;_(!0),I(!1),x(null);try{const l=await D.post(`seat/room/${t}/column?seatTypeId=${a}`,{headers:{accept:"text/plain"}});return l.data.isSuccess?(I(!0),h.success("Đã thêm cột ghế mới thành công!"),g.invalidateQueries(["roomDetail",t]),g.invalidateQueries("rooms"),g.invalidateQueries("PhongChieuData")):(x(l.data.message||"Thêm cột không thành công"),h.error(`Lỗi: ${l.data.message}`)),l.data}catch(l){const u=((c=(s=l.response)==null?void 0:s.data)==null?void 0:c.message)||"Đã xảy ra lỗi khi thêm cột ghế";throw x(u),h.error(`Lỗi: ${u}`),l}finally{_(!1)}},Lt=(t,a)=>{Q(a),te(null)},Mt=t=>{U(t.target.value)},_e=t=>{te(t===w?null:t)},Ht=async()=>{if(!n||!p||w===null){h.error("Vui lòng chọn loại ghế và vị trí để cập nhật");return}try{await Wt({roomId:n,seatTypeId:p,index:w,mode:b})}catch(t){console.error("Error updating seats:",t)}},B=()=>{if(!E||!p)return"";const t=E.find(a=>a.seatTypeId===p);return t?t.typeName:""},Ie=()=>{if(!E||!p)return 0;const t=E.find(a=>a.seatTypeId===p);return t?t.price:0},Vt=async()=>{if(!n||!p){h.error("Vui lòng chọn loại ghế để thêm hàng");return}try{await Pt(n,p)}catch(t){console.error("Error adding row:",t)}},Et=async()=>{if(!n||!p){h.error("Vui lòng chọn loại ghế để thêm cột");return}try{await zt(n,p)}catch(t){console.error("Error adding column:",t)}},Nt=async(t,a)=>{if(!P){if(a.button===2){a.preventDefault(),rt(t);return}st(t.seatId)}},ot=t=>{switch(t){case 0:return{bg:"#ffffff",border:"#e0e0e0",text:"#5f6368"};case 1:return{bg:"#f44336",border:"#d32f2f",text:"#ffffff"};case 2:return{bg:"#757575",border:"#616161",text:"#ffffff"};case 3:return{bg:"#ffc107",border:"#ffa000",text:"#212121"};default:return{bg:"#ffffff",border:"#e0e0e0",text:"#5f6368"}}},Qt=async(t,a,s=!0)=>{var c,l;_(!0),I(!1),x(null);try{const u=await D.put(`seat/room/status?isActived=${a}`,t,{headers:{"Content-Type":"application/json",accept:"text/plain"}});return u.data.isSuccess?(I(!0),s&&h.success(`Đã cập nhật trạng thái kích hoạt của ${t.length} ghế!`),g.invalidateQueries(["roomDetail",n]),$([])):(x(u.data.message||"Cập nhật không thành công"),h.error(`Lỗi: ${u.data.message}`)),u.data}catch(u){const y=((l=(c=u.response)==null?void 0:c.data)==null?void 0:l.message)||"Đã xảy ra lỗi khi cập nhật trạng thái ghế";throw x(y),h.error(`Lỗi: ${y}`),u}finally{_(!1)}},st=t=>{$(a=>a.includes(t)?a.filter(s=>s!==t):[...a,t])},Ut=t=>{ge(t.target.value==="true")},Ot=async()=>{if(T.length===0){h.error("Vui lòng chọn ít nhất một ghế để cập nhật");return}const t=o.seats.filter(a=>T.includes(a.seatId));It(t)},Ft=async(t,a,s,c)=>{var l,u;_(!0),I(!1),x(null);try{const y=await D.post("seat/create",{roomId:t,seatTypeId:a,atRow:s,atColumn:c},{headers:{"Content-Type":"application/json",accept:"text/plain"}});return y.data.isSuccess?(I(!0),h.success(`Đã tạo ghế ${s}${c} thành công!`),g.invalidateQueries(["roomDetail",t]),!0):(x(y.data.message||"Tạo ghế không thành công"),h.error(`Lỗi: ${y.data.message}`),!1)}catch(y){const f=((u=(l=y.response)==null?void 0:l.data)==null?void 0:u.message)||"Đã xảy ra lỗi khi tạo ghế";throw x(f),h.error(`Lỗi: ${f}`),y}finally{_(!1)}},Bt=async(t,a)=>{if(!n||!p||P){h.error("Vui lòng chọn loại ghế để tạo ghế mới");return}try{await Ft(n,p,t,a)}catch(s){console.error("Error creating seat:",s)}},Kt=()=>{Xe(o.roomName||""),Ze(o.row||0),Je(o.column||0),at(o.movieTheaterId||""),Ye(!0),de(null),Se(!1)},Te=()=>{Ye(!1)},qt=async()=>{var t,a;if(!n||!Z.trim()){h.error("Tên phòng không được để trống");return}if(ie<=0||le<=0){h.error("Số hàng và cột phải lớn hơn 0");return}if(!me){h.error("Vui lòng chọn rạp chiếu phim");return}et(!0),de(null),Se(!1);try{const s={roomId:n,roomName:Z,row:N?o.row:ie,column:N?o.column:le,total:o.total,movieTheaterId:me};console.log("Updating room with payload:",s);const c=await D.put(`room/${n}`,s);if(c.data.isSuccess){if(Se(!0),h.success("Cập nhật thông tin phòng thành công!"),o){const l={...o,roomName:Z,row:N?o.row:ie,column:N?o.column:le,movieTheaterId:me};g.setQueryData(["roomDetail",n],l)}g.invalidateQueries(["roomDetail",n]),g.invalidateQueries("rooms"),g.invalidateQueries("PhongChieuData"),setTimeout(()=>{Te()},1500)}else de(c.data.message||"Cập nhật không thành công"),h.error(`Lỗi: ${c.data.message}`)}catch(s){const c=((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Đã xảy ra lỗi khi cập nhật thông tin phòng";de(c),h.error(`Lỗi: ${c}`)}finally{et(!1)}};if(m.useEffect(()=>{o&&(console.log("Room data in component:",o),console.log("Room seats:",o.seats))},[o]),!n)return e.jsx(Qe,{children:e.jsx(J,{sx:{p:4,textAlign:"center"},children:e.jsx(d,{variant:"h6",color:"error",children:r("admin.room_management.room_id_not_found")})})});if($t||At)return e.jsx(ra,{});if(!o)return e.jsx(Qe,{children:e.jsx(J,{sx:{p:4,textAlign:"center"},children:e.jsx(d,{variant:"h6",color:"error",children:r("admin.room_management.room_infor_not_found")})})});const N=o.seats&&o.seats.length>0;return e.jsxs(Qe,{children:[e.jsxs(i,{sx:{mb:4},children:[e.jsx(j,{variant:"outlined",startIcon:e.jsx(gt,{}),onClick:()=>C("/admin/ql-phong-chieu",{state:{refresh:!0}}),sx:{mb:2},children:r("admin.room_management.come_back_list_room")}),e.jsxs(Re,{elevation:0,sx:{p:3,borderRadius:2,bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[e.jsx(na,{sx:{mr:2,fontSize:32}}),e.jsxs(i,{children:[e.jsx(d,{variant:"h5",component:"h1",fontWeight:"bold",children:o.roomName}),e.jsx(d,{variant:"body2",sx:{opacity:.8},children:`${o.row} hàng × ${o.column} cột (${o.total} ghế)`})]})]}),e.jsx(j,{variant:"contained",color:"secondary",onClick:Kt,startIcon:e.jsx(xt,{}),sx:{boxShadow:2,"&:hover":{boxShadow:4}},children:"Sửa tên phòng"})]})]}),e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:4,children:e.jsxs(oa,{spacing:3,children:[e.jsxs(J,{sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(Ue,{title:"Thông tin phòng",titleTypographyProps:{fontWeight:"bold"},avatar:e.jsx(De,{sx:{bgcolor:"secondary.main"},children:e.jsx(yt,{})}),sx:{bgcolor:"secondary.light",color:"secondary.contrastText"}}),e.jsx($e,{}),e.jsx(i,{sx:{p:3},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:6,children:e.jsxs(i,{sx:{bgcolor:S("#f5f5f5",.5),p:2,borderRadius:2,height:"100%"},children:[e.jsx(d,{variant:"body2",sx:{color:"text.secondary",mb:1},children:r("admin.room_management.row_number")}),e.jsx(d,{variant:"h4",fontWeight:"medium",color:"primary",children:o.row})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(i,{sx:{bgcolor:S("#f5f5f5",.5),p:2,borderRadius:2,height:"100%"},children:[e.jsx(d,{variant:"body2",sx:{color:"text.secondary",mb:1},children:r("admin.room_management.column_number")}),e.jsx(d,{variant:"h4",fontWeight:"medium",color:"primary",children:o.column})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(i,{sx:{bgcolor:S("#f5f5f5",.5),p:2,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{children:[e.jsx(d,{variant:"body2",sx:{color:"text.secondary",mb:1},children:r("admin.room_management.seat_total")}),e.jsx(d,{variant:"h4",fontWeight:"medium",color:"primary",children:o.total})]}),e.jsx(Y,{sx:{fontSize:48,color:R.palette.primary.light,opacity:.7}})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(j,{variant:"contained",color:"primary",fullWidth:!0,startIcon:e.jsx(k,{}),onClick:()=>C("/admin/ql-thoi-gian-chieu/them-thoi-gian-chieu",{state:{roomId:n}}),sx:{mt:2},children:"Tạo lịch chiếu cho phòng này"})})]})})]}),e.jsxs(J,{sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(Ue,{title:r("admin.room_management.update_seattype"),titleTypographyProps:{fontWeight:"bold"},avatar:e.jsx(De,{sx:{bgcolor:"primary.main"},children:e.jsx(k,{})}),sx:{bgcolor:"primary.light",color:"primary.contrastText"}}),e.jsx($e,{}),e.jsx(i,{sx:{p:3},children:N?e.jsxs(e.Fragment,{children:[e.jsxs(la,{value:b,onChange:Lt,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",sx:{mb:3,"& .MuiTab-root":{borderRadius:1,mr:1,fontWeight:"medium","&.Mui-selected":{backgroundColor:S("#bbdefb",.5)}}},children:[e.jsx(bt,{value:"row",label:r("admin.room_management.row_select"),icon:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Y,{sx:{mr:.5,fontSize:18}}),e.jsx(Y,{sx:{mr:.5,fontSize:18}}),e.jsx(Y,{sx:{fontSize:18}})]}),iconPosition:"start"}),e.jsx(bt,{value:"column",label:r("admin.room_management.column_select"),icon:e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Y,{sx:{fontSize:16}}),e.jsx(Y,{sx:{fontSize:16}})]}),iconPosition:"start"})]}),e.jsxs(i,{sx:t=>({mb:3,p:2,borderRadius:2,bgcolor:B()?S(t.palette.primary.light,.2):S("#f5f5f5",.2),border:"1px solid",borderColor:B()?S(t.palette.primary.main,.5):S("#e0e0e0",.5)}),children:[e.jsxs(Ae,{fullWidth:!0,children:[e.jsx(We,{children:r("admin.room_management.seattype")}),e.jsx(Pe,{value:p,onChange:Mt,label:"Loại ghế",sx:{"& .MuiSelect-select":{display:"flex",alignItems:"center",gap:1}},children:E==null?void 0:E.map(t=>e.jsxs(he,{value:t.seatTypeId,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(k,{color:p===t.seatTypeId?"primary":"action",fontSize:"small"}),e.jsx("span",{children:t.typeName}),e.jsx(ze,{size:"small",label:`${t.price.toLocaleString("vi-VN")}đ`,color:"primary",variant:"outlined",sx:{ml:"auto"}})]},t.seatTypeId))})]}),B()&&e.jsxs(i,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(d,{variant:"body2",children:[r("admin.room_management.selected")," ",e.jsx("strong",{children:B()})]}),e.jsx(ze,{label:`${Ie().toLocaleString("vi-VN")}đ`,color:"secondary",size:"small"})]})]}),e.jsx(d,{variant:"body1",fontWeight:"medium",sx:{mb:1.5},children:b==="row"?r("admin.room_management.select_update_row"):r("admin.room_management.select_update_column")}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3,p:2,borderRadius:1,bgcolor:"#f5f5f5"},children:Array.from({length:b==="row"?o.row:o.column}).map((t,a)=>e.jsx(ze,{label:b==="row"?String.fromCharCode(65+a):a+1,onClick:()=>_e(a),color:w===a?"primary":"default",variant:w===a?"filled":"outlined",sx:{cursor:"pointer",fontWeight:"medium",minWidth:38,transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 3px 5px rgba(0,0,0,0.1)"}}},a))}),e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(ee,{title:`Thêm hàng mới với ghế loại: ${B()} (${Ie().toLocaleString("vi-VN")}đ)`,children:e.jsx("span",{children:e.jsx(j,{variant:"outlined",color:"primary",fullWidth:!0,onClick:Vt,disabled:!p||P,sx:{py:1.2,borderRadius:2,fontWeight:"medium"},startIcon:e.jsx(k,{}),children:r("admin.room_management.select_update_row")})})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(ee,{title:`Thêm cột mới với ghế loại: ${B()} (${Ie().toLocaleString("vi-VN")}đ)`,children:e.jsx("span",{children:e.jsx(j,{variant:"outlined",color:"primary",fullWidth:!0,onClick:Et,disabled:!p||P,sx:{py:1.2,borderRadius:2,fontWeight:"medium"},startIcon:e.jsx(k,{}),children:r("admin.room_management.add_new_column")})})})})]}),e.jsx(j,{variant:"contained",fullWidth:!0,onClick:Ht,sx:{py:1.2,borderRadius:2,fontWeight:"bold",boxShadow:2,backgroundColor:p?"#4caf50":"#2196f3",color:"white",textShadow:"0 1px 1px rgba(0,0,0,0.2)",letterSpacing:"0.5px",transition:"background-color 0.3s ease","&:hover":{backgroundColor:p?"#388e3c":"#1976d2"}},startIcon:P?void 0:e.jsx(ft,{}),children:P?e.jsx(ue,{size:24,color:"inherit"}):`Cập nhật ${b==="row"?"hàng":"cột"} đã chọn`})]}):e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[e.jsx(k,{sx:{color:"grey.400",fontSize:60,mb:2}}),e.jsx(d,{variant:"h6",color:"text.secondary",sx:{mb:2,textAlign:"center"},children:r("admin.room_management.not_found_seat")}),e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:300},children:e.jsx(j,{variant:"contained",color:"primary",onClick:()=>C("/admin/ql-phong-chieu"),startIcon:e.jsx(sa,{}),children:r("admin.room_management.back_to_list_seat_created")})})]})})]})]})}),e.jsx(v,{item:!0,xs:12,md:8,children:e.jsxs(J,{sx:{p:0,overflow:"hidden",borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",height:"100%"},children:[e.jsx(Ue,{title:"Sơ đồ phòng chiếu",titleTypographyProps:{fontWeight:"bold"},avatar:e.jsx(De,{sx:{bgcolor:"#1e88e5"},children:e.jsx(yt,{})}),sx:{bgcolor:"#bbdefb"}}),e.jsx($e,{}),e.jsxs(i,{sx:{p:3},children:[e.jsxs(i,{sx:{width:"80%",height:"40px",background:"linear-gradient(to bottom, #3f51b5, #c5cae9)",margin:"0 auto 50px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:"-150%",width:"150%",height:"100%",background:"rgba(255, 255, 255, 0.3)",transform:"skewX(-45deg)",animation:"moveLight 3s ease-in-out infinite"},"@keyframes moveLight":{"0%":{left:"-150%"},"50%":{left:"150%"},"100%":{left:"-150%"}},boxShadow:"0 4px 12px rgba(0,0,0,0.3), 0 0 20px rgba(116, 132, 214, 0.8)"},children:[e.jsx(pa,{sx:{color:"white",mr:1}}),e.jsx(d,{variant:"subtitle1",sx:{color:"white",fontWeight:"medium"},children:r("seat_cinema.screening")})]}),N?e.jsxs(e.Fragment,{children:[e.jsxs(Re,{elevation:0,sx:{p:4,borderRadius:2,bgcolor:"#f8f9fa",mb:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(i,{sx:{display:"flex",mb:2,justifyContent:"center",width:"fit-content"},children:Array.from({length:o.column}).map((t,a)=>e.jsx(ee,{title:`Chọn cột ${a+1}`,children:e.jsx(i,{sx:{width:40,height:30,display:"flex",justifyContent:"center",alignItems:"center",mx:"4px",cursor:"pointer",bgcolor:b==="column"&&w===a?R.palette.primary.main:"#eeeeee",color:b==="column"&&w===a?"white":"text.primary",borderRadius:2,fontSize:"0.9rem",transition:"all 0.2s",fontWeight:"bold","&:hover":{bgcolor:b==="column"?S(R.palette.primary.main,.7):"#e0e0e0"}},onClick:()=>{b==="column"&&_e(a)},children:a+1})},a))}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:[e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:"8px",mr:2},children:Array.from({length:o.row}).map((t,a)=>e.jsx(ee,{title:`Chọn hàng ${String.fromCharCode(65+a)}`,children:e.jsx(i,{sx:{width:30,height:40,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",bgcolor:b==="row"&&w===a?R.palette.primary.main:"#eeeeee",color:b==="row"&&w===a?"white":"text.primary",borderRadius:2,fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.2s","&:hover":{bgcolor:b==="row"?S(R.palette.primary.main,.7):"#e0e0e0"}},onClick:()=>{b==="row"&&_e(a)},children:String.fromCharCode(65+a)})},a))}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:`repeat(${o.column}, 40px)`,gridTemplateRows:`repeat(${o.row}, 40px)`,gap:"8px",justifyContent:"center"},children:Array.from({length:o.row*o.column}).map((t,a)=>{var mt,ht;const s=Math.floor(a/o.column),c=a%o.column,l=String.fromCharCode(65+s),u=c+1,y=`${l}${u}`,f=(mt=o.seats)==null?void 0:mt.find(H=>H.atRow===l&&H.atColumn===u);a===0&&console.log("First seat search:",{rowLetter:l,colNumber:u,foundSeat:!!f,allSeats:(ht=o.seats)==null?void 0:ht.slice(0,3)});const K=b==="row"&&w===s||b==="column"&&w===c,L=f&&T.includes(f.seatId),M=ot(f?f.status:0),ke=f&&!f.isActive;return e.jsx(ee,{title:f?`${y} - ${f.status===0?r("admin.room_management.existed"):f.status===1?r("admin.room_management.not_available"):f.status===2?r("admin.room_management.sold"):f.status===3?r("admin.room_management.booking"):r("admin.room_management.unknow")}${ke?" - "+r("admin.room_management.disabled"):" - "+r("admin.room_management.actived")}${L?" - "+r("admin.room_management.selected"):""}`:`${y} - ${r("admin.room_management.vacant_position")}`,children:f?e.jsx(i,{onClick:H=>H.ctrlKey||H.metaKey?st(f.seatId):Nt(f,H),onContextMenu:H=>{H.preventDefault(),rt(f)},sx:{width:"40px",height:"40px",backgroundColor:L?"#9c27b0":K?R.palette.primary.main:M.bg,border:"1px solid",borderColor:L?"#7b1fa2":K?R.palette.primary.dark:M.border,borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"0.9rem",color:L||K?"white":M.text,transition:"all 0.15s ease",boxShadow:K?"none":L?"0 0 0 2px #9c27b0":"inset 0 -2px 0 0 rgba(0,0,0,0.1)",cursor:"pointer",opacity:ke?.3:1,"&:hover":{transform:"translateY(-2px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",filter:"brightness(0.95)"},position:"relative","&:before":ke?{content:'""',position:"absolute",width:"100%",height:"2px",backgroundColor:"#f44336",top:"50%",transform:"translateY(-50%) rotate(45deg)"}:{}},children:y}):e.jsx(i,{onClick:()=>Bt(l,u),sx:{width:"40px",height:"40px",borderRadius:"4px",border:"1px dashed #ccc",display:"flex",justifyContent:"center",alignItems:"center",color:"#aaa",fontSize:"0.8rem",cursor:"pointer","&:hover":{border:"1px dashed #2196f3",backgroundColor:S("#bbdefb",.3),transform:"translateY(-2px)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",color:"primary.main"}},children:y})},`seat-${a}`)})})]})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:2,p:2,borderRadius:2,bgcolor:S("#e3f2fd",.6)},children:[e.jsx(k,{sx:{color:"primary.main",mr:1,fontSize:20}}),e.jsx(d,{variant:"body2",color:"primary.dark",fontWeight:"medium",children:r("admin.room_management.click_to_select")})]}),T.length>0&&e.jsxs(Re,{elevation:3,sx:{position:"sticky",bottom:20,left:0,right:0,zIndex:10,p:2,mt:3,borderRadius:2,bgcolor:S(R.palette.background.paper,.9),backdropFilter:"blur(8px)",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(k,{sx:{color:"#9c27b0",mr:1}}),e.jsxs(d,{variant:"body1",fontWeight:"medium",children:[r("admin.room_management.selected")," ",T.length]})]}),e.jsxs(i,{sx:{display:"flex",gap:2},children:[e.jsx(j,{variant:"outlined",color:"secondary",onClick:()=>$([]),children:r("admin.room_management.cancel")}),e.jsxs(Ae,{variant:"outlined",size:"small",sx:{minWidth:120,mx:2},children:[e.jsx(We,{id:"active-status-select-label",children:"Trạng thái"}),e.jsxs(Pe,{labelId:"active-status-select-label",id:"active-status-select",value:V?"true":"false",onChange:Ut,label:r("admin.room_management.status"),children:[e.jsx(he,{value:"true",children:"Kích hoạt"}),e.jsx(he,{value:"false",children:"Vô hiệu hóa"})]})]}),e.jsx(j,{variant:"contained",color:"warning",onClick:Ot,startIcon:e.jsx(k,{}),children:r("admin.room_management.update_seat")})]})]})]}):e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:400},children:[e.jsx(k,{sx:{color:"grey.300",fontSize:100,mb:3}}),e.jsx(d,{variant:"h5",color:"text.secondary",sx:{mb:2,textAlign:"center"},children:r("admin.room_management.not_found_seat")}),e.jsx(d,{variant:"body1",color:"text.secondary",sx:{mb:3,textAlign:"center",maxWidth:500},children:r("admin.room_management.tutorial_create_seat")}),e.jsx(j,{variant:"contained",color:"primary",onClick:()=>C("/admin/ql-phong-chieu"),startIcon:e.jsx(gt,{}),children:r("admin.room_management.come_back_list_room")})]})]})]})})]}),e.jsxs(Le,{open:fe,onClose:Ce,fullWidth:!0,maxWidth:"xs",children:[e.jsxs(Me,{sx:{bgcolor:"error.main",color:"white",pb:2},children:[e.jsx(pt,{sx:{mr:1,verticalAlign:"middle"}}),r("admin.room_management.delete_seat")]}),e.jsxs(He,{sx:{pt:3,pb:2},children:[e.jsxs(d,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:[r("admin.room_management.surely_delete")," ",A==null?void 0:A.atRow,A==null?void 0:A.atColumn,"?",r("admin.room_management.cannot_return")]}),e.jsx(i,{sx:{p:2,bgcolor:"#fff8e1",borderRadius:1,border:"1px solid #ffe57f",mb:2},children:e.jsxs(d,{variant:"body2",color:"warning.dark",children:[e.jsx("strong",{children:r("admin.room_management.warming")})," ",r("admin.room_management.warming_delete")]})}),be&&e.jsx(G,{severity:"success",sx:{mb:2},children:r("admin.room_management.delete_success")}),oe&&e.jsx(G,{severity:"error",sx:{mb:2},children:oe})]}),e.jsxs(Ve,{sx:{px:3,pb:3},children:[e.jsx(j,{onClick:Ce,disabled:O,variant:"outlined",children:r("admin.room_management.cancel")}),e.jsx(j,{onClick:_t,variant:"contained",color:"error",disabled:O,startIcon:O?e.jsx(ue,{size:20,color:"inherit"}):e.jsx(pt,{}),children:O?r("admin.room_management.delete_loading"):r("admin.room_management.delete_confirm")})]})]}),e.jsxs(Le,{open:ye,onClose:we,fullWidth:!0,maxWidth:"xs",children:[e.jsxs(Me,{sx:{bgcolor:"warning.main",color:"white",pb:2},children:[e.jsx(k,{sx:{mr:1,verticalAlign:"middle"}}),(nt=W[0])!=null&&nt.isActive?"Vô hiệu hóa":"Kích hoạt"," ghế"]}),e.jsxs(He,{sx:{pt:3,pb:2},children:[e.jsxs(d,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:[r("admin.room_management.you_sure")," ",(it=W[0])!=null&&it.isActive?r("admin.room_management.disable"):r("admin.room_management.active")," ",W.length," ghế đã chọn?"]}),e.jsx(i,{sx:{p:2,bgcolor:"#fff8e1",borderRadius:1,border:"1px solid #ffe57f",mb:2},children:e.jsxs(d,{variant:"body2",color:"warning.dark",children:[e.jsx("strong",{children:"Lưu ý:"})," ",(lt=W[0])!=null&&lt.isActive?r("admin.room_management.warming_disable"):r("admin.room_management.warming_active")]})}),jt&&e.jsxs(G,{severity:"success",sx:{mb:2},children:[(ct=W[0])!=null&&ct.isActive?r("admin.room_management.disabled"):r("admin.room_management.actived")," ",W.length," ghế thành công!"]}),Ge&&e.jsx(G,{severity:"error",sx:{mb:2},children:Ge})]}),e.jsxs(Ve,{sx:{px:3,pb:3},children:[e.jsx(j,{onClick:we,disabled:ne,variant:"outlined",children:r("admin.room_management.cancel")}),e.jsx(j,{onClick:Tt,variant:"contained",color:"warning",disabled:ne,startIcon:ne?e.jsx(ue,{size:20,color:"inherit"}):e.jsx(k,{}),children:ne?r("auth.login.processing"):(dt=W[0])!=null&&dt.isActive?"Vô hiệu hóa":"Kích hoạt"})]})]}),e.jsxs(Le,{open:vt,onClose:Te,fullWidth:!0,maxWidth:"xs",children:[e.jsxs(Me,{sx:{bgcolor:"primary.main",color:"white",pb:2},children:[e.jsx(xt,{sx:{mr:1,verticalAlign:"middle"}}),r("admin.room_management.room_edit")]}),e.jsxs(He,{sx:{pt:3,pb:2},children:[e.jsx(d,{variant:"subtitle2",gutterBottom:!0,children:"Cập nhật tên phòng chiếu"}),e.jsx(Ee,{autoFocus:!0,margin:"dense",id:"roomName",label:"Tên phòng",type:"text",fullWidth:!0,variant:"outlined",value:Z,onChange:t=>Xe(t.target.value),sx:{mb:2}}),e.jsxs(Ae,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e.jsx(We,{id:"movie-theater-label",children:"Rạp chiếu phim"}),e.jsx(Pe,{labelId:"movie-theater-label",id:"movie-theater-select",value:me,onChange:t=>at(t.target.value),label:"Rạp chiếu phim",children:Ct.map(t=>e.jsx(he,{value:t.movieTheaterId,children:t.name},t.movieTheaterId))})]}),N?e.jsxs(i,{sx:{mt:2,mb:2,p:2,bgcolor:S("#f5f5f5",.7),borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsxs(d,{variant:"subtitle2",color:"text.secondary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(ia,{sx:{fontSize:18,mr:.5,color:"info.main"}}),"Kích thước phòng hiện tại: ",o.row," hàng × ",o.column," cột"]}),e.jsx(d,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"Không thể thay đổi kích thước vì phòng đã có ghế. Xóa tất cả ghế trước khi thay đổi."})]}):e.jsxs(i,{sx:{mt:2,mb:2},children:[e.jsx(d,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"Cấu hình kích thước phòng"}),e.jsx(d,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:2},children:"Bạn có thể thay đổi số hàng và cột vì phòng chưa có ghế"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:6,children:e.jsx(Ee,{id:"roomRow",label:"Số hàng",type:"number",fullWidth:!0,variant:"outlined",value:ie,onChange:t=>Ze(parseInt(t.target.value)),inputProps:{min:1}})}),e.jsx(v,{item:!0,xs:6,children:e.jsx(Ee,{id:"roomColumn",label:"Số cột",type:"number",fullWidth:!0,variant:"outlined",value:le,onChange:t=>Je(parseInt(t.target.value)),inputProps:{min:1}})})]})]}),St&&e.jsx(G,{severity:"success",sx:{mb:2},children:r("admin.room_management.success_room_update")}),tt&&e.jsx(G,{severity:"error",sx:{mb:2},children:tt})]}),e.jsxs(Ve,{sx:{px:3,pb:3},children:[e.jsx(j,{onClick:Te,disabled:ce,variant:"outlined",children:r("admin.room_management.cancel")}),e.jsx(j,{onClick:qt,variant:"contained",color:"primary",disabled:ce||!Z.trim(),startIcon:ce?e.jsx(ue,{size:20,color:"inherit"}):e.jsx(ft,{}),children:ce?r("admin.room_management.update_process"):r("admin.room_management.update")})]})]})]})},Da=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"}));export{Y as C,ga as a,Da as b};
