import{r as c,at as ht,K as Z,j as a,p as tt,N as et,am as O,O as at,au as gt,ao as mt,an as nt,w as S,av as R,ap as pt,aw as ft,ax as h,c as xt,y as bt,a as q,L as yt,B as T,T as m,C as L,b as H,M as vt,d as rt,ae as Tt,F as Ct,S as wt,e as E,z as ot,D as it,a0 as jt,f as X,ay as Mt,V as U}from"./index-DZtaYlZS.js";import{t as Bt,b as $t,A as kt,h as A,i as _,j as V,k as Pt,f as F,S as Nt,P as Wt,a as St}from"./format-D72_F7oa.js";import{C as st}from"./Container-D8PCRmru.js";import{G as D}from"./Grid-DdXUmaHF.js";/* empty css                   */function Rt(t){return c.Children.toArray(t).filter(e=>c.isValidElement(e))}const lt=c.createContext({}),ct=c.createContext(void 0);function Ft(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.includes(t):t===e}const Dt=t=>{const{classes:e,fullWidth:n,selected:r,disabled:d,size:p,color:y}=t,x={root:["root",r&&"selected",d&&"disabled",n&&"fullWidth",`size${O(p)}`,y]};return at(x,gt,e)},It=tt(mt,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${O(n.size)}`]]}})(nt(({theme:t})=>({...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${R.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:S(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${R.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.selectedOpacity})`:S(t.palette.text.primary,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:S(t.palette.text.primary,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.selectedOpacity})`:S(t.palette.text.primary,t.palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(pt()).map(([e])=>({props:{color:e},style:{[`&.${R.selected}`]:{color:(t.vars||t).palette[e].main,backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.selectedOpacity})`:S(t.palette[e].main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:S(t.palette[e].main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.selectedOpacity})`:S(t.palette[e].main,t.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}))),_t=c.forwardRef(function(e,n){const{value:r,...d}=c.useContext(lt),p=c.useContext(ct),y=ht({...d,selected:Ft(e.value,r)},e),x=Z({props:y,name:"MuiToggleButton"}),{children:B,className:C,color:v="standard",disabled:w=!1,disableFocusRipple:s=!1,fullWidth:o=!1,onChange:i,onClick:f,selected:j,size:b="medium",value:$,...P}=x,N={...x,color:v,disabled:w,disableFocusRipple:s,fullWidth:o,size:b},I=Dt(N),g=l=>{f&&(f(l,$),l.defaultPrevented)||i&&i(l,$)},u=p||"";return a.jsx(It,{className:et(d.className,I.root,C,u),disabled:w,focusRipple:!s,ref:n,onClick:g,onChange:i,value:$,ownerState:N,"aria-pressed":j,...P,children:B})}),Vt=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:d}=t,p={root:["root",n,r&&"fullWidth"],grouped:["grouped",`grouped${O(n)}`,d&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return at(p,ft,e)},zt=tt("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${h.grouped}`]:e.grouped},{[`& .${h.grouped}`]:e[`grouped${O(n.orientation)}`]},{[`& .${h.firstButton}`]:e.firstButton},{[`& .${h.lastButton}`]:e.lastButton},{[`& .${h.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(nt(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${h.grouped}`]:{[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderTop:0,marginTop:0}},[`& .${h.firstButton},& .${h.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${h.lastButton},& .${h.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${h.lastButton}.${R.disabled},& .${h.middleButton}.${R.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${h.grouped}`]:{[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${h.firstButton},& .${h.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${h.lastButton},& .${h.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${h.lastButton}.${R.disabled},& .${h.middleButton}.${R.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),Ht=c.forwardRef(function(e,n){const r=Z({props:e,name:"MuiToggleButtonGroup"}),{children:d,className:p,color:y="standard",disabled:x=!1,exclusive:B=!1,fullWidth:C=!1,onChange:v,orientation:w="horizontal",size:s="medium",value:o,...i}=r,f={...r,disabled:x,fullWidth:C,orientation:w,size:s},j=Vt(f),b=c.useCallback((u,l)=>{if(!v)return;const M=o&&o.indexOf(l);let k;o&&M>=0?(k=o.slice(),k.splice(M,1)):k=o?o.concat(l):[l],v(u,k)},[v,o]),$=c.useCallback((u,l)=>{v&&v(u,o===l?null:l)},[v,o]),P=c.useMemo(()=>({className:j.grouped,onChange:B?$:b,value:o,size:s,fullWidth:C,color:y,disabled:x}),[j.grouped,B,$,b,o,s,C,y,x]),N=Rt(d),I=N.length,g=u=>{const l=u===0,M=u===I-1;return l&&M?"":l?j.firstButton:M?j.lastButton:j.middleButton};return a.jsx(zt,{role:"group",className:et(j.root,p),ref:n,ownerState:f,...i,children:a.jsx(lt.Provider,{value:P,children:N.map((u,l)=>a.jsx(ct.Provider,{value:g(l),children:u},l))})})}),Ot=xt(a.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove");function Y(t,e,n){const r=Bt(t,n==null?void 0:n.in);return isNaN(e)?$t(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const ke=()=>{const{movieId:t}=bt(),[e,n]=c.useState(),[r,d]=c.useState(!1),[p,y]=c.useState(!0),{t:x}=q(),[B,C]=c.useState(),v=async()=>{try{y(!0);const i=await rt.get(`Movie/${t}`);n(i.data),console.log("Movie detail:",i.data)}catch(i){console.error("Failed to fetch movie:",i)}finally{console.log(t+"haha"),y(!1)}};c.useEffect(()=>{v()},[]);const w=i=>{let f=i.replace("youtu.be","youtube.com/embed");f=f.replace("watch?v=","embed/"),f=f+"?autoplay=1",C(f),d(!0)},s=()=>d(!1),o=i=>{if(!i)return"N/A";const f={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(i).toLocaleDateString("vi-VN",f)};return p?a.jsx(yt,{}):a.jsxs(T,{sx:{backgroundColor:"#0B0D1A",minHeight:"50vh",color:"white"},children:[a.jsx(st,{maxWidth:"lg",sx:{mt:13,color:"white"},children:a.jsxs(D,{container:!0,spacing:4,sx:{alignItems:"stretch"},children:[a.jsx(D,{item:!0,xs:12,md:4,children:a.jsx(T,{component:"img",src:e==null?void 0:e.image,alt:e==null?void 0:e.movieName,sx:{width:"100%",height:"100%",borderRadius:2,boxShadow:"0 0 20px rgba(0,0,0,0.5)",objectFit:"cover"}})}),a.jsxs(D,{item:!0,xs:12,md:8,sx:{display:"flex",flexDirection:"column"},children:[a.jsx(m,{variant:"h4",fontWeight:"bold",mb:2,fontFamily:"JetBrains Mono",children:e==null?void 0:e.movieName}),a.jsxs(T,{sx:{mb:3,fontWeight:"bold"},children:[a.jsx(L,{label:e==null?void 0:e.rating,color:"error",sx:{mb:1,mr:1}}),a.jsx(L,{icon:a.jsx(kt,{}),label:`${e==null?void 0:e.duration}'`,sx:{mr:1,mb:1,color:"white"}}),a.jsx(L,{label:e==null?void 0:e.categories.map(i=>i.name).join(", "),sx:{mr:1,mb:1,backgroundColor:"#e67e22",color:"white"}})]}),a.jsx(m,{variant:"h6",fontWeight:"bold",mb:2,fontFamily:"JetBrains Mono",children:"MÔ TẢ"}),a.jsxs(T,{sx:{mb:3,textAlign:"justify",flexGrow:1},children:[a.jsxs(m,{mb:1,variant:"body1",fontFamily:"JetBrains Mono",children:[a.jsx("strong",{children:"Đạo diễn:"})," ",e==null?void 0:e.director]}),a.jsxs(m,{mb:1,variant:"body1",sx:{textAlign:"left"},fontFamily:"JetBrains Mono",children:[a.jsx("strong",{children:"Diễn viên:"})," ",e==null?void 0:e.actors]}),a.jsxs(m,{mb:1,variant:"body1",fontFamily:"JetBrains Mono",children:[a.jsx("strong",{children:"Khởi chiếu:"})," ",o(e==null?void 0:e.fromDate)]}),a.jsx(m,{variant:"h6",fontWeight:"bold",mb:2,mt:4,fontFamily:"JetBrains Mono",children:"NỘI DUNG PHIM"}),a.jsx(m,{paragraph:!0,variant:"body1",sx:{textAlign:"justify"},fontFamily:"JetBrains Mono",children:e==null?void 0:e.content})]}),a.jsxs(T,{sx:{mt:"auto"},children:[a.jsx(H,{variant:"outlined",size:"large",onClick:()=>(e==null?void 0:e.trailer)&&w(e.trailer),sx:{color:"white",borderColor:"#e67e22",mr:2,position:"relative",overflow:"hidden",transition:"color 0.5s ease-in-out","&::before":{content:'""',position:"absolute",inset:0,background:"linear-gradient(to right, #e67e22,rgb(77, 91, 185))",transform:"translateX(-100%)",transition:"transform 0.5s ease-in-out",zIndex:0},"&:hover":{color:"black"},"&:hover::before":{transform:"translateX(0)"},"& span":{position:"relative",zIndex:1}},children:a.jsx("span",{children:"XEM TRAILER"})}),a.jsx(H,{variant:"contained",size:"large",sx:{backgroundColor:"#e67e22",position:"relative",overflow:"hidden",transition:"color 0.5s ease-in-out","&::before":{content:'""',position:"absolute",inset:0,background:"linear-gradient(to right, #e67e22,rgb(77, 91, 185))",transform:"translateX(-100%)",transition:"transform 0.5s ease-in-out",zIndex:0},"&:hover":{color:"white"},"&:hover::before":{transform:"translateX(0)"},"& span":{position:"relative",zIndex:1}},children:a.jsx("span",{children:"ĐẶT VÉ NGAY"})})]})]})]})}),a.jsx(vt,{open:r,onClose:s,"aria-labelledby":"trailer-modal",sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(61, 14, 97, 0.95)"},children:a.jsx(T,{sx:{position:"relative",width:"80%",maxWidth:"1000px",aspectRatio:"16/9",bgcolor:"transparent"},children:a.jsx("iframe",{width:"100%",height:"100%",src:B,title:"Movie Trailer",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0}})})})]})},Lt={lessThanXSeconds:{one:"dưới 1 giây",other:"dưới {{count}} giây"},xSeconds:{one:"1 giây",other:"{{count}} giây"},halfAMinute:"nửa phút",lessThanXMinutes:{one:"dưới 1 phút",other:"dưới {{count}} phút"},xMinutes:{one:"1 phút",other:"{{count}} phút"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ngày",other:"{{count}} ngày"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 tháng",other:"khoảng {{count}} tháng"},xMonths:{one:"1 tháng",other:"{{count}} tháng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}},Et=(t,e,n)=>{let r;const d=Lt[t];return typeof d=="string"?r=d:e===1?r=d.one:r=d.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+" nữa":r+" trước":r},At={full:"EEEE, 'ngày' d MMMM 'năm' y",long:"'ngày' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},qt={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Gt={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Qt={date:A({formats:At,defaultWidth:"full"}),time:A({formats:qt,defaultWidth:"full"}),dateTime:A({formats:Gt,defaultWidth:"full"})},Jt={lastWeek:"eeee 'tuần trước vào lúc' p",yesterday:"'hôm qua vào lúc' p",today:"'hôm nay vào lúc' p",tomorrow:"'ngày mai vào lúc' p",nextWeek:"eeee 'tới vào lúc' p",other:"P"},Xt=(t,e,n,r)=>Jt[t],Ut={narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước Công Nguyên","sau Công Nguyên"]},Yt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Quý 1","Quý 2","Quý 3","Quý 4"]},Kt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["quý I","quý II","quý III","quý IV"]},Zt={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"]},te={narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["tháng 01","tháng 02","tháng 03","tháng 04","tháng 05","tháng 06","tháng 07","tháng 08","tháng 09","tháng 10","tháng 11","tháng 12"]},ee={narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"]},ae={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"}},ne={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"giữa trưa",morning:"vào buổi sáng",afternoon:"vào buổi chiều",evening:"vào buổi tối",night:"vào ban đêm"}},re=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(r==="quarter")switch(n){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if(r==="day")switch(n){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else{if(r==="week")return n===1?"thứ nhất":"thứ "+n;if(r==="dayOfYear")return n===1?"đầu tiên":"thứ "+n}return String(n)},oe={ordinalNumber:re,era:_({values:Ut,defaultWidth:"wide"}),quarter:_({values:Yt,defaultWidth:"wide",formattingValues:Kt,defaultFormattingWidth:"wide",argumentCallback:t=>t-1}),month:_({values:Zt,defaultWidth:"wide",formattingValues:te,defaultFormattingWidth:"wide"}),day:_({values:ee,defaultWidth:"wide"}),dayPeriod:_({values:ae,defaultWidth:"wide",formattingValues:ne,defaultFormattingWidth:"wide"})},ie=/^(\d+)/i,se=/\d+/i,le={narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},ce={any:[/^t/i,/^s/i]},de={narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},ue={any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},he={narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},ge={narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},me={narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},pe={narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},fe={narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},xe={any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},be={ordinalNumber:Pt({matchPattern:ie,parsePattern:se,valueCallback:t=>parseInt(t,10)}),era:V({matchPatterns:le,defaultMatchWidth:"wide",parsePatterns:ce,defaultParseWidth:"any"}),quarter:V({matchPatterns:de,defaultMatchWidth:"wide",parsePatterns:ue,defaultParseWidth:"any",valueCallback:t=>t+1}),month:V({matchPatterns:he,defaultMatchWidth:"wide",parsePatterns:ge,defaultParseWidth:"wide"}),day:V({matchPatterns:me,defaultMatchWidth:"wide",parsePatterns:pe,defaultParseWidth:"wide"}),dayPeriod:V({matchPatterns:fe,defaultMatchWidth:"wide",parsePatterns:xe,defaultParseWidth:"any"})},ye={code:"vi",formatDistance:Et,formatLong:Qt,formatRelative:Xt,localize:oe,match:be,options:{weekStartsOn:1,firstWeekContainsDate:1}},z=new Map,ve=({movieId:t,onRoomSelect:e,onSelectDate:n,onSelectTime:r,onShowtimeAvailability:d})=>{const p=new Date,y=F(p,"dd/MM"),[x,B]=c.useState(y),[C,v]=c.useState("hcm"),[w,s]=c.useState(null),[o,i]=c.useState([]),[f,j]=c.useState(!1),{t:b,i18n:$}=q(),P=c.useMemo(()=>Array.from({length:4},(g,u)=>{const l=Y(p,u),M=F(l,"EEEE",{locale:$.language==="vi"?ye:void 0});return{date:l,formatted:F(l,"dd/MM"),label:b(`${M.toLowerCase()}`)}}),[p,b,$.language]),N=c.useCallback((g,u)=>{u&&(B(u),n(u),s(null))},[n]),I=c.useCallback((g,u)=>{s(g),r(g),e(u)},[r,e]);return c.useEffect(()=>{const g=P.find(W=>W.formatted===x);if(!g)return;const u=F(g.date,"yyyy-MM-dd"),l=F(Y(g.date,1),"yyyy-MM-dd"),M=`${u}T00:00:00`,k=`${t}_${u}_${C}`,dt=async()=>{if(z.has(k)){const W=z.get(k);i(W),d(W.length>0);return}j(!0);try{const G=(await jt.get(`https://localhost:7119/api/showtime/getshowtimebydates?movieId=${t}&fromDate=${u}&toDate=${l}`)).data.data[M]||[];if(G.length===0){i([]),z.set(k,[]),d(!1);return}const Q=[{name:"Cinema Eiga",address:"S10.06 Origami, Vinhomes Grandpark, Thủ Đức, Hồ Chí Minh",times:G.map(J=>({time:F(new Date(J.startTime),"HH:mm"),roomId:J.roomId}))}];i(Q),z.set(k,Q),d(!0)}catch(W){console.error("Error fetching showtimes:",W),d(!1),i([])}finally{j(!1)}},ut=setTimeout(()=>{dt()},100);return()=>clearTimeout(ut)},[C,x,P,t,d]),c.useEffect(()=>{d(o.length>0)},[o.length,d]),a.jsx(T,{sx:{backgroundColor:"#0B0D1A",color:"white",py:5},children:a.jsxs(st,{maxWidth:"md",children:[a.jsx(m,{variant:"h4",fontWeight:"bold",textAlign:"center",fontFamily:"JetBrains Mono",mb:2,sx:{letterSpacing:"1px",textTransform:"uppercase"},children:b("showtime_cinema.title.showtime_list")}),a.jsx(Ht,{value:x,exclusive:!0,onChange:N,sx:{display:"flex",justifyContent:"center",gap:2,mb:3},children:P.map((g,u)=>{const l=g.formatted===y;return a.jsxs(_t,{value:g.formatted,sx:{border:"2px solid yellow !important",color:"yellow",backgroundColor:x===g.formatted?"yellow":"transparent","&.Mui-selected":{backgroundColor:"yellow",color:"#834bff",fontWeight:"bold"},"&.Mui-selected:hover":{backgroundColor:"yellow"},"&:hover":{backgroundColor:"transparent"},borderRadius:"12px",px:3,py:2,minWidth:"100px",position:"relative"},children:[l&&a.jsx(m,{variant:"caption",sx:{position:"absolute",top:-12,left:"50%",transform:"translateX(-50%)",backgroundColor:"red",color:"white",borderRadius:"4px",px:.5,fontWeight:"bold",whiteSpace:"nowrap"},children:b("showtime_cinema.title.now_day")}),a.jsxs(T,{textAlign:"center",children:[a.jsx(m,{variant:"h6",fontWeight:"bold",mb:1,fontFamily:"JetBrains Mono",children:g.formatted}),a.jsx(m,{variant:"body2",children:g.label})]})]},u)})}),a.jsxs(D,{container:!0,alignItems:"center",justifyContent:"space-between",mb:3,children:[a.jsx(D,{item:!0,children:a.jsxs(m,{variant:"h4",fontWeight:"bold",children:["🎬 ",b("showtime_cinema.title.theater_list")]})}),a.jsx(D,{item:!0,children:a.jsx(Ct,{children:a.jsxs(wt,{value:C,onChange:g=>v(g.target.value),sx:{border:"2px solid yellow",color:"yellow",fontWeight:"bold",fontSize:"15px",borderRadius:"10px",px:3,backgroundColor:"transparent"},children:[a.jsx(E,{value:"hcm",children:b("showtime_cinema.location.HCM")}),a.jsx(E,{value:"hn",children:b("showtime_cinema.location.HaNoi")}),a.jsx(E,{value:"dn",children:b("showtime_cinema.location.DaNang")})]})})})]}),f&&a.jsx(m,{textAlign:"center",sx:{py:2},children:b("showtime_cinema.title.loading_showtime")}),!f&&a.jsx(T,{sx:{borderRadius:"12px"},children:o.length>0?o.map((g,u)=>a.jsx(ot,{sx:{backgroundColor:"#834bff",color:"white",borderRadius:"12px",p:2,mb:2},children:a.jsxs(it,{children:[a.jsx(m,{variant:"h6",fontWeight:"bold",color:"yellow",mb:1,fontFamily:"JetBrains Mono",children:g.name}),a.jsx(m,{variant:"body2",mb:2,children:g.address}),a.jsx(T,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:g.times.map((l,M)=>a.jsx(H,{variant:"contained",sx:{backgroundColor:w===l.time?"yellow":"transparent",color:w===l.time?"black":"white",border:"1px solid white",fontWeight:"bold","&:hover":{backgroundColor:"yellow",color:"black"}},onClick:()=>I(l.time,l.roomId),children:l.time},M))})]})},u)):a.jsx(m,{variant:"body1",textAlign:"center",sx:{py:5},children:b("showtime_cinema.title.no_showtime")})})]})})},Pe=Tt.memo(ve),K={en:{locale:"en-US",currency:"USD"},jp:{locale:"ja-JP",currency:"JPY"},vi:{locale:"vi-VN",currency:"VND"}},Te={VND:1,USD:39e-6,JPY:.0058},Ne=({onNext:t})=>{const[e,n]=c.useState([]),{t:r,i18n:d}=q(),[p,y]=c.useState({locale:"vi-VN",currency:"VND"});c.useEffect(()=>{const o=d.language.substring(0,2);y(K[o]||K.vi)},[d.language]),c.useEffect(()=>{(async()=>{try{const i=(await rt.get("seattype/all")).data.map(f=>({...f,quantity:0}));n(i)}catch(o){console.error("Error fetching seat types:",o),U.error(r("errors.fetch_seats_failed"))}})()},[r]);const x=s=>{n(o=>o.map(i=>i.seatTypeId===s?{...i,quantity:i.quantity+1}:i))},B=s=>{n(o=>o.map(i=>i.seatTypeId===s&&i.quantity>0?{...i,quantity:i.quantity-1}:i))},C=(s,o)=>o==="VND"?s:s*Te[o],v=s=>{const o=C(s,p.currency);return(p.currency==="JPY"?Math.round(o):o).toLocaleString(p.locale,{style:"currency",currency:p.currency})},w=()=>{const s=e.filter(o=>o.quantity>0);if(s.length===0){U.error("Vui lòng chọn ít nhất một vé.");return}t&&t(s)};return a.jsxs(T,{sx:{background:"linear-gradient(135deg, #1A1E3C 0%, #3A1155 100%)",color:"white",padding:{xs:3,sm:5,md:6},textAlign:"center"},children:[a.jsx(m,{variant:"h4",sx:{fontWeight:"bold",textTransform:"uppercase",mb:4},children:r("ticket_price.ticket_selection")}),a.jsx(T,{sx:{width:"100%",maxWidth:"900px",margin:"0 auto",overflow:"hidden",position:"relative"},children:a.jsx(Nt,{slidesPerView:1,spaceBetween:50,pagination:{clickable:!0},breakpoints:{600:{slidesPerView:2},900:{slidesPerView:3}},autoplay:{delay:1e3},loop:!0,modules:[Wt],style:{width:"100%",margin:"0 auto",paddingBottom:"10px"},children:e.map(s=>a.jsx(St,{children:a.jsx(ot,{sx:{backgroundColor:"rgba(255,255,255,0.08)",color:"white",borderRadius:2,textAlign:"center",p:3,"&:hover":{transform:"scale(1.05)",transition:"0.3s ease-in-out"}},children:a.jsxs(it,{children:[a.jsxs(m,{variant:"h6",sx:{fontWeight:"bold"},children:[r("seat")," ",s.typeName]}),a.jsx(m,{variant:"body1",sx:{color:"#FFC107",fontWeight:"bold",mb:1},children:v(s.price)}),a.jsxs(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:2},children:[a.jsx(X,{onClick:()=>B(s.seatTypeId),sx:{color:s.quantity>0?"#FFC107":"gray","&:hover":{color:"#FFC107"}},disabled:s.quantity===0,children:a.jsx(Ot,{})}),a.jsx(m,{variant:"h6",sx:{fontWeight:"bold",mx:2,minWidth:"30px"},children:s.quantity}),a.jsx(X,{onClick:()=>x(s.seatTypeId),sx:{color:"white","&:hover":{color:"#FFC107"}},children:a.jsx(Mt,{})})]})]})})},s.seatTypeId))})}),t&&a.jsx(T,{sx:{mt:4},children:a.jsx(H,{variant:"contained",sx:{backgroundColor:"#FFC107",color:"black",fontWeight:"bold",px:4,py:1.5,"&:hover":{backgroundColor:"#FFA000"}},onClick:w,children:r("ticket_price.next")})})]})};export{ke as M,Pe as S,Ne as T};
