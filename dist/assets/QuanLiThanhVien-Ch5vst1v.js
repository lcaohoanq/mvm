import{c as Z,j as L,u as Ae,a as Te,a6 as Ce,r as P,a4 as Xe,bM as ne,V as Ye,B as U,a8 as je,d as ue,an as De,x as He,T as fe,R as $e,ap as We}from"./index-C4JTrSJy.js";import{u as Fe}from"./useQuery-tWpKJJyf.js";import{f as Be,R as ze}from"./user.apis-CXku0iTm.js";import{M as Ne}from"./ManagementPageLayout-CbLfOBqD.js";import{G as ke}from"./GridActionsCellItem-DhVgFxuf.js";const qe=Z(L.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle"),_e=Z(L.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),oe=Z(L.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Oe=Z([L.jsx("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87"},"0"),L.jsx("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),L.jsx("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"},"2")],"PeopleAlt"),Pe=Z(L.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");function me(e){return typeof e=="object"&&e!==null&&"x"in e&&"y"in e&&"unit"in e&&typeof e.unit=="string"&&typeof e.x=="object"&&typeof e.y=="object"&&"topLeft"in e.x&&"topRight"in e.x&&"bottomRight"in e.x&&"bottomLeft"in e.x&&"topLeft"in e.y&&"topRight"in e.y&&"bottomRight"in e.y&&"bottomLeft"in e.y}function be(e){var t;const n=e.match(/(\d+(?:\.\d+)?)(px|%)/g);if(!n)return{x:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},y:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},unit:"px"};const o=n.map(h=>{const[a,m,v]=h.match(/(\d+(?:\.\d+)?)(px|%)/)??[];return{value:parseFloat(m),unit:v}}),i=((t=o[0])==null?void 0:t.unit)||"px";if(o.some(h=>h.unit!==i))throw new Error("Inconsistent units in border-radius string.");const[c,r,s,u]=o.map(h=>h.value),w={topLeft:c??0,topRight:r??c??0,bottomRight:s??c??0,bottomLeft:u??r??c??0};return{x:{...w},y:{...w},unit:i}}function Re({x:e,y:t,unit:n},o,i){if(n==="px"){const c={topLeft:e.topLeft/o,topRight:e.topRight/o,bottomLeft:e.bottomLeft/o,bottomRight:e.bottomRight/o},r={topLeft:t.topLeft/i,topRight:t.topRight/i,bottomLeft:t.bottomLeft/i,bottomRight:t.bottomRight/i};return{x:c,y:r,unit:"px"}}else if(n==="%")return{x:e,y:t,unit:"%"};return{x:e,y:t,unit:n}}function J(e){return`
    ${e.x.topLeft}${e.unit} ${e.x.topRight}${e.unit} ${e.x.bottomRight}${e.unit} ${e.x.bottomLeft}${e.unit}
    /
    ${e.y.topLeft}${e.unit} ${e.y.topRight}${e.unit} ${e.y.bottomRight}${e.unit} ${e.y.bottomLeft}${e.unit}
  `}function he(e){return e.x.topLeft===0&&e.x.topRight===0&&e.x.bottomRight===0&&e.x.bottomLeft===0&&e.y.topLeft===0&&e.y.topRight===0&&e.y.bottomRight===0&&e.y.bottomLeft===0}function pe(e){return typeof e=="object"&&"x"in e&&"y"in e}function $(e,t){return{x:e,y:t}}function Ge(e,t){return $(e.x+t.x,e.y+t.y)}function Ve(e,t){return $(e.x-t.x,e.y-t.y)}function Ue(e,t){return $(e.x*t,e.y*t)}function H(e,t,n){return e+(t-e)*n}function Qe(e,t,n){return Ge(e,Ue(Ve(t,e),n))}function Se(e,t,n){return{x:{topLeft:H(e.x.topLeft,t.x.topLeft,n),topRight:H(e.x.topRight,t.x.topRight,n),bottomRight:H(e.x.bottomRight,t.x.bottomRight,n),bottomLeft:H(e.x.bottomLeft,t.x.bottomLeft,n)},y:{topLeft:H(e.y.topLeft,t.y.topLeft,n),topRight:H(e.y.topRight,t.y.topRight,n),bottomRight:H(e.y.bottomRight,t.y.bottomRight,n),bottomLeft:H(e.y.bottomLeft,t.y.bottomLeft,n)},unit:e.unit}}function Ze(e,t,n){return V((n-e)/(t-e),0,1)}function K(e,t,n,o,i){return H(n,o,Ze(e,t,i))}function V(e,t,n){return Math.min(Math.max(e,t),n)}const Ke={duration:350,easing:e=>e};function Me(e,t,n,o){let i=!1;const c=()=>{i=!0},r={...Ke,...o};let s;function u(w){s===void 0&&(s=w);const h=w-s,a=V(h/r.duration,0,1),m=Object.keys(e),v=Object.keys(t);if(!m.every(d=>v.includes(d))){console.error("animate Error: `from` keys are different than `to`");return}const x={};m.forEach(d=>{typeof e[d]=="number"&&typeof t[d]=="number"?x[d]=H(e[d],t[d],r.easing(a)):me(e[d])&&me(t[d])?x[d]=Se(e[d],t[d],r.easing(a)):pe(e[d])&&pe(t[d])&&(x[d]=Qe(e[d],t[d],r.easing(a)))}),n(x,a>=1,a),a<1&&!i&&requestAnimationFrame(u)}return requestAnimationFrame(u),c}const Je={startDelay:0,targetEl:null};function et(e,t){const n={...Je,...t};let o=e.el(),i=!1,c=null,r=null,s=null,u=null,w=0,h=0,a=0,m=0,v=0,x=0,d=0,I=0,l=0,E=0,S=null,g;o.addEventListener("pointerdown",M),document.body.addEventListener("pointerup",b),document.body.addEventListener("pointermove",T),document.body.addEventListener("touchmove",f,{passive:!1});function M(p){if(n.targetEl&&p.target!==n.targetEl&&!n.targetEl.contains(p.target)||i||!p.isPrimary)return;n.startDelay>0?(s==null||s({el:p.target}),g=setTimeout(()=>{Y()},n.startDelay)):Y();function Y(){S=p.target;const j=e.boundingRect(),q=e.layoutRect();v=q.x,x=q.y,a=j.x-v,m=j.y-x,w=p.clientX-a,h=p.clientY-m,d=p.clientX,I=p.clientY,l=(p.clientX-j.x)/j.width,E=(p.clientY-j.y)/j.height,i=!0,T(p)}}function y(){const p=e.layoutRect();w-=v-p.x,h-=x-p.y,v=p.x,x=p.y}function b(p){if(!i){g&&(clearTimeout(g),g=null,u==null||u({el:p.target}));return}if(!p.isPrimary)return;i=!1;const Y=p.clientX-d,j=p.clientY-I;r==null||r({x:a,y:m,pointerX:p.clientX,pointerY:p.clientY,width:Y,height:j,relativeX:l,relativeY:E,el:S}),S=null}function T(p){if(!i){g&&(clearTimeout(g),g=null,u==null||u({el:p.target}));return}if(!p.isPrimary)return;const Y=p.clientX-d,j=p.clientY-I,q=a=p.clientX-w,ee=m=p.clientY-h;c==null||c({width:Y,height:j,x:q,y:ee,pointerX:p.clientX,pointerY:p.clientY,relativeX:l,relativeY:E,el:S})}function f(p){if(!i)return!0;p.preventDefault()}function A(p){c=p}function W(p){r=p}function B(p){s=p}function F(p){u=p}function C(){o.removeEventListener("pointerdown",M),o=e.el(),o.addEventListener("pointerdown",M)}function z(){e.el().removeEventListener("pointerdown",M),document.body.removeEventListener("pointerup",b),document.body.removeEventListener("pointermove",T),document.body.removeEventListener("touchmove",f),c=null,r=null,s=null,u=null}return{onDrag:A,onDrop:W,onHold:B,onRelease:F,onElementUpdate:C,destroy:z,readjust:y}}function tt(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function nt(e){return 1-Math.pow(1-e,3)}function Q(e){return{x:e.x,y:e.y,width:e.width,height:e.height}}function ot(e){const t=e.getBoundingClientRect();let n=0,o=0,i=e.parentElement;for(;i;){const c=getComputedStyle(i).transform;if(c&&c!=="none"){const r=c.match(/matrix.*\((.+)\)/);if(r){const s=r[1].split(", ").map(Number);n+=s[4]||0,o+=s[5]||0}}i=i.parentElement}return{y:t.top-o,x:t.left-n,width:t.width,height:t.height}}function ie(e){let t=e,n=0,o=0;for(;t;)n+=t.offsetTop,o+=t.offsetLeft,t=t.offsetParent;return{x:o,y:n,width:e.offsetWidth,height:e.offsetHeight}}function ge(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function it(e){let t=e,n=0,o=0;for(;t;){const i=c=>{const r=getComputedStyle(c);return/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)};if(t===document.body){o+=window.scrollX,n+=window.scrollY;break}i(t)&&(o+=t.scrollLeft,n+=t.scrollTop),t=t.parentElement}return{x:o,y:n}}function re(e){let t="unread",n,o,i,c,r,s,u,w,h,a,m;function v(){n=e.currentTransform(),o=ot(e.el()),i=it(e.el()),m=ye(e.el()).map(({parent:l,children:E})=>({parent:{el:l,initialRect:Q(l.getBoundingClientRect())},children:E.filter(S=>S instanceof HTMLElement).map(S=>{const g=S;return g.originalBorderRadius||(g.originalBorderRadius=getComputedStyle(S).borderRadius),{el:S,borderRadius:be(g.originalBorderRadius),initialRect:Q(S.getBoundingClientRect())}})})),t="readInitial"}function x(){if(t!=="readInitial")throw new Error("FlipView: Cannot read final values before reading initial values");h=e.layoutRect(),s=o.width/h.width,u=o.height/h.height,c=o.x-h.x-n.dragX+i.x,r=o.y-h.y-n.dragY+i.y,w=Re(e.borderRadius(),s,u);const l=ye(e.el());m=m.map(({parent:S,children:g},M)=>{const y=l[M].parent;return{parent:{...S,el:y,finalRect:ie(y)},children:g.map((b,T)=>{const f=l[M].children[T];let A=ie(f);return f.hasAttribute("data-swapy-text")&&(A={...A,width:b.initialRect.width,height:b.initialRect.height}),{...b,el:f,finalRect:A}})}});const E={translateX:c,translateY:r,scaleX:s,scaleY:u};e.el().style.transformOrigin="0 0",e.el().style.borderRadius=J(w),e.setTransform(E),a=[],m.forEach(({parent:S,children:g})=>{const M=g.map(({el:y,initialRect:b,finalRect:T,borderRadius:f})=>rt(y,b,T,f,S.initialRect,S.finalRect));a.push(...M)}),t="readFinal"}function d(){if(t!=="readFinal")throw new Error("FlipView: Cannot get transition values before reading");return{from:{width:o.width,height:o.height,translate:$(c,r),scale:$(s,u),borderRadius:w},to:{width:h.width,height:h.height,translate:$(0,0),scale:$(1,1),borderRadius:e.borderRadius()}}}function I(){if(t!=="readFinal")throw new Error("FlipView: Cannot get children transition values before reading");return a}return{readInitial:v,readFinalAndReverse:x,transitionValues:d,childrenTransitionData:I}}function rt(e,t,n,o,i,c){e.style.transformOrigin="0 0";const r=i.width/c.width,s=i.height/c.height,u=t.width/n.width,w=t.height/n.height,h=Re(o,u,w),a=t.x-i.x,m=n.x-c.x,v=t.y-i.y,x=n.y-c.y,d=(a-m*r)/r,I=(v-x*s)/s;return e.style.transform=`translate(${d}px, ${I}px) scale(${u/r}, ${w/s})`,e.style.borderRadius=J(h),{el:e,fromTranslate:$(d,I),fromScale:$(u,w),fromBorderRadius:h,toBorderRadius:o,parentScale:{x:r,y:s}}}function ye(e){const t=[];function n(o){const i=Array.from(o.children).filter(c=>c instanceof HTMLElement);i.length>0&&(t.push({parent:o,children:i}),i.forEach(c=>n(c)))}return n(e),t}function Ee(e){const t=[];let n=e,o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1};const i=be(window.getComputedStyle(n).borderRadius),c={el:()=>n,setTransform:r,clearTransform:s,currentTransform:()=>o,borderRadius:()=>i,layoutRect:()=>ie(n),boundingRect:()=>Q(n.getBoundingClientRect()),usePlugin:w,destroy:h,updateElement:a};function r(m){o={...o,...m},u()}function s(){o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1},u()}function u(){const{dragX:m,dragY:v,translateX:x,translateY:d,scaleX:I,scaleY:l}=o;m===0&&v===0&&x===0&&d===0&&I===1&&l===1?n.style.transform="":n.style.transform=`translate(${m+x}px, ${v+d}px) scale(${I}, ${l})`}function w(m,v){const x=m(c,v);return t.push(x),x}function h(){t.forEach(m=>m.destroy())}function a(m){if(!m)return;const v=n.hasAttribute("data-swapy-dragging"),x=n.style.cssText;n=m,v&&n.setAttribute("data-swapy-dragging",""),n.style.cssText=x,t.forEach(d=>d.onElementUpdate())}return c}const at={animation:"dynamic",enabled:!0,swapMode:"hover",dragOnHold:!1,autoScrollOnDrag:!1,dragAxis:"both",manualSwap:!1};function Ie(e){switch(e){case"dynamic":return{easing:nt,duration:300};case"spring":return{easing:tt,duration:350};case"none":return{easing:t=>t,duration:1}}}function lt(e,t){const n={...at,...t},o=st({slots:[],items:[],config:n});let i=[],c=[];r();function r(){if(!ft(e))throw new Error("Cannot create a Swapy instance because your HTML structure is invalid. Fix all above errors and then try!");i=Array.from(e.querySelectorAll("[data-swapy-slot]")).map(l=>ct(l,o)),o.setSlots(i),c=Array.from(e.querySelectorAll("[data-swapy-item]")).map(l=>dt(l,o)),o.setItems(c),o.syncSlotItemMap(),c.forEach(l=>{l.onDrag(({pointerX:E,pointerY:S})=>{u();let g=!1;i.forEach(M=>{const y=M.rect();ge({x:E,y:S},y)&&(g=!0,M.isHighlighted()||M.highlight())}),!g&&o.config().swapMode==="drop"&&l.slot().highlight(),n.swapMode==="hover"&&s(l,{pointerX:E,pointerY:S})}),l.onDrop(({pointerX:E,pointerY:S})=>{w(),n.swapMode==="drop"&&s(l,{pointerX:E,pointerY:S})}),l.onHold(()=>{u()}),l.onRelease(()=>{w()})})}function s(l,{pointerX:E,pointerY:S}){i.forEach(g=>{const M=g.rect();if(ge({x:E,y:S},M)){if(l.id()===g.itemId())return;o.config().swapMode==="hover"&&l.setContinuousDrag(!0);const y=l.slot(),b=g.item();if(!o.eventHandlers().onBeforeSwap({fromSlot:y.id(),toSlot:g.id(),draggingItem:l.id(),swapWithItem:(b==null?void 0:b.id())||""}))return;if(o.config().manualSwap){const T=structuredClone(o.slotItemMap());o.swapItems(l,g);const f=o.slotItemMap(),A=re(l.view());A.readInitial();const W=b?re(b.view()):null;W==null||W.readInitial();let B=0,F=0;const C=le(l.view().el());C instanceof Window?(B=C.scrollY,F=C.scrollX):(B=C.scrollTop,F=C.scrollLeft),o.eventHandlers().onSwap({oldSlotItemMap:T,newSlotItemMap:f,fromSlot:y.id(),toSlot:g.id(),draggingItem:l.id(),swappedWithItem:(b==null?void 0:b.id())||""}),requestAnimationFrame(()=>{const z=e.querySelectorAll("[data-swapy-item]");o.items().forEach(p=>{const Y=Array.from(z).find(j=>j.dataset.swapyItem===p.id());p.view().updateElement(Y)}),o.syncSlotItemMap(),A.readFinalAndReverse(),W==null||W.readFinalAndReverse(),ae(l,A),b&&W&&ae(b,W),C.scrollTo({left:F,top:B})})}else{let T=0,f=0;const A=le(l.view().el());A instanceof Window?(T=A.scrollY,f=A.scrollX):(T=A.scrollTop,f=A.scrollLeft),we(l,g,!0),b&&we(b,y),A.scrollTo({left:f,top:T});const W=o.slotItemMap();o.syncSlotItemMap();const B=o.slotItemMap();o.eventHandlers().onSwap({oldSlotItemMap:W,newSlotItemMap:B,fromSlot:y.id(),toSlot:g.id(),draggingItem:l.id(),swappedWithItem:(b==null?void 0:b.id())||""})}}})}function u(){e.querySelectorAll("img").forEach(l=>{l.style.pointerEvents="none"}),e.style.userSelect="none",e.style.webkitUserSelect="none"}function w(){e.querySelectorAll("img").forEach(l=>{l.style.pointerEvents=""}),e.style.userSelect="",e.style.webkitUserSelect=""}function h(l){o.config().enabled=l}function a(l){o.eventHandlers().onSwapStart=l}function m(l){o.eventHandlers().onSwap=l}function v(l){o.eventHandlers().onSwapEnd=l}function x(l){o.eventHandlers().onBeforeSwap=l}function d(){I(),requestAnimationFrame(()=>{r()})}function I(){c.forEach(l=>l.destroy()),i.forEach(l=>l.destroy()),o.destroy(),c=[],i=[]}return{enable:h,slotItemMap:()=>o.slotItemMap(),onSwapStart:a,onSwap:m,onSwapEnd:v,onBeforeSwap:x,update:d,destroy:I}}function st({slots:e,items:t,config:n}){const o={slots:e,items:t,config:n,slotItemMap:{asObject:{},asMap:new Map,asArray:[]},zIndexCount:1,eventHandlers:{onSwapStart:()=>{},onSwap:()=>{},onSwapEnd:()=>{},onBeforeSwap:()=>!0},scrollOffsetWhileDragging:{x:0,y:0},scrollHandler:null};let i={...o};const c=a=>{var m;(m=i.scrollHandler)==null||m.call(i,a)};window.addEventListener("scroll",c);function r(a){return i.slots.find(m=>m.id()===a)}function s(a){return i.items.find(m=>m.id()===a)}function u(){const a={},m=new Map,v=[];i.slots.forEach(x=>{var d;const I=x.id(),l=((d=x.item())==null?void 0:d.id())||"";a[I]=l,m.set(I,l),v.push({slot:I,item:l})}),i.slotItemMap={asObject:a,asMap:m,asArray:v}}function w(a,m){var v;const x=i.slotItemMap,d=a.id(),I=((v=m.item())==null?void 0:v.id())||"",l=m.id(),E=a.slot().id();x.asObject[l]=d,x.asObject[E]=I,x.asMap.set(l,d),x.asMap.set(E,I);const S=x.asArray.findIndex(M=>M.slot===l),g=x.asArray.findIndex(M=>M.slot===E);x.asArray[S].item=d,x.asArray[g].item=I}function h(){window.removeEventListener("scroll",c),i={...o}}return{slots:()=>i.slots,items:()=>i.items,config:()=>n,setItems:a=>i.items=a,setSlots:a=>i.slots=a,slotById:r,itemById:s,zIndex:(a=!1)=>a?++i.zIndexCount:i.zIndexCount,resetZIndex:()=>{i.zIndexCount=1},eventHandlers:()=>i.eventHandlers,syncSlotItemMap:u,slotItemMap:(a=!1)=>a?structuredClone(i.slotItemMap):i.slotItemMap,onScroll:a=>{i.scrollHandler=a},swapItems:w,destroy:h}}function ct(e,t){const n=Ee(e);function o(){return n.el().dataset.swapySlot}function i(){const h=n.el().children[0];return(h==null?void 0:h.dataset.swapyItem)||null}function c(){return Q(n.el().getBoundingClientRect())}function r(){const h=n.el().children[0];if(h)return t.itemById(h.dataset.swapyItem)}function s(){t.slots().forEach(h=>{h.view().el().removeAttribute("data-swapy-highlighted")})}function u(){s(),n.el().setAttribute("data-swapy-highlighted","")}function w(){}return{id:o,view:()=>n,itemId:i,rect:c,item:r,highlight:u,unhighlightAllSlots:s,isHighlighted:()=>n.el().hasAttribute("data-swapy-highlighted"),destroy:w}}function dt(e,t){const n=Ee(e),o={};let i=null,c=null,r=!1,s=!0,u;const w=ut();let h=()=>{},a=()=>{},m=()=>{},v=()=>{};const{onDrag:x,onDrop:d,onHold:I,onRelease:l}=n.usePlugin(et,{startDelay:t.config().dragOnHold?400:0,targetEl:F()}),E=$(0,0),S=$(0,0),g=$(0,0),M=$(0,0);let y=null,b=null;I(R=>{t.config().enabled&&(z()&&!C(R.el)||j()&&Y(R.el)||m==null||m(R))}),l(R=>{t.config().enabled&&(z()&&!C(R.el)||j()&&Y(R.el)||v==null||v(R))});function T(R){var X;q(),te().highlight(),(X=o.drop)==null||X.call(o);const D=t.slots().map(N=>N.view().boundingRect());t.slots().forEach((N,_)=>{const O=D[_];N.view().el().style.width=`${O.width}px`,N.view().el().style.maxWidth=`${O.width}px`,N.view().el().style.flexShrink="0",N.view().el().style.height=`${O.height}px`});const k=t.slotItemMap(!0);t.eventHandlers().onSwapStart({draggingItem:se(),fromSlot:ce(),slotItemMap:k}),c=k,n.el().style.position="relative",n.el().style.zIndex=`${t.zIndex(!0)}`,y=le(R.el),t.config().autoScrollOnDrag&&(i=ht(y,t.config().dragAxis),i.updatePointer({x:R.pointerX,y:R.pointerY})),E.x=window.scrollX,E.y=window.scrollY,g.x=0,g.y=0,y instanceof HTMLElement&&(S.x=y.scrollLeft,S.y=y.scrollTop,b=()=>{M.x=y.scrollLeft-S.x,M.y=y.scrollTop-S.y,n.setTransform({dragX:((u==null?void 0:u.width)||0)+g.x+M.x,dragY:((u==null?void 0:u.height)||0)+g.y+M.y})},y.addEventListener("scroll",b)),t.onScroll(()=>{g.x=window.scrollX-E.x,g.y=window.scrollY-E.y;const N=M.x||0,_=M.y||0;n.setTransform({dragX:((u==null?void 0:u.width)||0)+g.x+N,dragY:((u==null?void 0:u.height)||0)+g.y+_})})}x(R=>{var X;if(t.config().enabled){if(!r){if(z()&&!C(R.el)||j()&&Y(R.el))return;T(R)}r=!0,i&&i.updatePointer({x:R.pointerX,y:R.pointerY}),u=R,(X=o.drop)==null||X.call(o),w(()=>{n.el().style.position="relative";const D=R.width+g.x+M.x,k=R.height+g.y+M.y;t.config().dragAxis==="y"?n.setTransform({dragY:k}):t.config().dragAxis==="x"?n.setTransform({dragX:D}):n.setTransform({dragX:D,dragY:k}),h==null||h(R)})}}),d(R=>{if(!r)return;ee(),r=!1,s=!1,u=null,y&&(y.removeEventListener("scroll",b),b=null),y=null,M.x=0,M.y=0,g.x=0,g.y=0,i&&(i.destroy(),i=null),te().unhighlightAllSlots(),a==null||a(R),t.eventHandlers().onSwapEnd({slotItemMap:t.slotItemMap(),hasChanged:c!=null&&c.asMap?!mt(c==null?void 0:c.asMap,t.slotItemMap().asMap):!1}),c=null,t.onScroll(null),t.slots().forEach(D=>{D.view().el().style.width="",D.view().el().style.maxWidth="",D.view().el().style.flexShrink="",D.view().el().style.height=""}),t.config().manualSwap&&t.config().swapMode==="drop"?requestAnimationFrame(X):X();function X(){const D=n.currentTransform(),k=D.dragX+D.translateX,N=D.dragY+D.translateY;o.drop=Me({translate:$(k,N)},{translate:$(0,0)},({translate:_},O)=>{O?r||(n.clearTransform(),n.el().style.transformOrigin=""):n.setTransform({dragX:0,dragY:0,translateX:_.x,translateY:_.y}),O&&(t.items().forEach(de=>{de.isDragging()||(de.view().el().style.zIndex="")}),t.resetZIndex(),n.el().style.position="",s=!0)},Ie(t.config().animation))}});function f(R){h=R}function A(R){a=R}function W(R){m=R}function B(R){v=R}function F(){return n.el().querySelector("[data-swapy-handle]")}function C(R){const X=F();return X?X===R||X.contains(R):!1}function z(){return F()!==null}function p(){return Array.from(n.el().querySelectorAll("[data-swapy-no-drag]"))}function Y(R){const X=p();return!X||X.length===0?!1:X.includes(R)||X.some(D=>D.contains(R))}function j(){return p().length>0}function q(){n.el().setAttribute("data-swapy-dragging","")}function ee(){n.el().removeAttribute("data-swapy-dragging")}function Le(){h=null,a=null,m=null,v=null,u=null,c=null,i&&(i.destroy(),i=null),y&&b&&y.removeEventListener("scroll",b),n.destroy()}function se(){return n.el().dataset.swapyItem}function te(){return t.slotById(n.el().parentElement.dataset.swapySlot)}function ce(){return n.el().parentElement.dataset.swapySlot}return{id:se,view:()=>n,slot:te,slotId:ce,onDrag:f,onDrop:A,onHold:W,onRelease:B,destroy:Le,isDragging:()=>r,cancelAnimation:()=>o,dragEvent:()=>u,store:()=>t,continuousDrag:()=>s,setContinuousDrag:R=>s=R}}function we(e,t,n=!1){if(n){const i=t.item();i&&(t.view().el().style.position="relative",i.view().el().style.position="absolute")}else{const i=e.slot();i.view().el().style.position="",e.view().el().style.position=""}if(!e)return;const o=re(e.view());o.readInitial(),t.view().el().appendChild(e.view().el()),o.readFinalAndReverse(),ae(e,o)}function ut(){let e=!1;return t=>{e||(e=!0,requestAnimationFrame(()=>{t(),e=!1}))}}function ae(e,t){var n,o,i,c;(o=(n=e.cancelAnimation()).moveToSlot)==null||o.call(n),(c=(i=e.cancelAnimation()).drop)==null||c.call(i);const r=Ie(e.store().config().animation),s=t.transitionValues();let u=e.view().currentTransform(),w=0,h=!1;e.cancelAnimation().moveToSlot=Me({translate:s.from.translate,scale:s.from.scale,borderRadius:s.from.borderRadius},{translate:s.to.translate,scale:s.to.scale,borderRadius:s.to.borderRadius},({translate:a,scale:m,borderRadius:v},x,d)=>{if(e.isDragging()){w!==0&&(h=!0);const l=e.dragEvent().relativeX,E=e.dragEvent().relativeY;e.continuousDrag()?e.view().setTransform({translateX:H(u.translateX,u.translateX+(s.from.width-s.to.width)*l,r.easing(d-w)),translateY:H(u.translateY,u.translateY+(s.from.height-s.to.height)*E,r.easing(d-w)),scaleX:m.x,scaleY:m.y}):e.view().setTransform({scaleX:m.x,scaleY:m.y})}else u=e.view().currentTransform(),w=d,h?e.view().setTransform({scaleX:m.x,scaleY:m.y}):e.view().setTransform({dragX:0,dragY:0,translateX:a.x,translateY:a.y,scaleX:m.x,scaleY:m.y});const I=t.childrenTransitionData();I.forEach(({el:l,fromTranslate:E,fromScale:S,fromBorderRadius:g,toBorderRadius:M,parentScale:y})=>{const b=H(y.x,1,r.easing(d)),T=H(y.y,1,r.easing(d));l.style.transform=`translate(${E.x+(0-E.x/b)*r.easing(d)}px, ${E.y+(0-E.y/T)*r.easing(d)}px) scale(${H(S.x/b,1/b,r.easing(d))}, ${H(S.y/T,1/T,r.easing(d))})`,he(g)||(l.style.borderRadius=J(Se(g,M,r.easing(d))))}),he(v)||(e.view().el().style.borderRadius=J(v)),x&&(e.isDragging()||(e.view().el().style.transformOrigin="",e.view().clearTransform()),e.view().el().style.borderRadius="",I.forEach(({el:l})=>{l.style.transform="",l.style.transformOrigin="",l.style.borderRadius=""}))},r)}function G(...e){console.error("Swapy Error:",...e)}function ft(e){const t=e;let n=!0;const o=t.querySelectorAll("[data-swapy-slot]");t||(G("container passed to createSwapy() is undefined or null"),n=!1),o.forEach(s=>{const u=s,w=u.dataset.swapySlot,h=u.children,a=h[0];(!w||w.length===0)&&(G(u,"does not contain a slotId using data-swapy-slot"),n=!1),h.length>1&&(G("slot:",`"${w}"`,"cannot contain more than one element"),n=!1),a&&(!a.dataset.swapyItem||a.dataset.swapyItem.length===0)&&(G("slot",`"${w}"`,"does not contain an element with an item id using data-swapy-item"),n=!1)});const i=Array.from(o).map(s=>s.dataset.swapySlot),c=t.querySelectorAll("[data-swapy-item]"),r=Array.from(c).map(s=>s.dataset.swapyItem);if(xe(i)){const s=ve(i);G("your container has duplicate slot ids",`(${s.join(", ")})`),n=!1}if(xe(r)){const s=ve(r);G("your container has duplicate item ids",`(${s.join(", ")})`),n=!1}return n}function xe(e){return new Set(e).size!==e.length}function ve(e){const t=new Set,n=new Set;for(const o of e)t.has(o)?n.add(o):t.add(o);return Array.from(n)}function mt(e,t){if(e.size!==t.size)return!1;for(const[n,o]of e)if(t.get(n)!==o)return!1;return!0}function le(e){let t=e;for(;t;){const n=window.getComputedStyle(t),o=n.overflowY,i=n.overflowX;if((o==="auto"||o==="scroll")&&t.scrollHeight>t.clientHeight||(i==="auto"||i==="scroll")&&t.scrollWidth>t.clientWidth)return t;t=t.parentElement}return window}function ht(e,t){let n=!1,o,i=0,c=0,r=0,s=0,u=0,w=0,h=null;e instanceof HTMLElement?(o=Q(e.getBoundingClientRect()),i=e.scrollHeight-o.height,c=e.scrollWidth-o.width):(o={x:0,y:0,width:window.innerWidth,height:window.innerHeight},i=document.documentElement.scrollHeight-window.innerHeight,c=document.documentElement.scrollWidth-window.innerWidth);function a(){e instanceof HTMLElement?(r=e.scrollTop,s=e.scrollLeft):(r=window.scrollY,s=window.scrollX)}function m(d){n=!1;const I=o.y,l=o.y+o.height,E=o.x,S=o.x+o.width,g=Math.abs(I-d.y)<Math.abs(l-d.y),M=Math.abs(E-d.x)<Math.abs(S-d.x);if(a(),t!=="x")if(g){const y=I-d.y;if(y>=-100){const b=V(y,-100,0);u=-K(-100,0,0,5,b),n=!0}}else{const y=l-d.y;if(y<=100){const b=V(y,0,100);u=K(100,0,0,5,b),n=!0}}if(t!=="y")if(M){const y=E-d.x;if(y>=-100){const b=V(y,-100,0);w=-K(-100,0,0,5,b),n=!0}}else{const y=S-d.x;if(y<=100){const b=V(y,0,100);w=K(100,0,0,5,b),n=!0}}n&&(h&&cancelAnimationFrame(h),v())}function v(){a(),t!=="x"&&(u=r+u>=i?0:u),t!=="y"&&(w=s+w>=c?0:w),e.scrollBy({top:u,left:w}),n&&(h=requestAnimationFrame(v))}function x(){n=!1}return{updatePointer:m,destroy:x}}const vt=()=>{const e=Ae(),{t}=Te(),n=Ce(),o=P.useRef(null),i=P.useRef(null),c=Xe(),r=ne(c.breakpoints.down("sm")),s=ne(c.breakpoints.down("md")),u=ne(c.breakpoints.down("lg")),[w,h]=P.useState(["members","active","points","newMembers","inactive"]),{data:a,isLoading:m,error:v}=Fe({queryKey:["users","members"],queryFn:async()=>{const f=await Be(ze.Member);if(!f.isSuccess||!f.data)throw new Error(f.message||"Failed to fetch members");return f.data}}),x=(a==null?void 0:a.length)||0,d=(a==null?void 0:a.filter(f=>f.status===1).length)||0,I=new Date,l=(a==null?void 0:a.filter(f=>{const A=new Date(f.joinDate);return(I.getTime()-A.getTime())/(1e3*60*60*24)<=30}).length)||0,E=(a==null?void 0:a.filter(f=>f.gender===1).length)||0,S=(a==null?void 0:a.filter(f=>f.gender===2).length)||0,g=x?x-d:0,M=(a==null?void 0:a.reduce((f,A)=>f+(A.point||0),0))||0,y={members:{id:"members",title:t("common.stats.total_members")||"Total Members",value:x,icon:L.jsx(Oe,{sx:{fontSize:40}}),color:"#4051B5"},active:{id:"active",title:t("common.stats.active_members")||"Active Members",value:d,icon:L.jsx(oe,{sx:{fontSize:40}}),color:"#4CAF50"},newMembers:{id:"newMembers",title:t("common.stats.new_members_in30days")||"New Members",value:l,icon:L.jsx(qe,{sx:{fontSize:40}}),color:"#4DA1A9"},maleMembers:{id:"maleMembers",title:t("common.stats.male_members")||"Male Members",value:E,icon:L.jsx(oe,{sx:{fontSize:40}}),color:"#4CAF50"},femaleMembers:{id:"femaleMembers",title:t("common.stats.female_members")||"Female Members",value:S,icon:L.jsx(oe,{sx:{fontSize:40}}),color:"#4CAF50"},inactive:{id:"inactive",title:t("common.stats.inactive_members")||"Inactive Members",value:g,icon:L.jsx(_e,{sx:{fontSize:40}}),color:"#E50046"},points:{id:"points",title:t("common.stats.total_points")||"Total Points",value:M.toLocaleString(),icon:L.jsx(Pe,{sx:{fontSize:40}}),color:"#FF9800"}};P.useEffect(()=>{v&&Ye.error(v instanceof Error?v.message:"Failed to load members")},[v,n]),P.useEffect(()=>{let f;return i.current&&(f=setTimeout(()=>{try{o.current=lt(i.current,{animation:"spring",swapMode:"drop",autoScrollOnDrag:!0,enabled:!0,dragAxis:"both",dragOnHold:!1}),o.current.onSwap(A=>{console.log("Swap occurred:",A);const{fromSlot:W,toSlot:B}=A;h(F=>{const C=[...F],z=F.findIndex(Y=>Y===W),p=F.findIndex(Y=>Y===B);return z!==-1&&p!==-1&&([C[z],C[p]]=[C[p],C[z]]),C})})}catch(A){console.error("Swapy initialization error:",A)}},100)),()=>{if(clearTimeout(f),o.current)try{o.current.destroy()}catch(A){console.error("Error destroying Swapy:",A)}}},[]);const b=f=>e(`/admin/ql-thanh-vien/${f}`),T=P.useMemo(()=>[{field:"userName",headerName:t("common.table_header.user.username")||"Username",flex:.5,minWidth:90,maxWidth:r?80:120,renderCell:f=>L.jsx(U,{sx:{display:"flex",alignItems:"center"},children:L.jsx(je,{src:f.row.avatar||"/default-avatar.png",alt:f.row.fullName,sx:{width:r?24:32,height:r?24:32}})})},{field:"fullName",headerName:t("common.table_header.user.fullname")||"Full Name",flex:1,minWidth:120},{field:"email",headerName:t("common.table_header.user.email")||"Email",flex:1,minWidth:150,hide:r},{field:"phoneNumber",headerName:t("common.table_header.user.phone")||"Phone",flex:.8,minWidth:110,hide:s},{field:"idCard",headerName:t("common.table_header.user.id_card")||"Id Card",flex:.8,minWidth:120,hide:u,align:"left",renderCell:f=>f.row.idCard===""?"N/A":f.row.idCard},{field:"gender",headerName:t("common.table_header.user.gender")||"Gender",flex:.5,minWidth:80,maxWidth:100,hide:r,renderCell:f=>L.jsx(ue,{label:f.row.gender===0?"Male":"Female",color:f.row.gender===0?"info":"secondary",sx:{fontWeight:"bold",borderRadius:"16px",minWidth:s?"60px":"80px",minHeight:s?"24px":"30px",fontSize:s?"0.7rem":"0.8rem"}})},{field:"status",headerName:t("common.table_header.user.status")||"Status",align:"center",flex:.5,minWidth:80,maxWidth:100,renderCell:f=>L.jsx(ue,{label:f.row.status===1?"Active":"Inactive",color:f.row.status===1?"success":"error",sx:{fontWeight:"bold",borderRadius:"16px",minWidth:s?"60px":"80px",minHeight:s?"24px":"30px",fontSize:s?"0.7rem":"0.8rem"}})},{field:"point",headerName:t("common.table_header.user.points")||"Points",flex:.4,minWidth:70,type:"number",align:"center",hide:r},{field:"actions",headerName:t("common.table_header.actions")||"Actions",type:"actions",flex:.4,minWidth:60,getActions:f=>[L.jsx(ke,{icon:L.jsx(De,{}),label:"Edit",onClick:()=>b(f.row.userId)})]}],[t,r,s,u]);return L.jsx(Ne,{children:L.jsxs(U,{sx:{width:"100%",overflow:"hidden",px:{xs:1,sm:2},"& .MuiDataGrid-root":{border:"none",backgroundColor:"white",borderRadius:2,boxShadow:1,"& .MuiDataGrid-columnHeaders":{backgroundColor:"primary.main",color:"black",fontWeight:"bold"},"& .MuiDataGrid-cell":{borderBottom:"1px solid #f0f0f0",whiteSpace:"normal",padding:r?"8px 4px":"8px 16px"},"& .MuiDataGrid-row:hover":{backgroundColor:"#f5f5f5"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold",fontSize:r?"0.75rem":"0.875rem",whiteSpace:"normal",lineHeight:1.2,overflow:"visible"},"& .MuiDataGrid-cellContent":{fontSize:r?"0.75rem":"0.875rem",overflow:"hidden",textOverflow:"ellipsis"}}},children:[L.jsx("div",{ref:i,className:"swapy-container",style:{marginBottom:"1.5rem",display:"flex",flexWrap:"wrap",gap:"8px",justifyContent:"center"},children:w.map(f=>L.jsx("div",{className:"swapy-slot","data-swapy-slot":f,style:{margin:"4px",flex:r?"1 1 100%":s?"1 1 45%":"1 1 230px",minWidth:r?"100%":"230px",maxWidth:r?"100%":"350px",display:"inline-block"},children:L.jsx("div",{className:"swapy-item","data-swapy-item":f,style:{cursor:"grab"},children:L.jsxs(He,{elevation:3,sx:{p:r?2:3,borderRadius:2,height:"100%",borderLeft:`5px solid ${y[f].color}`,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:"0 10px 20px rgba(0,0,0,0.15)"}},children:[L.jsxs(U,{children:[L.jsx(fe,{variant:r?"subtitle1":"h6",fontWeight:"bold",children:y[f].title}),L.jsx(fe,{variant:r?"h5":"h4",fontWeight:"bold",mt:1,children:y[f].value})]}),L.jsx(U,{sx:{backgroundColor:`${y[f].color}20`,p:r?1.5:2,ml:2,borderRadius:"50%",color:y[f].color,display:"flex",alignItems:"center",justifyContent:"center"},children:$e.cloneElement(y[f].icon,{sx:{fontSize:r?30:40}})})]})})},f))}),L.jsx(U,{sx:{backgroundColor:"white",borderRadius:2,boxShadow:1,p:{xs:1,sm:2},mb:4,width:"100%",overflow:"hidden"},children:L.jsx(We,{rows:a||[],columns:T,loading:m,getRowId:f=>f.userId,initialState:{pagination:{paginationModel:{pageSize:r?5:10}},columns:{columnVisibilityModel:{email:!r,phoneNumber:!s,idCard:!u,gender:!r,point:!r}}},pageSizeOptions:r?[5,10]:[5,10,25],disableRowSelectionOnClick:!0,autoHeight:!0,density:s?"compact":"standard",sx:{width:"100%","& .MuiDataGrid-virtualScroller":{overflow:"auto"},"& .MuiDataGrid-main":{width:"100%",overflow:"hidden"},"& .MuiDataGrid-columnHeaders, & .MuiDataGrid-footerContainer":{width:"100% !important"},"& .MuiDataGrid-virtualScrollerContent":{width:"100% !important"}}})})]})})};export{vt as default};
