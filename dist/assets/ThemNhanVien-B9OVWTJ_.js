import{r as g,j as r,C as D,B as u,l as t,h as x,m as P,T as F,o as f,aq as S,b as v,e as q,V as C}from"./index-BZsQtJZU.js";import{u as M}from"./formik.esm-CirSGttK.js";import{c as A,a as s,e as R,b as W,d as $}from"./index.esm-ChjHs5Nu.js";import{M as E}from"./ManagementPageLayout-DPRmNrdR.js";import{F as U}from"./FileUploadOutlined-DEqUnIlO.js";import{V as I,a as L}from"./VisibilityOff-C8M4H1dn.js";import{R as H,a as b}from"./RadioGroup-ChXLIw9c.js";const O=/(84|0[3|5|7|8|9])+([0-9]{8})\b/,G=/^[0-9]{9,12}$/,_=()=>{const i="https://api.dicebear.com/9.x/adventurer/svg?seed=Katherine",[c,d]=g.useState(i),[j,h]=g.useState(!1),[p,w]=g.useState(!1),e=M({initialValues:{avatar:null,userName:"",password:"",confirmPassword:"",fullName:"",birthDate:"",gender:0,email:"",idCard:"",phoneNumber:"",address:""},validationSchema:A({userName:s().min(5,"Tài khoản phải có ít nhất 5 ký tự").max(20,"Tài khoản không được vượt quá 20 ký tự").required("Vui lòng nhập tài khoản"),password:s().min(8,"Mật khẩu phải có ít nhất 8 ký tự").matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character.").required("Vui lòng nhập mật khẩu"),confirmPassword:s().oneOf([$("password")],"Mật khẩu không khớp").required("Vui lòng xác nhận mật khẩu"),fullName:s().required("Vui lòng nhập họ tên"),birthDate:W().max(new Date,"Ngày sinh không hợp lệ").required("Vui lòng nhập ngày sinh"),gender:R().required("Vui lòng chọn giới tính"),email:s().email("Email không hợp lệ").required("Vui lòng nhập email"),idCard:s().matches(G,"Số CMND/CCCD không hợp lệ").required("Vui lòng nhập số CMND/CCCD"),phoneNumber:s().matches(O,"Số điện thoại không hợp lệ").required("Vui lòng nhập số điện thoại"),address:s().required("Vui lòng nhập địa chỉ")}),onSubmit:async n=>{const{confirmPassword:a,...m}=n,o={...m,avatar:j?c:null};console.log("Form submitted with values:",o);try{const l=await q.post("/auth/register",o);if(console.log(`Response: ${JSON.stringify(l.data,null,2)}`),l.status===200)C.success("Tạo nhân viên mới thành công");else{const T=l.data;throw new Error(T.reason||"Có lỗi xảy ra khi tạo nhân viên mới")}}catch(l){console.log(`Error: ${l}`),C.error("Có lỗi xảy ra khi tạo nhân viên mới")}}}),N=n=>{var m;const a=(m=n.target.files)==null?void 0:m[0];if(a){e.setFieldValue("avatar",a);const o=new FileReader;o.onload=()=>{const l=o.result;d(l),h(!0)},o.readAsDataURL(a)}n.target.value=""},y=n=>{const a=n.target.value;a?(d(a),h(!0)):(d(i),h(!1))},B=()=>{e.resetForm(),d(i),h(!1)},k=n=>{const a=n.target.value==="Male"?0:1;e.setFieldValue("gender",a)},V=()=>{w(!p)};return r.jsx(E,{children:r.jsx(D,{maxWidth:"lg",children:r.jsxs(u,{component:"form",onSubmit:e.handleSubmit,sx:{mt:2},children:[r.jsxs(u,{sx:{mb:2},children:[r.jsx(t,{fullWidth:!0,margin:"normal",label:"Hình ảnh (URL)",variant:"standard",type:"text",value:c,onChange:y,InputProps:{endAdornment:r.jsxs(x,{component:"label",children:[r.jsx(U,{}),r.jsx("input",{style:{display:"none"},type:"file",accept:"image/*",hidden:!0,onChange:N})]})}}),r.jsx(u,{sx:{mt:1,display:"flex",justifyContent:"center"},children:r.jsx("img",{src:c,alt:"Avatar preview",style:{height:"100px",width:"100px",objectFit:"cover",borderRadius:"50%",border:"1px solid #eee"},onError:n=>{const a=n.target;a.src=i,d(i),h(!1)}})})]}),r.jsx(t,{name:"userName",label:"Tài khoản",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.userName,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.userName&&!!e.errors.userName,helperText:e.touched.userName&&e.errors.userName}),r.jsx(t,{name:"password",label:"Mật khẩu",variant:"standard",fullWidth:!0,margin:"normal",type:p?"text":"password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,InputProps:{endAdornment:r.jsx(P,{position:"end",sx:{mr:1},children:r.jsx(x,{onClick:V,edge:"end",sx:{"&:hover":{backgroundColor:"rgba(230, 195, 0, 0.1)"}},children:p?r.jsx(I,{sx:{color:"#666"}}):r.jsx(L,{sx:{color:"#666"}})})})}}),r.jsx(t,{name:"confirmPassword",label:"Nhập lại mật khẩu",variant:"standard",fullWidth:!0,margin:"normal",type:"password",value:e.values.confirmPassword,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.confirmPassword&&!!e.errors.confirmPassword,helperText:e.touched.confirmPassword&&e.errors.confirmPassword}),r.jsx(t,{name:"fullName",label:"Họ tên",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.fullName,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.fullName&&!!e.errors.fullName,helperText:e.touched.fullName&&e.errors.fullName}),r.jsx(t,{name:"birthDate",label:"Ngày sinh",variant:"standard",fullWidth:!0,margin:"normal",type:"date",value:e.values.birthDate,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.birthDate&&!!e.errors.birthDate,helperText:e.touched.birthDate&&e.errors.birthDate,InputLabelProps:{shrink:!0}}),r.jsxs(u,{sx:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-start",my:2},children:[r.jsx(F,{children:"Giới tính"}),r.jsxs(H,{name:"gender",value:e.values.gender===0?"Male":"Female",onChange:k,sx:{display:"flex",gap:10,flexDirection:"row"},children:[r.jsx(f,{value:"Male",control:r.jsx(b,{}),label:"Nam"}),r.jsx(f,{value:"Female",control:r.jsx(b,{}),label:"Nữ"})]}),e.touched.gender&&e.errors.gender&&r.jsx(S,{error:!0,children:e.errors.gender})]}),r.jsx(t,{name:"email",label:"Email",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email}),r.jsx(t,{name:"idCard",label:"Số CMND",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.idCard,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.idCard&&!!e.errors.idCard,helperText:e.touched.idCard&&e.errors.idCard}),r.jsx(t,{name:"phoneNumber",label:"Số điện thoại",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.phoneNumber,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.phoneNumber&&!!e.errors.phoneNumber,helperText:e.touched.phoneNumber&&e.errors.phoneNumber}),r.jsx(t,{name:"address",label:"Địa chỉ",variant:"standard",fullWidth:!0,margin:"normal",value:e.values.address,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.address&&!!e.errors.address,helperText:e.touched.address&&e.errors.address}),r.jsxs(u,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[r.jsx(v,{onClick:B,color:"error",variant:"contained",type:"button",children:"Hủy"}),r.jsx(v,{color:"primary",variant:"contained",type:"submit",disabled:e.isSubmitting,children:"Lưu"})]})]})})})};export{_ as default};
