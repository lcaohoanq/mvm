import{a as k,u as W,r,j as e,L as T,B as s,C as E,T as a,G as S,d as R,b as u,M as B,e as P}from"./index-ChydTw30.js";import{S as U}from"./ScrollToTop-DLokQQeX.js";import{C as $,P as A}from"./PlayCircleOutlineOutlined--Ex_E-XA.js";import{S as G}from"./ScrollFloat-CNbLT-dO.js";import{P as _}from"./Pagination-DsOYbAM_.js";import{f as M}from"./format-csk1fyom.js";import{p as C}from"./parseISO-DYw7kXTp.js";import{U as Y}from"./UserDetailLayout-Bdf3zFhg.js";const q=()=>{const{t:i}=k(),f=W(),[l,x]=r.useState([]),[c,d]=r.useState(!0),[h,m]=r.useState(!1),[n,w]=r.useState(null),[b,F]=r.useState(1),g=8,N=0,z=100;r.useEffect(()=>{(async()=>{try{d(!0);const o=await P.get(`/movie/showing/page/${N}/size/${z}`);console.log("Now showing movies:",o.data),x(o.data)}catch(o){console.error("Error fetching now showing movies:",o)}finally{d(!1)}})()},[]);const I=t=>{let o=t.replace("youtu.be","youtube.com/embed");o=o.replace("watch?v=","embed/"),o=o+"?autoplay=1",w(o),m(!0)},v=()=>{m(!1),w(null)},j=Math.ceil(l.length/g),y=b*g,O=y-g,L=l.slice(O,y),D=(t,o)=>{F(o),window.scrollTo({top:0,behavior:"smooth"})};return c?e.jsx(T,{}):e.jsxs(s,{children:[e.jsxs(E,{maxWidth:"xl",sx:{pb:{xs:4,sm:6,md:8},position:"relative",zIndex:1},children:[e.jsx(s,{sx:{textAlign:"center",mb:{xs:4,sm:5,md:6}},children:e.jsx(G,{animationDuration:1,ease:"back.inOut(2)",scrollStart:"center bottom+=50%",scrollEnd:"bottom bottom-=40%",stagger:.08,children:e.jsx(a,{variant:"h3",fontWeight:"bold",sx:{color:"white",textTransform:"uppercase",fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.5rem"}},children:i("now_showing")})})}),e.jsx(S,{container:!0,spacing:3,children:L.map((t,o)=>e.jsx(S,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(s,{className:"movie-card",sx:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"rgba(28, 28, 28, 0.6)",borderRadius:"12px",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 20px rgba(0,0,0,0.3)"}},children:[e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(s,{sx:{position:"relative",overflow:"hidden",height:{xs:"200px",sm:"250px",md:"300px"},width:"100%"},children:e.jsx("img",{src:t.image,alt:t.movieName,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"contain",transition:"transform 0.5s ease"},onMouseOver:p=>{p.currentTarget.style.transform="scale(1.05)"},onMouseOut:p=>{p.currentTarget.style.transform="scale(1)"}})}),e.jsx(R,{icon:e.jsx($,{}),label:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(a,{variant:"caption",sx:{fontWeight:"bold"},children:M(C(t.postDate),"MMM")}),e.jsx(a,{variant:"caption",children:M(C(t.postDate),"dd, yyyy")})]}),sx:{position:"absolute",top:0,left:0,backgroundColor:"orange",color:"white",fontWeight:"bold",borderRadius:"3px 0 3px 0","& .MuiSvgIcon-root":{color:"white",fontSize:"1rem"}}})]}),e.jsxs(s,{sx:{p:2.5,display:"flex",flexDirection:"column",flexGrow:1},children:[e.jsx(a,{variant:"h6",sx:{color:"white",height:"3em",textAlign:"center",mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",fontSize:{xs:"1rem",sm:"1.1rem",md:"1.2rem"}},children:t.movieName}),e.jsxs(s,{sx:{display:"flex",gap:1,mt:"auto",justifyContent:"space-between"},children:[e.jsxs(u,{variant:"text",sx:{color:"#FFFFFF",display:"flex",alignItems:"center",gap:.5,"&:hover":{color:"#FFD700"}},onClick:()=>I(t.trailer),children:[e.jsx(A,{}),e.jsx(a,{variant:"button",sx:{textDecoration:"underline",fontSize:{xs:"0.7rem",sm:"0.8rem"}},children:i("view_trailer")})]}),e.jsx(u,{variant:"contained",sx:{backgroundColor:"yellow",color:"black",fontWeight:"bold",transition:"transform 0.3s ease, background-color 0.3s ease","&:hover":{backgroundColor:"#FFD700",transform:"scale(1.05)"}},onClick:()=>f(`/ticket/${t.movieId}`),children:i("book_ticket")})]})]})]})},o))}),j>1&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(_,{count:j,color:"primary",page:b,onChange:D,sx:{"& .MuiPaginationItem-root":{color:"white",fontSize:"1.1rem",mx:.5},"& .Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.2) !important"}}})})]}),e.jsx(B,{open:h,onClose:v,closeAfterTransition:!0,sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0, 0, 0, 0.8)"},children:e.jsxs(s,{sx:{position:"relative",width:"80%",maxWidth:"1000px",aspectRatio:"16/9",bgcolor:"transparent"},children:[e.jsx(u,{sx:{position:"absolute",top:10,right:10,color:"white",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"50%",minWidth:"40px",height:"40px",zIndex:10,"&:hover":{backgroundColor:"rgba(255,0,0,0.7)"}},onClick:v,children:"âœ–"}),n&&e.jsx("iframe",{width:"100%",height:"100%",src:n,title:"Movie Trailer",frameBorder:"0",allow:"autoplay; encrypted-media; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,borderRadius:"10px"}})]})}),e.jsx(U,{})]})},H=({children:i})=>e.jsx(Y,{children:i}),J=r.memo(H),se=()=>{const{t:i}=k(),[f,l]=r.useState([]),[x,c]=r.useState(!0),d=0,h=100;return r.useEffect(()=>{(async()=>{try{c(!0);const n=await P.get(`/movie/showing/page/${d}/size/${h}`);console.log("Now showing movies:",n.data),l(n.data)}catch(n){console.error("Error fetching now showing movies:",n)}finally{c(!1)}})()},[i]),x?e.jsx(T,{}):e.jsx(J,{children:e.jsx(q,{})})};export{se as default};
