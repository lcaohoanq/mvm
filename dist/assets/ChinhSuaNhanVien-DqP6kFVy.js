import{W,u as U,r as s,j as e,L,C as V,B as i,T as f,ak as t,l as n,h as N,b as u,o as g}from"./index-CmSrV0e4.js";import{u as D}from"./useQuery-CXK_ViA-.js";import{a as k}from"./user.apis-b3PE4-VX.js";import{M as w}from"./ManagementPageLayout-CDsNXoK3.js";import{F as E}from"./FileUploadOutlined-CoZWXJUc.js";import{R as P,a as h}from"./RadioGroup-BQFM482Z.js";const O=()=>{const{id:c}=W(),j=U(),{data:a=null,isLoading:y,error:v}=D({queryKey:["employeeDetail",c],queryFn:async()=>{const l=await k(c);if(!l.isSuccess||!l.data)throw new Error(l.message||"Failed to fetch employee data");return l.data}}),[r,o]=s.useState(null),[b,x]=s.useState(null),m=s.useRef(null);if(s.useEffect(()=>{a&&a.avatar&&o(a.avatar)},[a]),s.useEffect(()=>{r&&console.log("Image URL updated:",r)},[r]),y)return e.jsx(L,{});if(v)return e.jsx("div",{children:"Failed to fetch data"});if(!a)return e.jsx("div",{children:"No employee data found"});const _=l=>{var p;const d=(p=l.target.files)==null?void 0:p[0];if(d){console.log(d);const R=URL.createObjectURL(d);o(R),x(d)}l.target.value=""},C=l=>{o(l.target.value)},F=()=>{o(null),x(null),m.current&&(m.current.value="")},I=()=>{console.log("Image to save:",b||r)};return e.jsx(w,{children:e.jsx(V,{maxWidth:"md",children:e.jsxs(i,{sx:{py:4},children:[e.jsx(f,{variant:"h4",component:"h1",sx:{mb:4},children:t("admin.employee_management.edit")}),e.jsxs(i,{sx:{mb:2},children:[e.jsx(n,{fullWidth:!0,margin:"normal",label:"Hình ảnh",variant:"standard",value:r||"",onChange:C,InputProps:{endAdornment:e.jsxs(N,{component:"label",children:[e.jsx(E,{}),e.jsx("input",{ref:m,style:{display:"none"},type:"file",accept:"image/*",hidden:!0,onChange:_,name:"[licenseFile]"})]})}}),r&&e.jsxs(i,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(i,{component:"img",src:r,alt:"Preview",sx:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px",mt:1}}),e.jsx(u,{size:"small",color:"error",onClick:F,sx:{mt:1},children:t("admin.employee_management.remove_image")})]})]}),e.jsx(n,{label:t("admin.employee_managemet.detail.account"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.userName}),e.jsx(n,{label:t("admin.employee_managemet.detail.fullname"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.fullName}),e.jsx(n,{label:t("admin.employee_managemet.detail.birthday"),variant:"standard",fullWidth:!0,margin:"normal",type:"date",defaultValue:a.birthDate,InputLabelProps:{style:{top:"-1.5rem"}}}),e.jsxs(i,{sx:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-start",my:2},children:[e.jsx(f,{children:t("admin.employee_managemet.detail.gender")}),e.jsxs(P,{defaultValue:a.gender||"Male",sx:{display:"flex",gap:10,flexDirection:"row"},children:[e.jsx(g,{value:"Male",control:e.jsx(h,{}),label:"Nam"}),e.jsx(g,{value:"Female",control:e.jsx(h,{}),label:"Nữ"})]})]}),e.jsx(n,{label:t("admin.employee_managemet.detail.email"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.email}),e.jsx(n,{label:t("admin.employee_managemet.detail.id_card"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.idCard}),e.jsx(n,{label:t("admin.employee_managemet.detail.phone"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.phoneNumber}),e.jsx(n,{label:t("admin.employee_managemet.detail.address"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.address}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(u,{onClick:()=>{j(-1)},color:"error",variant:"contained",children:t("admin.employee_managemet.come_back")}),e.jsx(u,{onClick:I,color:"primary",variant:"contained",children:t("admin.employee_managemet.save")})]})]})})})};export{O as default};
