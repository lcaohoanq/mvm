import{u as v,a as w,r as o,j as r,T as d,G as h,B as t,b as y,e as b,V as j}from"./index-C_VwZXF0.js";const S=({onMovieSelect:n,selectedMovieId:i})=>{const x=v(),{t:m}=w(),[p,l]=o.useState([]),[g,c]=o.useState(!0);o.useEffect(()=>{(async()=>{var s;try{c(!0);const a=await b.get("/movie/showing/page/0/size/100"),u=Array.isArray(a.data)?a.data:((s=a.data)==null?void 0:s.data)||[];l(u)}catch(a){console.error("Error fetching now showing movies:",a),j.error(m("toast.error.movie.loading")),l([])}finally{c(!1)}})()},[]);const f=e=>{n?n(e.movieId):x(`/admin/ql-ban-ve/ticket/${e.movieId}`)};return g?r.jsx(d,{children:"Đang tải danh sách phim..."}):r.jsx(h,{container:!0,spacing:3,children:p.map(e=>r.jsx(h,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(t,{sx:{display:"flex",flexDirection:"column",height:"100%",borderRadius:"12px",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease",bgcolor:"background.paper",boxShadow:3,"&:hover":{transform:"translateY(-8px)",boxShadow:6}},children:[r.jsx(t,{sx:{position:"relative"},children:r.jsx(t,{sx:{position:"relative",overflow:"hidden",height:{xs:"200px",sm:"250px"},width:"100%"},children:r.jsx("img",{src:e.image,alt:e.movieName,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"contain",transition:"transform 0.5s ease"},onMouseOver:s=>{s.currentTarget.style.transform="scale(1.05)"},onMouseOut:s=>{s.currentTarget.style.transform="scale(1)"}})})}),r.jsxs(t,{sx:{p:2.5,display:"flex",flexDirection:"column",flexGrow:1},children:[r.jsx(d,{variant:"h6",sx:{height:"3em",mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",fontSize:{xs:"1rem",sm:"1.1rem"}},children:e.movieName}),r.jsx(t,{sx:{mt:"auto"},children:r.jsx(y,{variant:"contained",fullWidth:!0,onClick:()=>f(e),sx:{bgcolor:i===e.movieId?"primary.dark":"primary.main","&:hover":{bgcolor:(i===e.movieId,"primary.dark")}},children:i===e.movieId?"Đã chọn":"Chọn phim này"})})]})]})},e.movieId))})};export{S as A};
