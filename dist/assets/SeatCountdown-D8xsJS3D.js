import{r as i,j as e,x as C,B as c,O as T,T as d}from"./index-b4PYlRZf.js";import{A as $}from"./AccessTime-2V2DNLoL.js";import{E}from"./EventSeat-B9N15VWl.js";const D=({seatId:n,seatName:x,startTime:u,resetTrigger:h,onTimeout:f})=>{const[S,g]=i.useState(u),y=300;i.useEffect(()=>{const a=Date.now();sessionStorage.setItem(`seatCountdown_${n}`,a.toString()),g(a)},[n,h]);const l=S+3e5,[o,j]=i.useState(Math.max(0,Math.floor((l-Date.now())/1e3)));i.useEffect(()=>{const a=setInterval(()=>{const p=Math.max(0,Math.floor((l-Date.now())/1e3));j(p),p<=0&&(clearInterval(a),sessionStorage.removeItem(`seatCountdown_${n}`),f(n))},1e3);return()=>clearInterval(a)},[l,n,f]);const v=Math.floor(o/60),m=o%60,w=`${v}:${m<10?"0":""}${m}`,b=o/y*100;let s="#4caf50",r="#4caf50";o<60?(s="#f44336",r="#f44336"):o<120&&(s="#ff9800",r="#ff9800");const t=x.includes("gháº¿");return e.jsxs(C,{elevation:3,sx:{display:"flex",alignItems:"center",padding:t?"12px 20px":"8px 12px",borderRadius:"16px",backgroundColor:"rgba(30, 30, 40, 0.8)",width:t?"180px":"fit-content",border:`1px solid ${s}`,transition:"all 0.3s ease",boxShadow:`0 0 12px ${s}30`,"&:hover":{boxShadow:`0 0 16px ${s}70`}},children:[e.jsxs(c,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",mr:1.5,transform:t?"scale(1.2)":"scale(1)"},children:[e.jsx(T,{variant:"determinate",value:b,size:t?52:44,thickness:4,sx:{color:s}}),e.jsx(c,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:t?e.jsx(E,{sx:{fontSize:"1.5rem",color:r}}):e.jsx($,{sx:{fontSize:"1.3rem",color:r}})})]}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(d,{variant:"caption",sx:{opacity:.8,color:"white",fontSize:t?"0.9rem":"0.75rem"},children:x}),e.jsx(d,{variant:"body2",sx:{fontWeight:"bold",fontFamily:"monospace",fontSize:t?"1.4rem":"1.1rem",color:r,letterSpacing:"0.05em",animation:o<60?"pulse 1s infinite":"none","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.7},"100%":{opacity:1}}},children:w})]})]})};export{D as S};
