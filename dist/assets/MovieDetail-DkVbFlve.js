import{c as H,j as e,a7 as B,u as G,a as J,g as R,J as Q,r as m,U as $,W as K,B as r,X,Y as Z,Z as ee,_ as y,$ as ae,C as te,T as c,aE as o,l as u,aF as C,aG as D,aH as I,aD as h,F as S,I as Y,S as q,f as M,m as se,b as p,aI as le,E as T,o as ie,p as ne,aJ as re,e as de,V as oe}from"./index-b4PYlRZf.js";import{S as ce}from"./ScrollFloat-gEWd791D.js";const me=H(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),ue=["P - Phim dành cho mọi lứa tuổi","K - Phim dành cho trẻ em dưới 13 tuổi","T13 - Phim dành cho khán giả từ 13 tuổi trở lên","T16 - Phim dành cho khán giả từ 16 tuổi trở lên","T18 - Phim dành cho khán giả từ 18 tuổi trở lên"],xe=["2D","3D","Phụ đề","Lồng tiếng"];function ve({onSubmit:O,movie:i}){var _;B();const P=G(),{t:s}=J(),W=ue,k=xe,{userDetails:g}=R(),{watch:he,control:d,handleSubmit:A,reset:j,setValue:pe}=Q({defaultValues:{movieName:"",image:"",fromDate:"",toDate:"",actors:"",director:"",rating:"",duration:(i==null?void 0:i.duration)||void 0,version:"",trailer:"",content:"",userId:(g==null?void 0:g.userId)||"",categoriesIds:((_=i==null?void 0:i.categories)==null?void 0:_.map(a=>a.categoryId))||[]}});m.useEffect(()=>{i&&j(i)},[i,j]);const w={cloudName:T.CLOUDINARY_CLOUD_NAME,uploadPreset:"movie_up"},[v,b]=m.useState((i==null?void 0:i.image)||""),[L,E]=m.useState([]),F=async()=>{try{const a=await de.get("category");console.log(a.data.data),E(a.data.data)}catch(a){oe.error(s("toast.error.category.loading")+a.message)}};m.useEffect(()=>{F()},[s]);const N=a=>{const t={...a,fromDate:h(a.fromDate).toISOString(),toDate:h(a.toDate).toISOString()};O(t),f(!1)},[n,f]=m.useState(!i);return e.jsxs($,{disableCustomTheme:!1,children:[e.jsx(K,{enableColorScheme:!0}),e.jsxs(r,{sx:{display:"flex",height:"100vh"},children:[e.jsx(X,{}),e.jsxs(r,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(Z,{}),e.jsxs(r,{component:"main",sx:a=>({flexGrow:1,backgroundColor:ee(a.palette.background.default,1),overflowY:"auto",px:3,py:2}),children:[e.jsxs(y,{spacing:2,children:[e.jsx(ae,{}),e.jsxs(te,{maxWidth:"xl",sx:{pt:{xs:"64px",sm:"72px",md:"10px"},pb:{xs:4,sm:6,md:8},position:"relative",zIndex:1},children:[e.jsx(r,{sx:{textAlign:"center",mb:{xs:4,sm:5,md:1}},children:e.jsx(ce,{animationDuration:1,ease:"back.inOut(2)",scrollStart:"center bottom+=50%",scrollEnd:"bottom bottom-=40%",stagger:.08,children:e.jsx(c,{variant:"h3",fontWeight:"bold",sx:{textTransform:"uppercase"},children:s(i?"movie_detail.more_detail":"movie_detail.add_new")})})}),e.jsxs("form",{onSubmit:A(N),children:[e.jsxs(y,{direction:"row",spacing:2,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{flex:1,maxWidth:750},children:[e.jsx(o,{name:"movieName",control:d,rules:{required:s("movie_detail.required.name")},render:({field:a,fieldState:{error:t}})=>e.jsx(u,{...a,fullWidth:!0,label:s("movie_detail.label.name"),margin:"dense",variant:"outlined",sx:{mt:3},error:!!t,helperText:t?t.message:"",InputProps:{readOnly:!n}})}),e.jsx(o,{name:"fromDate",control:d,rules:{required:s("movie_detail.required.showtime_selection")},render:({field:a,fieldState:{error:t}})=>e.jsx(C,{dateAdapter:D,children:e.jsx(I,{label:s("movie_detail.label.showtime"),...a,value:a.value?h(a.value,"YYYY-MM-DD"):null,onChange:l=>a.onChange((l==null?void 0:l.format("YYYY-MM-DD"))||""),slotProps:{textField:{size:"small",margin:"dense",error:!!t,helperText:t?t.message:"",fullWidth:!0}},format:"DD/MM/YYYY",readOnly:!n})})}),e.jsx(r,{children:e.jsx(o,{name:"toDate",control:d,rules:{required:s("movie_detail.required.end_day")},render:({field:a,fieldState:{error:t}})=>e.jsx(C,{dateAdapter:D,children:e.jsx(I,{label:s("movie_detail.label.end_day"),...a,value:a.value?h(a.value,"YYYY-MM-DD"):null,onChange:l=>a.onChange((l==null?void 0:l.format("YYYY-MM-DD"))||""),slotProps:{textField:{size:"small",margin:"dense",error:!!t,helperText:t?t.message:"",fullWidth:!0}},format:"DD/MM/YYYY",readOnly:!n})})})}),e.jsx(o,{name:"rating",control:d,rules:{required:s("movie_detail.required.age_group")},render:({field:a,fieldState:{error:t}})=>e.jsxs(S,{fullWidth:!0,margin:"dense",variant:"outlined",error:!!t,children:[e.jsx(Y,{id:"demo-simple-select-label",children:s("movie_detail.input_label.age_class")}),e.jsx(q,{...a,labelId:"demo-simple-select-label",id:"demo-simple-select",disabled:!n,children:W.map(l=>e.jsx(M,{value:l,children:l},l))}),t&&e.jsx(c,{variant:"caption",color:"error",children:t.message})]})}),e.jsx(o,{name:"version",control:d,rules:{required:s("movie_detail.required.version")},render:({field:a,fieldState:{error:t}})=>e.jsxs(S,{fullWidth:!0,margin:"dense",variant:"outlined",error:!!t,children:[e.jsx(Y,{id:"demo-simple-select-label",children:s("movie_detail.input_label.version")}),e.jsx(q,{...a,labelId:"demo-simple-select-label",id:"demo-simple-select",disabled:!n,children:k.map(l=>e.jsx(M,{value:l,children:l},l))}),t&&e.jsx(c,{variant:"caption",color:"error",children:t.message})]})}),e.jsx(o,{name:"duration",control:d,rules:{min:{value:1,message:s("movie_detail.message.duration")}},render:({field:a,fieldState:{error:t}})=>e.jsx(u,{...a,fullWidth:!0,label:s("movie_detail.label.duration"),type:"number",margin:"dense",variant:"outlined",value:a.value,error:!!t,helperText:t?t.message:"",InputProps:{endAdornment:e.jsx(se,{position:"end",children:s("movie_detail.input_label.minute")}),readOnly:!n}})}),e.jsx(o,{name:"director",control:d,rules:{required:s("movie_detail.required.director")},render:({field:a,fieldState:{error:t}})=>e.jsx(u,{...a,fullWidth:!0,label:s("movie_detail.label.director"),margin:"dense",variant:"outlined",error:!!t,helperText:t?t.message:"",InputProps:{readOnly:!n}})})]}),e.jsx(r,{children:e.jsx(o,{name:"image",control:d,rules:{required:s("movie_detail.required.image")},render:({field:a,fieldState:{error:t}})=>e.jsxs(r,{component:"section",sx:{p:2,width:250,maxHeight:"100%",border:"1px dashed grey",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsxs(r,{sx:{mt:1,mb:1,position:"relative"},children:[e.jsx("img",{src:a.value||v||"https://lh3.googleusercontent.com/proxy/eyweV2OAAOQOPKLAO51xBA1NJmnzv_6_Py10QJaddFLuSx42Ebf1OHUlMyxyW6G-acvTbxsT7phMBH7xTqdLyDw_5dW5kymvT-Q",alt:"Uploaded",style:{maxWidth:"100%",maxHeight:"100%"}}),v&&n&&e.jsx(p,{onClick:()=>{b(""),a.onChange("")},sx:{position:"absolute",top:5,right:5,minWidth:"auto",padding:0},color:"error",children:e.jsx(me,{})})]}),n&&e.jsx(le,{uwConfig:w,setPublicId:l=>{const x=`https://res.cloudinary.com/${T.CLOUDINARY_CLOUD_NAME}/image/upload/${l}`;b(x),a.onChange(x)}}),t&&e.jsx(c,{variant:"caption",color:"error",sx:{mt:1},children:t.message})]})})})]}),e.jsx(o,{name:"actors",control:d,rules:{required:s("movie_detail.required.actor")},render:({field:a,fieldState:{error:t}})=>e.jsx(u,{...a,fullWidth:!0,label:s("movie_detail.label.actor"),margin:"dense",variant:"outlined",sx:{mt:3},error:!!t,helperText:t?t.message:"",InputProps:{readOnly:!n}})}),e.jsx(o,{name:"trailer",control:d,rules:{required:s("movie_detail.required.trailer")},render:({field:a,fieldState:{error:t}})=>e.jsx(u,{...a,fullWidth:!0,label:s("movie_detail.label.trailer"),margin:"dense",variant:"outlined",error:!!t,helperText:t?t.message:"",InputProps:{readOnly:!n}})}),e.jsx(o,{name:"categoriesIds",control:d,rules:{validate:a=>a.length>0||s("movie_detail.required.category")},render:({field:a,fieldState:{error:t}})=>e.jsxs(r,{sx:{mt:2},children:[e.jsx(c,{variant:"h6",sx:{mb:1},children:s("movie_detail.label.category")}),e.jsx(r,{sx:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)"},children:L.map((l,x)=>e.jsx(ie,{control:e.jsx(ne,{checked:a.value.includes(l.categoryId),onChange:V=>{const U=V.target.checked?[...a.value,l.categoryId]:a.value.filter(z=>z!==l.categoryId);a.onChange(U)},disabled:!n}),label:l.name},x))}),t&&e.jsx(c,{variant:"caption",color:"error",children:t.message})]})}),e.jsx(o,{name:"content",control:d,defaultValue:"",rules:{required:s("movie_detail.required.content"),validate:a=>a.trim()!==""||s("movie_detail.required.content")},render:({field:a,fieldState:{error:t}})=>e.jsxs(r,{sx:{mt:1,mb:2},children:[" ",e.jsxs(c,{variant:"h6",sx:{mb:1},children:[" ",s("movie_detail.label.content")]}),e.jsx(re,{value:a.value,onChange:l=>a.onChange(l),error:t==null?void 0:t.message,readOnly:!n})]})}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:3},children:n?e.jsx(p,{type:"submit",variant:"contained",children:s(i?"movie_detail.update":"movie_detail.add_new")}):null})]}),n?null:e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:1},children:e.jsx(p,{variant:"contained",onClick:()=>f(!0),children:s("movie_detail.back")})})]})]}),e.jsx(p,{onClick:()=>P("/admin/ql-phim"),children:s("movie_detail.back")})]})]})]})]})}export{ve as M};
