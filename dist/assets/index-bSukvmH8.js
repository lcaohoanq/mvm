import{G as x,J as C,r as d,K as j,j as s,p as T,N as E,O as v,T as R,Q as w,R as M,U as N,W as S,X as U,b as m,u as F,V as p}from"./index-Bu40L8XC.js";import{f as L,R as O}from"./user.apis-EjOkfg4C.js";import{M as P,d as V}from"./ManagementTable-DSqFS67c.js";import{M as X}from"./ManagementPageLayout-Bj7uPUkn.js";import{u as b}from"./useQuery-XXPOABpW.js";import"./TableContainer-gUbHMtlq.js";import"./TableRow-CCgHgURc.js";function k(o){return x("MuiDialogContentText",o)}C("MuiDialogContentText",["root"]);const q=o=>{const{classes:e}=o,n=v({root:["root"]},k,e);return{...e,...n}},B=T(R,{shouldForwardProp:o=>w(o)||o==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(o,e)=>e.root})({}),I=d.forwardRef(function(e,a){const n=j({props:e,name:"MuiDialogContentText"}),{children:i,className:l,...c}=n,r=q(c);return s.jsx(B,{component:"p",variant:"body1",color:"textSecondary",ref:a,ownerState:c,className:E(r.root,l),...n,classes:r})}),Q=({isDialogOpen:o,handleCloseDialog:e,handleConfirmDelete:a,employeeData:n})=>n?s.jsxs(M,{open:o,onClose:e,children:[s.jsx(N,{children:"Xác nhận xóa nhân viên"}),s.jsx(S,{children:s.jsxs(I,{children:["Bạn có chắc chắn muốn xóa nhân viên ",n.fullName,"? Hành động này không thể hoàn tác."]})}),s.jsxs(U,{children:[s.jsx(m,{onClick:e,children:"Hủy"}),s.jsx(m,{onClick:a,color:"error",variant:"contained",children:"Xóa"})]})]}):null,z=()=>{const o=F(),[e,a]=d.useState(null),[n,i]=d.useState(!1),{data:l,isLoading:c,error:r}=b({queryKey:["users","employees"],queryFn:async()=>{const t=await L(O.Employee);if(!t.isSuccess||!t.data)throw new Error(t.message||"Failed to fetch employees");return t.data}});d.useEffect(()=>{r&&p.error(r instanceof Error?r.message:"Failed to load employees")},[r]);const g=t=>{o(`/admin/ql-nhan-vien/${t}`)},h=t=>{const u=l==null?void 0:l.find(D=>D.userId===t);u&&(a(u),i(!0))},f=async()=>{if(e)try{console.log("Deleting employee:",e.userId)}catch{p.error("Failed to delete employee")}i(!1),a(null)},y=[...V,{field:"joinDate",headerName:"Join Date",align:"center",renderCell:t=>new Date(t.joinDate).toLocaleDateString()}];return s.jsxs(X,{children:[s.jsx(P,{data:l,columns:y,onEdit:g,onDelete:h,isLoading:c}),s.jsx(Q,{isDialogOpen:n,handleCloseDialog:()=>{i(!1),a(null)},handleConfirmDelete:f,employeeData:e})]})};export{z as default};
