import{a0 as U,u as W,r as s,j as e,L,C as V,B as i,T as f,al as l,l as n,h as N,b as u,o as g}from"./index-B0N4umr3.js";import{u as D}from"./useQuery-CJ73VS18.js";import{a as w}from"./user.apis-Dmm3LtKd.js";import{M as E}from"./ManagementPageLayout-CR8cRzYv.js";import{F as P}from"./FileUploadOutlined-yVimaCSV.js";import{R as S,a as h}from"./RadioGroup-DrNM0HmX.js";const O=()=>{const{id:c}=U(),j=W(),{data:a=null,isLoading:y,error:v}=D({queryKey:["employeeDetail",c],queryFn:async()=>{const t=await w(c);if(!t.isSuccess||!t.data)throw new Error(t.message||"Failed to fetch employee data");return t.data}}),[r,o]=s.useState(null),[b,x]=s.useState(null),m=s.useRef(null);if(s.useEffect(()=>{a&&a.avatar&&o(a.avatar)},[a]),s.useEffect(()=>{r&&console.log("Image URL updated:",r)},[r]),y)return e.jsx(L,{});if(v)return e.jsx("div",{children:"Failed to fetch data"});if(!a)return e.jsx("div",{children:"No employee data found"});const _=t=>{var p;const d=(p=t.target.files)==null?void 0:p[0];if(d){console.log(d);const R=URL.createObjectURL(d);o(R),x(d)}t.target.value=""},C=t=>{o(t.target.value)},F=()=>{o(null),x(null),m.current&&(m.current.value="")},I=()=>{console.log("Image to save:",b||r)};return e.jsx(E,{children:e.jsx(V,{maxWidth:"md",children:e.jsxs(i,{sx:{py:4},children:[e.jsx(f,{variant:"h4",component:"h1",sx:{mb:4},children:l("admin.employee_management.edit")}),e.jsxs(i,{sx:{mb:2},children:[e.jsx(n,{fullWidth:!0,margin:"normal",label:"Hình ảnh",variant:"standard",value:r||"",onChange:C,InputProps:{endAdornment:e.jsxs(N,{component:"label",children:[e.jsx(P,{}),e.jsx("input",{ref:m,style:{display:"none"},type:"file",accept:"image/*",hidden:!0,onChange:_,name:"[licenseFile]"})]})}}),r&&e.jsxs(i,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(i,{component:"img",src:r,alt:"Preview",sx:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px",mt:1}}),e.jsx(u,{size:"small",color:"error",onClick:F,sx:{mt:1},children:l("admin.employee_management.remove_image")})]})]}),e.jsx(n,{label:l("admin.employee_managemet.detail.account"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.userName}),e.jsx(n,{label:l("admin.employee_managemet.detail.fullname"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.fullName}),e.jsx(n,{label:l("admin.employee_managemet.detail.birthday"),variant:"standard",fullWidth:!0,margin:"normal",type:"date",defaultValue:a.birthDate,InputLabelProps:{style:{top:"-1.5rem"}}}),e.jsxs(i,{sx:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-start",my:2},children:[e.jsx(f,{children:l("admin.employee_managemet.detail.gender")}),e.jsxs(S,{defaultValue:a.gender||"Male",sx:{display:"flex",gap:10,flexDirection:"row"},children:[e.jsx(g,{value:"Male",control:e.jsx(h,{}),label:"Nam"}),e.jsx(g,{value:"Female",control:e.jsx(h,{}),label:"Nữ"})]})]}),e.jsx(n,{label:l("admin.employee_managemet.detail.email"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.email}),e.jsx(n,{label:l("admin.employee_managemet.detail.id_card"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.idCard}),e.jsx(n,{label:l("admin.employee_managemet.detail.phone"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.phoneNumber}),e.jsx(n,{label:l("admin.employee_managemet.detail.address"),variant:"standard",fullWidth:!0,margin:"normal",defaultValue:a.address}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(u,{onClick:()=>{j(-1)},color:"error",variant:"contained",children:l("admin.employee_managemet.detail.come_back")}),e.jsx(u,{onClick:I,color:"primary",variant:"contained",children:l("admin.employee_managemet.detail.save")})]})]})})})};export{O as default};
