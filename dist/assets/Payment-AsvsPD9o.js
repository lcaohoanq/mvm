import{az as R,u as $,r as i,j as e,B as n,T as r,P as c,i as a,b as q,d as B,V as J}from"./index-DZtaYlZS.js";import{S as E}from"./StepTracker-B89-jwKr.js";import{H as K,F as X}from"./Header-s1ujL9H0.js";import{C as _}from"./Container-D8PCRmru.js";import{G as s}from"./Grid-DdXUmaHF.js";import"./Stepper-Bkj2XqRl.js";import"./Search-P2Cg3KsU.js";const re=()=>{const h=R();$();const{selectedTime:C,selectedDate:k,tickets:u,seats:F}=h.state||{selectedTime:"Not selected",selectedDate:"Not selected",tickets:[],seats:[]},d=(u||[]).reduce((t,o)=>t+o.price*(o.quantity||0),0),{movieTitle:x="Phim Mặc Định",screen:P="Màn hình 1",showDate:V=k,showTime:A=C,price:D=d}=h.state||{},l=d,[m,I]=i.useState(""),[p,H]=i.useState(""),[g,L]=i.useState(""),[b,M]=i.useState(""),[j,f]=i.useState(!1),[v,y]=i.useState(!1),[w,T]=i.useState(!1),[S,N]=i.useState(!1),W=async()=>{let t=!1;if(m.trim()?f(!1):(f(!0),t=!0),p.trim()?y(!1):(y(!0),t=!0),g.trim()?T(!1):(T(!0),t=!0),b.trim()?N(!1):(N(!0),t=!0),!t)try{const o={totalTicket:u.length,amount:l,promotionId:""},G=await B.post("bill?userId=16223053-AE9B-4A5F-AADE-437781C2A8A5",o);console.log(G.data);const z=await B.get(`vnpay/createpaymenturl?money=${l}&description=${`Payment for movie tickets: ${x}`}`);window.location.href=z.data}catch(o){console.error(o),J.error("Đặt vé thất bại!");return}};return e.jsxs(n,{sx:{minHeight:"100vh",background:`linear-gradient(to bottom,
          rgba(11, 13, 26, 0.95) 0%,
          rgba(11, 13, 26, 0.85) 100%
        )`,position:"relative","&::before":{content:'""',position:"fixed",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 20% 30%, rgba(78, 46, 131, 0.4) 0%, rgba(78, 46, 131, 0) 50%),
                      radial-gradient(circle at 75% 15%, rgba(33, 64, 154, 0.4) 0%, rgba(33, 64, 154, 0) 50%),
                      linear-gradient(135deg, #0B0D1A 0%, #1A1E3C 50%, #3A1155 100%)`,zIndex:-1}},children:[e.jsx(K,{}),e.jsx(_,{maxWidth:"xl",sx:{pt:{xs:"64px",sm:"72px",md:"80px"},pb:{xs:4,sm:6,md:8},px:{xs:2,sm:3,md:4},position:"relative"},children:e.jsxs(n,{sx:{display:"flex",gap:{xs:2,sm:3,md:4},color:"white",position:"relative",minHeight:"100vh"},children:[e.jsx(n,{sx:{display:{xs:"none",md:"block"},position:"sticky",top:"100px",alignSelf:"flex-start",height:"fit-content",width:"250px",flexShrink:0},children:e.jsx(E,{currentStep:3})}),e.jsxs(n,{sx:{flex:1,display:"flex",flexDirection:"column",gap:{xs:2,sm:3,md:4},pb:4},children:[e.jsx(n,{sx:{display:{xs:"block",md:"none"},mb:2},children:e.jsx(E,{currentStep:3})}),e.jsx(r,{variant:"h4",fontWeight:"bold",align:"center",gutterBottom:!0,fontFamily:"JetBrains Mono",sx:{textTransform:"uppercase",mb:4},children:"Thanh Toán Vé"}),e.jsxs(s,{container:!0,spacing:4,children:[e.jsx(s,{item:!0,xs:12,md:4,children:e.jsx(c,{sx:{p:2,backgroundColor:"rgba(28, 28, 28, 0.8)",color:"white"},children:e.jsx(n,{component:"img",src:"https://cinestar.com.vn/_next/image/?url=https%3A%2F%2Fapi-website.cinestar.com.vn%2Fmedia%2Fwysiwyg%2FPosters%2F01-2025%2Fden-am-hon-poster.png&w=2048&q=75",alt:"Movie Poster",sx:{width:"100%",borderRadius:2,objectFit:"cover",maxHeight:500,mb:2}})})}),e.jsxs(s,{item:!0,xs:12,md:8,children:[e.jsx(c,{sx:{p:3,backgroundColor:"rgba(28, 28, 28, 0.8)",color:"white",mb:3},children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Thông Tin Phim"}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Tên phim:"})," ",x]}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Màn hình:"})," ",P]}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Ngày chiếu:"})," ",V]}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Giờ chiếu:"})," ",A]})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Thông Tin Vé"}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Ghế:"})," ",F.join(", ")||"Chưa chọn ghế"]}),e.jsxs(r,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Giá:"})," ",D.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}),e.jsxs(r,{variant:"body1",gutterBottom:!0,sx:{color:"#fbc02d",fontWeight:"bold",fontSize:"1.1rem",mt:1},children:[e.jsx("strong",{children:"Tổng cộng:"})," ",l.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]})]})]})}),e.jsxs(c,{sx:{p:3,backgroundColor:"rgba(28, 28, 28, 0.8)",color:"white"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Thông Tin Khách Hàng"}),e.jsxs(s,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(a,{label:"Họ tên",variant:"outlined",fullWidth:!0,value:m,onChange:t=>I(t.target.value),error:j,helperText:j?"Vui lòng nhập họ tên":"",InputLabelProps:{style:{color:"white"}},sx:{input:{color:"white"}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(a,{label:"Email",variant:"outlined",fullWidth:!0,value:p,onChange:t=>H(t.target.value),error:v,helperText:v?"Vui lòng nhập email":"",InputLabelProps:{style:{color:"white"}},sx:{input:{color:"white"}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(a,{label:"CMND",variant:"outlined",fullWidth:!0,value:g,onChange:t=>L(t.target.value),error:w,helperText:w?"Vui lòng nhập CMND":"",InputLabelProps:{style:{color:"white"}},sx:{input:{color:"white"}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(a,{label:"Số điện thoại",variant:"outlined",fullWidth:!0,value:b,onChange:t=>M(t.target.value),error:S,helperText:S?"Vui lòng nhập số điện thoại":"",InputLabelProps:{style:{color:"white"}},sx:{input:{color:"white"}}})})]}),e.jsx(n,{sx:{textAlign:"center",mt:3},children:e.jsx(q,{variant:"contained",color:"primary",onClick:W,sx:{px:4,py:1,fontSize:"1rem",borderRadius:2},children:"Xác nhận đặt vé"})})]})]})]})]})]})}),e.jsx(X,{})]})};export{re as default};
